(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();var Pd={exports:{}},ql={};var Gy;function Z2(){if(Gy)return ql;Gy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var y in o)y!=="key"&&(c[y]=o[y])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:c}}return ql.Fragment=e,ql.jsx=i,ql.jsxs=i,ql}var Yy;function J2(){return Yy||(Yy=1,Pd.exports=Z2()),Pd.exports}var m=J2(),zd={exports:{}},Ve={};var Qy;function W2(){if(Qy)return Ve;Qy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),C=Symbol.iterator;function U(j){return j===null||typeof j!="object"?null:(j=C&&j[C]||j["@@iterator"],typeof j=="function"?j:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,oe={};function me(j,Z,de){this.props=j,this.context=Z,this.refs=oe,this.updater=de||W}me.prototype.isReactComponent={},me.prototype.setState=function(j,Z){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},me.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Ne(){}Ne.prototype=me.prototype;function xe(j,Z,de){this.props=j,this.context=Z,this.refs=oe,this.updater=de||W}var Fe=xe.prototype=new Ne;Fe.constructor=xe,X(Fe,me.prototype),Fe.isPureReactComponent=!0;var Ae=Array.isArray;function Ue(){}var D={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function A(j,Z,de){var pe=de.ref;return{$$typeof:r,type:j,key:Z,ref:pe!==void 0?pe:null,props:de}}function O(j,Z){return A(j.type,Z,j.props)}function M(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function V(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(de){return Z[de]})}var N=/\/+/g;function Be(j,Z){return typeof j=="object"&&j!==null&&j.key!=null?V(""+j.key):Z.toString(36)}function nt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Ue,Ue):(j.status="pending",j.then(function(Z){j.status==="pending"&&(j.status="fulfilled",j.value=Z)},function(Z){j.status==="pending"&&(j.status="rejected",j.reason=Z)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Y(j,Z,de,pe,Ie){var Oe=typeof j;(Oe==="undefined"||Oe==="boolean")&&(j=null);var Ge=!1;if(j===null)Ge=!0;else switch(Oe){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(j.$$typeof){case r:case e:Ge=!0;break;case E:return Ge=j._init,Y(Ge(j._payload),Z,de,pe,Ie)}}if(Ge)return Ie=Ie(j),Ge=pe===""?"."+Be(j,0):pe,Ae(Ie)?(de="",Ge!=null&&(de=Ge.replace(N,"$&/")+"/"),Y(Ie,Z,de,"",function(Fi){return Fi})):Ie!=null&&(M(Ie)&&(Ie=O(Ie,de+(Ie.key==null||j&&j.key===Ie.key?"":(""+Ie.key).replace(N,"$&/")+"/")+Ge)),Z.push(Ie)),1;Ge=0;var Tt=pe===""?".":pe+":";if(Ae(j))for(var ft=0;ft<j.length;ft++)pe=j[ft],Oe=Tt+Be(pe,ft),Ge+=Y(pe,Z,de,Oe,Ie);else if(ft=U(j),typeof ft=="function")for(j=ft.call(j),ft=0;!(pe=j.next()).done;)pe=pe.value,Oe=Tt+Be(pe,ft++),Ge+=Y(pe,Z,de,Oe,Ie);else if(Oe==="object"){if(typeof j.then=="function")return Y(nt(j),Z,de,pe,Ie);throw Z=String(j),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function B(j,Z,de){if(j==null)return j;var pe=[],Ie=0;return Y(j,pe,"","",function(Oe){return Z.call(de,Oe,Ie++)}),pe}function ce(j){if(j._status===-1){var Z=j._result;Z=Z(),Z.then(function(de){(j._status===0||j._status===-1)&&(j._status=1,j._result=de)},function(de){(j._status===0||j._status===-1)&&(j._status=2,j._result=de)}),j._status===-1&&(j._status=0,j._result=Z)}if(j._status===1)return j._result.default;throw j._result}var qe=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},je={map:B,forEach:function(j,Z,de){B(j,function(){Z.apply(this,arguments)},de)},count:function(j){var Z=0;return B(j,function(){Z++}),Z},toArray:function(j){return B(j,function(Z){return Z})||[]},only:function(j){if(!M(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ve.Activity=w,Ve.Children=je,Ve.Component=me,Ve.Fragment=i,Ve.Profiler=o,Ve.PureComponent=xe,Ve.StrictMode=s,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(j){return D.H.useMemoCache(j)}},Ve.cache=function(j){return function(){return j.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(j,Z,de){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var pe=X({},j.props),Ie=j.key;if(Z!=null)for(Oe in Z.key!==void 0&&(Ie=""+Z.key),Z)!R.call(Z,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&Z.ref===void 0||(pe[Oe]=Z[Oe]);var Oe=arguments.length-2;if(Oe===1)pe.children=de;else if(1<Oe){for(var Ge=Array(Oe),Tt=0;Tt<Oe;Tt++)Ge[Tt]=arguments[Tt+2];pe.children=Ge}return A(j.type,Ie,pe)},Ve.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},Ve.createElement=function(j,Z,de){var pe,Ie={},Oe=null;if(Z!=null)for(pe in Z.key!==void 0&&(Oe=""+Z.key),Z)R.call(Z,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ie[pe]=Z[pe]);var Ge=arguments.length-2;if(Ge===1)Ie.children=de;else if(1<Ge){for(var Tt=Array(Ge),ft=0;ft<Ge;ft++)Tt[ft]=arguments[ft+2];Ie.children=Tt}if(j&&j.defaultProps)for(pe in Ge=j.defaultProps,Ge)Ie[pe]===void 0&&(Ie[pe]=Ge[pe]);return A(j,Oe,Ie)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(j){return{$$typeof:y,render:j}},Ve.isValidElement=M,Ve.lazy=function(j){return{$$typeof:E,_payload:{_status:-1,_result:j},_init:ce}},Ve.memo=function(j,Z){return{$$typeof:x,type:j,compare:Z===void 0?null:Z}},Ve.startTransition=function(j){var Z=D.T,de={};D.T=de;try{var pe=j(),Ie=D.S;Ie!==null&&Ie(de,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Ue,qe)}catch(Oe){qe(Oe)}finally{Z!==null&&de.types!==null&&(Z.types=de.types),D.T=Z}},Ve.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ve.use=function(j){return D.H.use(j)},Ve.useActionState=function(j,Z,de){return D.H.useActionState(j,Z,de)},Ve.useCallback=function(j,Z){return D.H.useCallback(j,Z)},Ve.useContext=function(j){return D.H.useContext(j)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(j,Z){return D.H.useDeferredValue(j,Z)},Ve.useEffect=function(j,Z){return D.H.useEffect(j,Z)},Ve.useEffectEvent=function(j){return D.H.useEffectEvent(j)},Ve.useId=function(){return D.H.useId()},Ve.useImperativeHandle=function(j,Z,de){return D.H.useImperativeHandle(j,Z,de)},Ve.useInsertionEffect=function(j,Z){return D.H.useInsertionEffect(j,Z)},Ve.useLayoutEffect=function(j,Z){return D.H.useLayoutEffect(j,Z)},Ve.useMemo=function(j,Z){return D.H.useMemo(j,Z)},Ve.useOptimistic=function(j,Z){return D.H.useOptimistic(j,Z)},Ve.useReducer=function(j,Z,de){return D.H.useReducer(j,Z,de)},Ve.useRef=function(j){return D.H.useRef(j)},Ve.useState=function(j){return D.H.useState(j)},Ve.useSyncExternalStore=function(j,Z,de){return D.H.useSyncExternalStore(j,Z,de)},Ve.useTransition=function(){return D.H.useTransition()},Ve.version="19.2.1",Ve}var Ky;function Vm(){return Ky||(Ky=1,zd.exports=W2()),zd.exports}var ne=Vm(),Bd={exports:{}},Hl={},qd={exports:{}},Hd={};var $y;function eE(){return $y||($y=1,(function(r){function e(Y,B){var ce=Y.length;Y.push(B);e:for(;0<ce;){var qe=ce-1>>>1,je=Y[qe];if(0<o(je,B))Y[qe]=B,Y[ce]=je,ce=qe;else break e}}function i(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var B=Y[0],ce=Y.pop();if(ce!==B){Y[0]=ce;e:for(var qe=0,je=Y.length,j=je>>>1;qe<j;){var Z=2*(qe+1)-1,de=Y[Z],pe=Z+1,Ie=Y[pe];if(0>o(de,ce))pe<je&&0>o(Ie,de)?(Y[qe]=Ie,Y[pe]=ce,qe=pe):(Y[qe]=de,Y[Z]=ce,qe=Z);else if(pe<je&&0>o(Ie,ce))Y[qe]=Ie,Y[pe]=ce,qe=pe;else break e}}return B}function o(Y,B){var ce=Y.sortIndex-B.sortIndex;return ce!==0?ce:Y.id-B.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var h=Date,y=h.now();r.unstable_now=function(){return h.now()-y}}var p=[],x=[],E=1,w=null,C=3,U=!1,W=!1,X=!1,oe=!1,me=typeof setTimeout=="function"?setTimeout:null,Ne=typeof clearTimeout=="function"?clearTimeout:null,xe=typeof setImmediate<"u"?setImmediate:null;function Fe(Y){for(var B=i(x);B!==null;){if(B.callback===null)s(x);else if(B.startTime<=Y)s(x),B.sortIndex=B.expirationTime,e(p,B);else break;B=i(x)}}function Ae(Y){if(X=!1,Fe(Y),!W)if(i(p)!==null)W=!0,Ue||(Ue=!0,V());else{var B=i(x);B!==null&&nt(Ae,B.startTime-Y)}}var Ue=!1,D=-1,R=5,A=-1;function O(){return oe?!0:!(r.unstable_now()-A<R)}function M(){if(oe=!1,Ue){var Y=r.unstable_now();A=Y;var B=!0;try{e:{W=!1,X&&(X=!1,Ne(D),D=-1),U=!0;var ce=C;try{t:{for(Fe(Y),w=i(p);w!==null&&!(w.expirationTime>Y&&O());){var qe=w.callback;if(typeof qe=="function"){w.callback=null,C=w.priorityLevel;var je=qe(w.expirationTime<=Y);if(Y=r.unstable_now(),typeof je=="function"){w.callback=je,Fe(Y),B=!0;break t}w===i(p)&&s(p),Fe(Y)}else s(p);w=i(p)}if(w!==null)B=!0;else{var j=i(x);j!==null&&nt(Ae,j.startTime-Y),B=!1}}break e}finally{w=null,C=ce,U=!1}B=void 0}}finally{B?V():Ue=!1}}}var V;if(typeof xe=="function")V=function(){xe(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Be=N.port2;N.port1.onmessage=M,V=function(){Be.postMessage(null)}}else V=function(){me(M,0)};function nt(Y,B){D=me(function(){Y(r.unstable_now())},B)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_next=function(Y){switch(C){case 1:case 2:case 3:var B=3;break;default:B=C}var ce=C;C=B;try{return Y()}finally{C=ce}},r.unstable_requestPaint=function(){oe=!0},r.unstable_runWithPriority=function(Y,B){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ce=C;C=Y;try{return B()}finally{C=ce}},r.unstable_scheduleCallback=function(Y,B,ce){var qe=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?qe+ce:qe):ce=qe,Y){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ce+je,Y={id:E++,callback:B,priorityLevel:Y,startTime:ce,expirationTime:je,sortIndex:-1},ce>qe?(Y.sortIndex=ce,e(x,Y),i(p)===null&&Y===i(x)&&(X?(Ne(D),D=-1):X=!0,nt(Ae,ce-qe))):(Y.sortIndex=je,e(p,Y),W||U||(W=!0,Ue||(Ue=!0,V()))),Y},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Y){var B=C;return function(){var ce=C;C=B;try{return Y.apply(this,arguments)}finally{C=ce}}}})(Hd)),Hd}var Xy;function tE(){return Xy||(Xy=1,qd.exports=eE()),qd.exports}var Fd={exports:{}},qn={};var Zy;function nE(){if(Zy)return qn;Zy=1;var r=Vm();function e(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)x+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,x,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:x,implementation:E}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return qn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,qn.createPortal=function(p,x){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(p,x,null,E)},qn.flushSync=function(p){var x=h.T,E=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=x,s.p=E,s.d.f()}},qn.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,s.d.C(p,x))},qn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},qn.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var E=x.as,w=y(E,x.crossOrigin),C=typeof x.integrity=="string"?x.integrity:void 0,U=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;E==="style"?s.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:C,fetchPriority:U}):E==="script"&&s.d.X(p,{crossOrigin:w,integrity:C,fetchPriority:U,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},qn.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var E=y(x.as,x.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&s.d.M(p)},qn.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var E=x.as,w=y(E,x.crossOrigin);s.d.L(p,E,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},qn.preloadModule=function(p,x){if(typeof p=="string")if(x){var E=y(x.as,x.crossOrigin);s.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:E,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else s.d.m(p)},qn.requestFormReset=function(p){s.d.r(p)},qn.unstable_batchedUpdates=function(p,x){return p(x)},qn.useFormState=function(p,x,E){return h.H.useFormState(p,x,E)},qn.useFormStatus=function(){return h.H.useHostTransitionStatus()},qn.version="19.2.1",qn}var Jy;function iE(){if(Jy)return Fd.exports;Jy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Fd.exports=nE(),Fd.exports}var Wy;function sE(){if(Wy)return Hl;Wy=1;var r=tE(),e=Vm(),i=iE();function s(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function h(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(s(188))}function x(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(s(188));return n!==t?null:t}for(var a=t,l=n;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),t;if(d===l)return p(f),n;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var b=!1,_=f.child;_;){if(_===a){b=!0,a=f,l=d;break}if(_===l){b=!0,l=f,a=d;break}_=_.sibling}if(!b){for(_=d.child;_;){if(_===a){b=!0,a=d,l=f;break}if(_===l){b=!0,l=d,a=f;break}_=_.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:n}function E(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=E(t),n!==null)return n;t=t.sibling}return null}var w=Object.assign,C=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),Ne=Symbol.for("react.consumer"),xe=Symbol.for("react.context"),Fe=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Be(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case me:return"Profiler";case oe:return"StrictMode";case Ae:return"Suspense";case Ue:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case xe:return t.displayName||"Context";case Ne:return(t._context.displayName||"Context")+".Consumer";case Fe:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return n=t.displayName||null,n!==null?n:Be(t.type)||"Memo";case R:n=t._payload,t=t._init;try{return Be(t(n))}catch{}}return null}var nt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},qe=[],je=-1;function j(t){return{current:t}}function Z(t){0>je||(t.current=qe[je],qe[je]=null,je--)}function de(t,n){je++,qe[je]=t.current,t.current=n}var pe=j(null),Ie=j(null),Oe=j(null),Ge=j(null);function Tt(t,n){switch(de(Oe,n),de(Ie,t),de(pe,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?my(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=my(n),t=gy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(pe),de(pe,t)}function ft(){Z(pe),Z(Ie),Z(Oe)}function Fi(t){t.memoizedState!==null&&de(Ge,t);var n=pe.current,a=gy(n,t.type);n!==a&&(de(Ie,t),de(pe,a))}function Gi(t){Ie.current===t&&(Z(pe),Z(Ie)),Ge.current===t&&(Z(Ge),Ul._currentValue=ce)}var Qn,Tn;function kn(t){if(Qn===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Qn=n&&n[1]||"",Tn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qn+t+Tn}var cs=!1;function yi(t,n){if(!t||cs)return"";cs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Q){var F=Q}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(Q){F=Q}t.call(ee.prototype)}}else{try{throw Error()}catch(Q){F=Q}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Q){if(Q&&F&&typeof Q.stack=="string")return[Q.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),b=d[0],_=d[1];if(b&&_){var I=b.split(`
`),H=_.split(`
`);for(f=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(l===I.length||f===H.length)for(l=I.length-1,f=H.length-1;1<=l&&0<=f&&I[l]!==H[f];)f--;for(;1<=l&&0<=f;l--,f--)if(I[l]!==H[f]){if(l!==1||f!==1)do if(l--,f--,0>f||I[l]!==H[f]){var K=`
`+I[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=f);break}}}finally{cs=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?kn(a):""}function js(t,n){switch(t.tag){case 26:case 27:case 5:return kn(t.type);case 16:return kn("Lazy");case 13:return t.child!==n&&n!==null?kn("Suspense Fallback"):kn("Suspense");case 19:return kn("SuspenseList");case 0:case 15:return yi(t.type,!1);case 11:return yi(t.type.render,!1);case 1:return yi(t.type,!0);case 31:return kn("Activity");default:return""}}function xi(t){try{var n="",a=null;do n+=js(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Vt=Object.prototype.hasOwnProperty,it=r.unstable_scheduleCallback,Xt=r.unstable_cancelCallback,ma=r.unstable_shouldYield,wn=r.unstable_requestPaint,fn=r.unstable_now,Dt=r.unstable_getCurrentPriorityLevel,Yi=r.unstable_ImmediatePriority,Lt=r.unstable_UserBlockingPriority,Qi=r.unstable_NormalPriority,ii=r.unstable_LowPriority,yr=r.unstable_IdlePriority,xr=r.log,br=r.unstable_setDisableYieldValue,Kn=null,Zt=null;function jn(t){if(typeof xr=="function"&&br(t),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(Kn,t)}catch{}}var wt=Math.clz32?Math.clz32:_r,vr=Math.log,us=Math.LN2;function _r(t){return t>>>=0,t===0?32:31-(vr(t)/us|0)|0}var si=256,Vs=262144,ht=4194304;function Vn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ln(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var _=l&134217727;return _!==0?(l=_&~d,l!==0?f=Vn(l):(b&=_,b!==0?f=Vn(b):a||(a=_&~t,a!==0&&(f=Vn(a))))):(_=l&~d,_!==0?f=Vn(_):b!==0?f=Vn(b):a||(a=l&~t,a!==0&&(f=Vn(a)))),f===0?0:n!==0&&n!==f&&(n&d)===0&&(d=f&-f,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:f}function $n(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Ja(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ls(){var t=ht;return ht<<=1,(ht&62914560)===0&&(ht=4194304),t}function bi(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function vi(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ga(t,n,a,l,f,d){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var _=t.entanglements,I=t.expirationTimes,H=t.hiddenUpdates;for(a=b&~a;0<a;){var K=31-wt(a),ee=1<<K;_[K]=0,I[K]=-1;var F=H[K];if(F!==null)for(H[K]=null,K=0;K<F.length;K++){var Q=F[K];Q!==null&&(Q.lane&=-536870913)}a&=~ee}l!==0&&Un(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(b&~n))}function Un(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-wt(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function fs(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-wt(a),f=1<<l;f&n|t[l]&n&&(t[l]|=n),a&=~f}}function xn(t,n){var a=n&-n;return a=(a&42)!==0?1:Ki(a),(a&(t.suspendedLanes|n))!==0?0:a}function Ki(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function qt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Er(){var t=B.p;return t!==0?t:(t=window.event,t===void 0?32:Uy(t.type))}function nn(t,n){var a=B.p;try{return B.p=t,n()}finally{B.p=a}}var Xn=Math.random().toString(36).slice(2),st="__reactFiber$"+Xn,Ht="__reactProps$"+Xn,hn="__reactContainer$"+Xn,hs="__reactEvents$"+Xn,dn="__reactListeners$"+Xn,ri="__reactHandles$"+Xn,Us="__reactResources$"+Xn,Zn="__reactMarker$"+Xn;function $i(t){delete t[st],delete t[Ht],delete t[hs],delete t[dn],delete t[ri]}function ai(t){var n=t[st];if(n)return n;for(var a=t.parentNode;a;){if(n=a[hn]||a[st]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Ey(t);t!==null;){if(a=t[st])return a;t=Ey(t)}return n}t=a,a=t.parentNode}return null}function Ft(t){if(t=t[st]||t[hn]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Gt(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(s(33))}function _i(t){var n=t[Us];return n||(n=t[Us]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function St(t){t[Zn]=!0}var Xi=new Set,Ps={};function Mt(t,n){oi(t,n),oi(t+"Capture",n)}function oi(t,n){for(Ps[t]=n,t=0;t<n.length;t++)Xi.add(n[t])}var At=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zi={},Jn={};function Ji(t){return Vt.call(Jn,t)?!0:Vt.call(Zi,t)?!1:At.test(t)?Jn[t]=!0:(Zi[t]=!0,!1)}function Ei(t,n,a){if(Ji(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Wn(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Yt(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function sn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ds(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function pa(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return f.call(this)},set:function(b){a=""+b,d.call(this,b)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(b){a=""+b},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function lt(t){if(!t._valueTracker){var n=ds(t)?"checked":"value";t._valueTracker=pa(t,n,""+t[n])}}function ms(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=ds(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function Ii(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zs=/[\n"\\]/g;function Pn(t){return t.replace(zs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function gs(t,n,a,l,f,d,b,_){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),n!=null?b==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+sn(n)):t.value!==""+sn(n)&&(t.value=""+sn(n)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),n!=null?ya(t,b,sn(n)):a!=null?ya(t,b,sn(a)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+sn(_):t.removeAttribute("name")}function Wa(t,n,a,l,f,d,b,_){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null)){lt(t);return}a=a!=null?""+sn(a):"",n=n!=null?""+sn(n):a,_||n===t.value||(t.value=n),t.defaultValue=n}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=_?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),lt(t)}function ya(t,n,a){n==="number"&&Ii(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function le(t,n,a,l){if(t=t.options,n){n={};for(var f=0;f<a.length;f++)n["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=n.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+sn(a),n=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}n!==null||t[f].disabled||(n=t[f])}n!==null&&(n.selected=!0)}}function Wi(t,n,a){if(n!=null&&(n=""+sn(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+sn(a):""}function bn(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(s(92));if(nt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=sn(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),lt(t)}function Sn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var eo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xa(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||eo.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function ba(t,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in n)l=n[f],n.hasOwnProperty(f)&&a[f]!==l&&xa(t,f,l)}else for(var d in n)n.hasOwnProperty(d)&&xa(t,d,n[d])}function Tr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ps=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bs(t){return ps.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function li(){}var qs=null;function ei(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ys=null,Ut=null;function xs(t){var n=Ft(t);if(n&&(t=n.stateNode)){var a=t[Ht]||null;e:switch(t=n.stateNode,n.type){case"input":if(gs(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var f=l[Ht]||null;if(!f)throw Error(s(90));gs(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&ms(l)}break e;case"textarea":Wi(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&le(t,!!a.multiple,n,!1)}}}var Hs=!1;function es(t,n,a){if(Hs)return t(n,a);Hs=!0;try{var l=t(n);return l}finally{if(Hs=!1,(ys!==null||Ut!==null)&&(xu(),ys&&(n=ys,t=Ut,Ut=ys=null,xs(n),t)))for(n=0;n<t.length;n++)xs(t[n])}}function S(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Ht]||null;if(l===null)return null;a=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var P=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$=!1;if(P)try{var re={};Object.defineProperty(re,"passive",{get:function(){$=!0}}),window.addEventListener("test",re,re),window.removeEventListener("test",re,re)}catch{$=!1}var ue=null,ae=null,se=null;function ge(){if(se)return se;var t,n=ae,a=n.length,l,f="value"in ue?ue.value:ue.textContent,d=f.length;for(t=0;t<a&&n[t]===f[t];t++);var b=a-t;for(l=1;l<=b&&n[a-l]===f[d-l];l++);return se=f.slice(t,1<l?1-l:void 0)}function Ee(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function we(){return!0}function ye(){return!1}function he(t){function n(a,l,f,d,b){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=b,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(a=t[_],this[_]=a?a(d):d[_]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?we:ye,this.isPropagationStopped=ye,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=we)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=we)},persist:function(){},isPersistent:we}),n}var dt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rt=he(dt),Pt=w({},dt,{view:0,detail:0}),Qt=he(Pt),Ot,vt,Nt,mn=w({},Pt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nt&&(Nt&&t.type==="mousemove"?(Ot=t.screenX-Nt.screenX,vt=t.screenY-Nt.screenY):vt=Ot=0,Nt=t),Ot)},movementY:function(t){return"movementY"in t?t.movementY:vt}}),ci=he(mn),zn=w({},mn,{dataTransfer:0}),Bn=he(zn),va=w({},Pt,{relatedTarget:0}),ui=he(va),_a=w({},dt,{animationName:0,elapsedTime:0,pseudoElement:0}),bs=he(_a),to=w({},dt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cc=he(to),Ic=w({},dt,{data:0}),vs=he(Ic),Dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kc(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Oc[t])?!!n[t]:!1}function wr(){return kc}var ti=w({},Pt,{key:function(t){if(t.key){var n=Dc[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Ee(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(t){return t.type==="keypress"?Ee(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ee(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jc=he(ti),Vc=w({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fs=he(Vc),u=w({},Pt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr}),g=he(u),v=w({},dt,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=he(v),z=w({},mn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G=he(z),fe=w({},dt,{newState:0,oldState:0}),Pe=he(fe),Jt=[9,13,27,32],ct=P&&"CompositionEvent"in window,kt=null;P&&"documentMode"in document&&(kt=document.documentMode);var Di=P&&"TextEvent"in window&&!kt,_s=P&&(!ct||kt&&8<kt&&11>=kt),ts=" ",ns=!1;function Ea(t,n){switch(t){case"keyup":return Jt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var io=!1;function __(t,n){switch(t){case"compositionend":return no(n);case"keypress":return n.which!==32?null:(ns=!0,ts);case"textInput":return t=n.data,t===ts&&ns?null:t;default:return null}}function E_(t,n){if(io)return t==="compositionend"||!ct&&Ea(t,n)?(t=ge(),se=ae=ue=null,io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return _s&&n.locale!=="ko"?null:n.data;default:return null}}var T_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S0(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!T_[t.type]:n==="textarea"}function A0(t,n,a,l){ys?Ut?Ut.push(l):Ut=[l]:ys=l,n=Su(n,"onChange"),0<n.length&&(a=new rt("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var al=null,ol=null;function w_(t){ly(t,0)}function Lc(t){var n=Gt(t);if(ms(n))return t}function N0(t,n){if(t==="change")return n}var R0=!1;if(P){var Yf;if(P){var Qf="oninput"in document;if(!Qf){var C0=document.createElement("div");C0.setAttribute("oninput","return;"),Qf=typeof C0.oninput=="function"}Yf=Qf}else Yf=!1;R0=Yf&&(!document.documentMode||9<document.documentMode)}function I0(){al&&(al.detachEvent("onpropertychange",D0),ol=al=null)}function D0(t){if(t.propertyName==="value"&&Lc(ol)){var n=[];A0(n,ol,t,ei(t)),es(w_,n)}}function S_(t,n,a){t==="focusin"?(I0(),al=n,ol=a,al.attachEvent("onpropertychange",D0)):t==="focusout"&&I0()}function A_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lc(ol)}function N_(t,n){if(t==="click")return Lc(n)}function R_(t,n){if(t==="input"||t==="change")return Lc(n)}function C_(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ti=typeof Object.is=="function"?Object.is:C_;function ll(t,n){if(Ti(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Vt.call(n,f)||!Ti(t[f],n[f]))return!1}return!0}function M0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function O0(t,n){var a=M0(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=M0(a)}}function k0(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?k0(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function j0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ii(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Ii(t.document)}return n}function Kf(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var I_=P&&"documentMode"in document&&11>=document.documentMode,so=null,$f=null,cl=null,Xf=!1;function V0(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Xf||so==null||so!==Ii(l)||(l=so,"selectionStart"in l&&Kf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cl&&ll(cl,l)||(cl=l,l=Su($f,"onSelect"),0<l.length&&(n=new rt("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=so)))}function Ta(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var ro={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},Zf={},L0={};P&&(L0=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function wa(t){if(Zf[t])return Zf[t];if(!ro[t])return t;var n=ro[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in L0)return Zf[t]=n[a];return t}var U0=wa("animationend"),P0=wa("animationiteration"),z0=wa("animationstart"),D_=wa("transitionrun"),M_=wa("transitionstart"),O_=wa("transitioncancel"),B0=wa("transitionend"),q0=new Map,Jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jf.push("scrollEnd");function is(t,n){q0.set(t,n),Mt(n,[t])}var Uc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Mi=[],ao=0,Wf=0;function Pc(){for(var t=ao,n=Wf=ao=0;n<t;){var a=Mi[n];Mi[n++]=null;var l=Mi[n];Mi[n++]=null;var f=Mi[n];Mi[n++]=null;var d=Mi[n];if(Mi[n++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}d!==0&&H0(a,f,d)}}function zc(t,n,a,l){Mi[ao++]=t,Mi[ao++]=n,Mi[ao++]=a,Mi[ao++]=l,Wf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function eh(t,n,a,l){return zc(t,n,a,l),Bc(t)}function Sa(t,n){return zc(t,null,null,n),Bc(t)}function H0(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&n!==null&&(f=31-wt(a),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[n]:l.push(n),n.lane=a|536870912),d):null}function Bc(t){if(50<Dl)throw Dl=0,cd=null,Error(s(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var oo={};function k_(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(t,n,a,l){return new k_(t,n,a,l)}function th(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gs(t,n){var a=t.alternate;return a===null?(a=wi(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function F0(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function qc(t,n,a,l,f,d){var b=0;if(l=t,typeof t=="function")th(t)&&(b=1);else if(typeof t=="string")b=P2(t,a,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=wi(31,a,n,f),t.elementType=A,t.lanes=d,t;case X:return Aa(a.children,f,d,n);case oe:b=8,f|=24;break;case me:return t=wi(12,a,n,f|2),t.elementType=me,t.lanes=d,t;case Ae:return t=wi(13,a,n,f),t.elementType=Ae,t.lanes=d,t;case Ue:return t=wi(19,a,n,f),t.elementType=Ue,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xe:b=10;break e;case Ne:b=9;break e;case Fe:b=11;break e;case D:b=14;break e;case R:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return n=wi(b,a,n,f),n.elementType=t,n.type=l,n.lanes=d,n}function Aa(t,n,a,l){return t=wi(7,t,l,n),t.lanes=a,t}function nh(t,n,a){return t=wi(6,t,null,n),t.lanes=a,t}function G0(t){var n=wi(18,null,null,0);return n.stateNode=t,n}function ih(t,n,a){return n=wi(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Y0=new WeakMap;function Oi(t,n){if(typeof t=="object"&&t!==null){var a=Y0.get(t);return a!==void 0?a:(n={value:t,source:n,stack:xi(n)},Y0.set(t,n),n)}return{value:t,source:n,stack:xi(n)}}var lo=[],co=0,Hc=null,ul=0,ki=[],ji=0,Sr=null,Es=1,Ts="";function Ys(t,n){lo[co++]=ul,lo[co++]=Hc,Hc=t,ul=n}function Q0(t,n,a){ki[ji++]=Es,ki[ji++]=Ts,ki[ji++]=Sr,Sr=t;var l=Es;t=Ts;var f=32-wt(l)-1;l&=~(1<<f),a+=1;var d=32-wt(n)+f;if(30<d){var b=f-f%5;d=(l&(1<<b)-1).toString(32),l>>=b,f-=b,Es=1<<32-wt(n)+f|a<<f|l,Ts=d+t}else Es=1<<d|a<<f|l,Ts=t}function sh(t){t.return!==null&&(Ys(t,1),Q0(t,1,0))}function rh(t){for(;t===Hc;)Hc=lo[--co],lo[co]=null,ul=lo[--co],lo[co]=null;for(;t===Sr;)Sr=ki[--ji],ki[ji]=null,Ts=ki[--ji],ki[ji]=null,Es=ki[--ji],ki[ji]=null}function K0(t,n){ki[ji++]=Es,ki[ji++]=Ts,ki[ji++]=Sr,Es=n.id,Ts=n.overflow,Sr=t}var An=null,Rt=null,et=!1,Ar=null,Vi=!1,ah=Error(s(519));function Nr(t){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(Oi(n,t)),ah}function $0(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[st]=t,n[Ht]=l,a){case"dialog":Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":case"embed":Ke("load",n);break;case"video":case"audio":for(a=0;a<Ol.length;a++)Ke(Ol[a],n);break;case"source":Ke("error",n);break;case"img":case"image":case"link":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"input":Ke("invalid",n),Wa(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ke("invalid",n);break;case"textarea":Ke("invalid",n),bn(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||hy(n.textContent,a)?(l.popover!=null&&(Ke("beforetoggle",n),Ke("toggle",n)),l.onScroll!=null&&Ke("scroll",n),l.onScrollEnd!=null&&Ke("scrollend",n),l.onClick!=null&&(n.onclick=li),n=!0):n=!1,n||Nr(t,!0)}function X0(t){for(An=t.return;An;)switch(An.tag){case 5:case 31:case 13:Vi=!1;return;case 27:case 3:Vi=!0;return;default:An=An.return}}function uo(t){if(t!==An)return!1;if(!et)return X0(t),et=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||wd(t.type,t.memoizedProps)),a=!a),a&&Rt&&Nr(t),X0(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Rt=_y(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Rt=_y(t)}else n===27?(n=Rt,Br(t.type)?(t=Cd,Cd=null,Rt=t):Rt=n):Rt=An?Ui(t.stateNode.nextSibling):null;return!0}function Na(){Rt=An=null,et=!1}function oh(){var t=Ar;return t!==null&&(mi===null?mi=t:mi.push.apply(mi,t),Ar=null),t}function fl(t){Ar===null?Ar=[t]:Ar.push(t)}var lh=j(null),Ra=null,Qs=null;function Rr(t,n,a){de(lh,n._currentValue),n._currentValue=a}function Ks(t){t._currentValue=lh.current,Z(lh)}function ch(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function uh(t,n,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var b=f.child;d=d.firstContext;e:for(;d!==null;){var _=d;d=f;for(var I=0;I<n.length;I++)if(_.context===n[I]){d.lanes|=a,_=d.alternate,_!==null&&(_.lanes|=a),ch(d.return,a,t),l||(b=null);break e}d=_.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(s(341));b.lanes|=a,d=b.alternate,d!==null&&(d.lanes|=a),ch(b,a,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function fo(t,n,a,l){t=null;for(var f=n,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var _=f.type;Ti(f.pendingProps.value,b.value)||(t!==null?t.push(_):t=[_])}}else if(f===Ge.current){if(b=f.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Ul):t=[Ul])}f=f.return}t!==null&&uh(n,t,a,l),n.flags|=262144}function Fc(t){for(t=t.firstContext;t!==null;){if(!Ti(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ca(t){Ra=t,Qs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Nn(t){return Z0(Ra,t)}function Gc(t,n){return Ra===null&&Ca(t),Z0(t,n)}function Z0(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Qs===null){if(t===null)throw Error(s(308));Qs=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Qs=Qs.next=n;return a}var j_=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},V_=r.unstable_scheduleCallback,L_=r.unstable_NormalPriority,rn={$$typeof:xe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fh(){return{controller:new j_,data:new Map,refCount:0}}function hl(t){t.refCount--,t.refCount===0&&V_(L_,function(){t.controller.abort()})}var dl=null,hh=0,ho=0,mo=null;function U_(t,n){if(dl===null){var a=dl=[];hh=0,ho=gd(),mo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return hh++,n.then(J0,J0),n}function J0(){if(--hh===0&&dl!==null){mo!==null&&(mo.status="fulfilled");var t=dl;dl=null,ho=0,mo=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function P_(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var f=0;f<a.length;f++)(0,a[f])(n)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var W0=Y.S;Y.S=function(t,n){Vp=fn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&U_(t,n),W0!==null&&W0(t,n)};var Ia=j(null);function dh(){var t=Ia.current;return t!==null?t:_t.pooledCache}function Yc(t,n){n===null?de(Ia,Ia.current):de(Ia,n.pool)}function eg(){var t=dh();return t===null?null:{parent:rn._currentValue,pool:t}}var go=Error(s(460)),mh=Error(s(474)),Qc=Error(s(542)),Kc={then:function(){}};function tg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ng(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(li,li),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,sg(t),t;default:if(typeof n.status=="string")n.then(li,li);else{if(t=_t,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=l}},function(l){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,sg(t),t}throw Ma=n,go}}function Da(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ma=a,go):a}}var Ma=null;function ig(){if(Ma===null)throw Error(s(459));var t=Ma;return Ma=null,t}function sg(t){if(t===go||t===Qc)throw Error(s(483))}var po=null,ml=0;function $c(t){var n=ml;return ml+=1,po===null&&(po=[]),ng(po,t,n)}function gl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Xc(t,n){throw n.$$typeof===C?Error(s(525)):(t=Object.prototype.toString.call(n),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function rg(t){function n(L,k){if(t){var q=L.deletions;q===null?(L.deletions=[k],L.flags|=16):q.push(k)}}function a(L,k){if(!t)return null;for(;k!==null;)n(L,k),k=k.sibling;return null}function l(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function f(L,k){return L=Gs(L,k),L.index=0,L.sibling=null,L}function d(L,k,q){return L.index=q,t?(q=L.alternate,q!==null?(q=q.index,q<k?(L.flags|=67108866,k):q):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function b(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function _(L,k,q,J){return k===null||k.tag!==6?(k=nh(q,L.mode,J),k.return=L,k):(k=f(k,q),k.return=L,k)}function I(L,k,q,J){var Se=q.type;return Se===X?K(L,k,q.props.children,J,q.key):k!==null&&(k.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&Da(Se)===k.type)?(k=f(k,q.props),gl(k,q),k.return=L,k):(k=qc(q.type,q.key,q.props,null,L.mode,J),gl(k,q),k.return=L,k)}function H(L,k,q,J){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=ih(q,L.mode,J),k.return=L,k):(k=f(k,q.children||[]),k.return=L,k)}function K(L,k,q,J,Se){return k===null||k.tag!==7?(k=Aa(q,L.mode,J,Se),k.return=L,k):(k=f(k,q),k.return=L,k)}function ee(L,k,q){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=nh(""+k,L.mode,q),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case U:return q=qc(k.type,k.key,k.props,null,L.mode,q),gl(q,k),q.return=L,q;case W:return k=ih(k,L.mode,q),k.return=L,k;case R:return k=Da(k),ee(L,k,q)}if(nt(k)||V(k))return k=Aa(k,L.mode,q,null),k.return=L,k;if(typeof k.then=="function")return ee(L,$c(k),q);if(k.$$typeof===xe)return ee(L,Gc(L,k),q);Xc(L,k)}return null}function F(L,k,q,J){var Se=k!==null?k.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Se!==null?null:_(L,k,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case U:return q.key===Se?I(L,k,q,J):null;case W:return q.key===Se?H(L,k,q,J):null;case R:return q=Da(q),F(L,k,q,J)}if(nt(q)||V(q))return Se!==null?null:K(L,k,q,J,null);if(typeof q.then=="function")return F(L,k,$c(q),J);if(q.$$typeof===xe)return F(L,k,Gc(L,q),J);Xc(L,q)}return null}function Q(L,k,q,J,Se){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return L=L.get(q)||null,_(k,L,""+J,Se);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case U:return L=L.get(J.key===null?q:J.key)||null,I(k,L,J,Se);case W:return L=L.get(J.key===null?q:J.key)||null,H(k,L,J,Se);case R:return J=Da(J),Q(L,k,q,J,Se)}if(nt(J)||V(J))return L=L.get(q)||null,K(k,L,J,Se,null);if(typeof J.then=="function")return Q(L,k,q,$c(J),Se);if(J.$$typeof===xe)return Q(L,k,q,Gc(k,J),Se);Xc(k,J)}return null}function ve(L,k,q,J){for(var Se=null,at=null,_e=k,He=k=0,Xe=null;_e!==null&&He<q.length;He++){_e.index>He?(Xe=_e,_e=null):Xe=_e.sibling;var ot=F(L,_e,q[He],J);if(ot===null){_e===null&&(_e=Xe);break}t&&_e&&ot.alternate===null&&n(L,_e),k=d(ot,k,He),at===null?Se=ot:at.sibling=ot,at=ot,_e=Xe}if(He===q.length)return a(L,_e),et&&Ys(L,He),Se;if(_e===null){for(;He<q.length;He++)_e=ee(L,q[He],J),_e!==null&&(k=d(_e,k,He),at===null?Se=_e:at.sibling=_e,at=_e);return et&&Ys(L,He),Se}for(_e=l(_e);He<q.length;He++)Xe=Q(_e,L,He,q[He],J),Xe!==null&&(t&&Xe.alternate!==null&&_e.delete(Xe.key===null?He:Xe.key),k=d(Xe,k,He),at===null?Se=Xe:at.sibling=Xe,at=Xe);return t&&_e.forEach(function(Yr){return n(L,Yr)}),et&&Ys(L,He),Se}function Ce(L,k,q,J){if(q==null)throw Error(s(151));for(var Se=null,at=null,_e=k,He=k=0,Xe=null,ot=q.next();_e!==null&&!ot.done;He++,ot=q.next()){_e.index>He?(Xe=_e,_e=null):Xe=_e.sibling;var Yr=F(L,_e,ot.value,J);if(Yr===null){_e===null&&(_e=Xe);break}t&&_e&&Yr.alternate===null&&n(L,_e),k=d(Yr,k,He),at===null?Se=Yr:at.sibling=Yr,at=Yr,_e=Xe}if(ot.done)return a(L,_e),et&&Ys(L,He),Se;if(_e===null){for(;!ot.done;He++,ot=q.next())ot=ee(L,ot.value,J),ot!==null&&(k=d(ot,k,He),at===null?Se=ot:at.sibling=ot,at=ot);return et&&Ys(L,He),Se}for(_e=l(_e);!ot.done;He++,ot=q.next())ot=Q(_e,L,He,ot.value,J),ot!==null&&(t&&ot.alternate!==null&&_e.delete(ot.key===null?He:ot.key),k=d(ot,k,He),at===null?Se=ot:at.sibling=ot,at=ot);return t&&_e.forEach(function(X2){return n(L,X2)}),et&&Ys(L,He),Se}function bt(L,k,q,J){if(typeof q=="object"&&q!==null&&q.type===X&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case U:e:{for(var Se=q.key;k!==null;){if(k.key===Se){if(Se=q.type,Se===X){if(k.tag===7){a(L,k.sibling),J=f(k,q.props.children),J.return=L,L=J;break e}}else if(k.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&Da(Se)===k.type){a(L,k.sibling),J=f(k,q.props),gl(J,q),J.return=L,L=J;break e}a(L,k);break}else n(L,k);k=k.sibling}q.type===X?(J=Aa(q.props.children,L.mode,J,q.key),J.return=L,L=J):(J=qc(q.type,q.key,q.props,null,L.mode,J),gl(J,q),J.return=L,L=J)}return b(L);case W:e:{for(Se=q.key;k!==null;){if(k.key===Se)if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){a(L,k.sibling),J=f(k,q.children||[]),J.return=L,L=J;break e}else{a(L,k);break}else n(L,k);k=k.sibling}J=ih(q,L.mode,J),J.return=L,L=J}return b(L);case R:return q=Da(q),bt(L,k,q,J)}if(nt(q))return ve(L,k,q,J);if(V(q)){if(Se=V(q),typeof Se!="function")throw Error(s(150));return q=Se.call(q),Ce(L,k,q,J)}if(typeof q.then=="function")return bt(L,k,$c(q),J);if(q.$$typeof===xe)return bt(L,k,Gc(L,q),J);Xc(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,k!==null&&k.tag===6?(a(L,k.sibling),J=f(k,q),J.return=L,L=J):(a(L,k),J=nh(q,L.mode,J),J.return=L,L=J),b(L)):a(L,k)}return function(L,k,q,J){try{ml=0;var Se=bt(L,k,q,J);return po=null,Se}catch(_e){if(_e===go||_e===Qc)throw _e;var at=wi(29,_e,null,L.mode);return at.lanes=J,at.return=L,at}finally{}}}var Oa=rg(!0),ag=rg(!1),Cr=!1;function gh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ph(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ir(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Dr(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ut&2)!==0){var f=l.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),l.pending=n,n=Bc(t),H0(t,null,a),n}return zc(t,l,n,a),Bc(t)}function pl(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,fs(t,a)}}function yh(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=b:d=d.next=b,a=a.next}while(a!==null);d===null?f=d=n:d=d.next=n}else f=d=n;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var xh=!1;function yl(){if(xh){var t=mo;if(t!==null)throw t}}function xl(t,n,a,l){xh=!1;var f=t.updateQueue;Cr=!1;var d=f.firstBaseUpdate,b=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var I=_,H=I.next;I.next=null,b===null?d=H:b.next=H,b=I;var K=t.alternate;K!==null&&(K=K.updateQueue,_=K.lastBaseUpdate,_!==b&&(_===null?K.firstBaseUpdate=H:_.next=H,K.lastBaseUpdate=I))}if(d!==null){var ee=f.baseState;b=0,K=H=I=null,_=d;do{var F=_.lane&-536870913,Q=F!==_.lane;if(Q?($e&F)===F:(l&F)===F){F!==0&&F===ho&&(xh=!0),K!==null&&(K=K.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var ve=t,Ce=_;F=n;var bt=a;switch(Ce.tag){case 1:if(ve=Ce.payload,typeof ve=="function"){ee=ve.call(bt,ee,F);break e}ee=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ce.payload,F=typeof ve=="function"?ve.call(bt,ee,F):ve,F==null)break e;ee=w({},ee,F);break e;case 2:Cr=!0}}F=_.callback,F!==null&&(t.flags|=64,Q&&(t.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[F]:Q.push(F))}else Q={lane:F,tag:_.tag,payload:_.payload,callback:_.callback,next:null},K===null?(H=K=Q,I=ee):K=K.next=Q,b|=F;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;Q=_,_=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);K===null&&(I=ee),f.baseState=I,f.firstBaseUpdate=H,f.lastBaseUpdate=K,d===null&&(f.shared.lanes=0),Vr|=b,t.lanes=b,t.memoizedState=ee}}function og(t,n){if(typeof t!="function")throw Error(s(191,t));t.call(n)}function lg(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)og(a[t],n)}var yo=j(null),Zc=j(0);function cg(t,n){t=ir,de(Zc,t),de(yo,n),ir=t|n.baseLanes}function bh(){de(Zc,ir),de(yo,yo.current)}function vh(){ir=Zc.current,Z(yo),Z(Zc)}var Si=j(null),Li=null;function Mr(t){var n=t.alternate;de(Wt,Wt.current&1),de(Si,t),Li===null&&(n===null||yo.current!==null||n.memoizedState!==null)&&(Li=t)}function _h(t){de(Wt,Wt.current),de(Si,t),Li===null&&(Li=t)}function ug(t){t.tag===22?(de(Wt,Wt.current),de(Si,t),Li===null&&(Li=t)):Or()}function Or(){de(Wt,Wt.current),de(Si,Si.current)}function Ai(t){Z(Si),Li===t&&(Li=null),Z(Wt)}var Wt=j(0);function Jc(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Nd(a)||Rd(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var $s=0,ze=null,yt=null,an=null,Wc=!1,xo=!1,ka=!1,eu=0,bl=0,bo=null,z_=0;function Kt(){throw Error(s(321))}function Eh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!Ti(t[a],n[a]))return!1;return!0}function Th(t,n,a,l,f,d){return $s=d,ze=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Y.H=t===null||t.memoizedState===null?Qg:Uh,ka=!1,d=a(l,f),ka=!1,xo&&(d=hg(n,a,l,f)),fg(t),d}function fg(t){Y.H=El;var n=yt!==null&&yt.next!==null;if($s=0,an=yt=ze=null,Wc=!1,bl=0,bo=null,n)throw Error(s(300));t===null||on||(t=t.dependencies,t!==null&&Fc(t)&&(on=!0))}function hg(t,n,a,l){ze=t;var f=0;do{if(xo&&(bo=null),bl=0,xo=!1,25<=f)throw Error(s(301));if(f+=1,an=yt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=Kg,d=n(a,l)}while(xo);return d}function B_(){var t=Y.H,n=t.useState()[0];return n=typeof n.then=="function"?vl(n):n,t=t.useState()[0],(yt!==null?yt.memoizedState:null)!==t&&(ze.flags|=1024),n}function wh(){var t=eu!==0;return eu=0,t}function Sh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function Ah(t){if(Wc){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Wc=!1}$s=0,an=yt=ze=null,xo=!1,bl=eu=0,bo=null}function ni(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?ze.memoizedState=an=t:an=an.next=t,an}function en(){if(yt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var n=an===null?ze.memoizedState:an.next;if(n!==null)an=n,yt=t;else{if(t===null)throw ze.alternate===null?Error(s(467)):Error(s(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},an===null?ze.memoizedState=an=t:an=an.next=t}return an}function tu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(t){var n=bl;return bl+=1,bo===null&&(bo=[]),t=ng(bo,t,n),n=ze,(an===null?n.memoizedState:an.next)===null&&(n=n.alternate,Y.H=n===null||n.memoizedState===null?Qg:Uh),t}function nu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vl(t);if(t.$$typeof===xe)return Nn(t)}throw Error(s(438,String(t)))}function Nh(t){var n=null,a=ze.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=tu(),ze.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=O;return n.index++,a}function Xs(t,n){return typeof n=="function"?n(t):n}function iu(t){var n=en();return Rh(n,yt,t)}function Rh(t,n,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var b=f.next;f.next=d.next,d.next=b}n.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{n=f.next;var _=b=null,I=null,H=n,K=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?($e&ee)===ee:($s&ee)===ee){var F=H.revertLane;if(F===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===ho&&(K=!0);else if(($s&F)===F){H=H.next,F===ho&&(K=!0);continue}else ee={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(_=I=ee,b=d):I=I.next=ee,ze.lanes|=F,Vr|=F;ee=H.action,ka&&a(d,ee),d=H.hasEagerState?H.eagerState:a(d,ee)}else F={lane:ee,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},I===null?(_=I=F,b=d):I=I.next=F,ze.lanes|=ee,Vr|=ee;H=H.next}while(H!==null&&H!==n);if(I===null?b=d:I.next=_,!Ti(d,t.memoizedState)&&(on=!0,K&&(a=mo,a!==null)))throw a;t.memoizedState=d,t.baseState=b,t.baseQueue=I,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ch(t){var n=en(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,d=n.memoizedState;if(f!==null){a.pending=null;var b=f=f.next;do d=t(d,b.action),b=b.next;while(b!==f);Ti(d,n.memoizedState)||(on=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,l]}function dg(t,n,a){var l=ze,f=en(),d=et;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=n();var b=!Ti((yt||f).memoizedState,a);if(b&&(f.memoizedState=a,on=!0),f=f.queue,Mh(pg.bind(null,l,f,t),[t]),f.getSnapshot!==n||b||an!==null&&an.memoizedState.tag&1){if(l.flags|=2048,vo(9,{destroy:void 0},gg.bind(null,l,f,a,n),null),_t===null)throw Error(s(349));d||($s&127)!==0||mg(l,n,a)}return a}function mg(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=ze.updateQueue,n===null?(n=tu(),ze.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function gg(t,n,a,l){n.value=a,n.getSnapshot=l,yg(n)&&xg(t)}function pg(t,n,a){return a(function(){yg(n)&&xg(t)})}function yg(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!Ti(t,a)}catch{return!0}}function xg(t){var n=Sa(t,2);n!==null&&gi(n,t,2)}function Ih(t){var n=ni();if(typeof t=="function"){var a=t;if(t=a(),ka){jn(!0);try{a()}finally{jn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:t},n}function bg(t,n,a,l){return t.baseState=a,Rh(t,yt,typeof l=="function"?l:Xs)}function q_(t,n,a,l,f){if(au(t))throw Error(s(485));if(t=n.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){d.listeners.push(b)}};Y.T!==null?a(!0):d.isTransition=!1,l(d),a=n.pending,a===null?(d.next=n.pending=d,vg(n,d)):(d.next=a.next,n.pending=a.next=d)}}function vg(t,n){var a=n.action,l=n.payload,f=t.state;if(n.isTransition){var d=Y.T,b={};Y.T=b;try{var _=a(f,l),I=Y.S;I!==null&&I(b,_),_g(t,n,_)}catch(H){Dh(t,n,H)}finally{d!==null&&b.types!==null&&(d.types=b.types),Y.T=d}}else try{d=a(f,l),_g(t,n,d)}catch(H){Dh(t,n,H)}}function _g(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Eg(t,n,l)},function(l){return Dh(t,n,l)}):Eg(t,n,a)}function Eg(t,n,a){n.status="fulfilled",n.value=a,Tg(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,vg(t,a)))}function Dh(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Tg(n),n=n.next;while(n!==l)}t.action=null}function Tg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function wg(t,n){return n}function Sg(t,n){if(et){var a=_t.formState;if(a!==null){e:{var l=ze;if(et){if(Rt){t:{for(var f=Rt,d=Vi;f.nodeType!==8;){if(!d){f=null;break t}if(f=Ui(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Rt=Ui(f.nextSibling),l=f.data==="F!";break e}}Nr(l)}l=!1}l&&(n=a[0])}}return a=ni(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wg,lastRenderedState:n},a.queue=l,a=Fg.bind(null,ze,l),l.dispatch=a,l=Ih(!1),d=Lh.bind(null,ze,!1,l.queue),l=ni(),f={state:n,dispatch:null,action:t,pending:null},l.queue=f,a=q_.bind(null,ze,f,d,a),f.dispatch=a,l.memoizedState=t,[n,a,!1]}function Ag(t){var n=en();return Ng(n,yt,t)}function Ng(t,n,a){if(n=Rh(t,n,wg)[0],t=iu(Xs)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=vl(n)}catch(b){throw b===go?Qc:b}else l=n;n=en();var f=n.queue,d=f.dispatch;return a!==n.memoizedState&&(ze.flags|=2048,vo(9,{destroy:void 0},H_.bind(null,f,a),null)),[l,d,t]}function H_(t,n){t.action=n}function Rg(t){var n=en(),a=yt;if(a!==null)return Ng(n,a,t);en(),n=n.memoizedState,a=en();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function vo(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=ze.updateQueue,n===null&&(n=tu(),ze.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function Cg(){return en().memoizedState}function su(t,n,a,l){var f=ni();ze.flags|=t,f.memoizedState=vo(1|n,{destroy:void 0},a,l===void 0?null:l)}function ru(t,n,a,l){var f=en();l=l===void 0?null:l;var d=f.memoizedState.inst;yt!==null&&l!==null&&Eh(l,yt.memoizedState.deps)?f.memoizedState=vo(n,d,a,l):(ze.flags|=t,f.memoizedState=vo(1|n,d,a,l))}function Ig(t,n){su(8390656,8,t,n)}function Mh(t,n){ru(2048,8,t,n)}function F_(t){ze.flags|=4;var n=ze.updateQueue;if(n===null)n=tu(),ze.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Dg(t){var n=en().memoizedState;return F_({ref:n,nextImpl:t}),function(){if((ut&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Mg(t,n){return ru(4,2,t,n)}function Og(t,n){return ru(4,4,t,n)}function kg(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function jg(t,n,a){a=a!=null?a.concat([t]):null,ru(4,4,kg.bind(null,n,t),a)}function Oh(){}function Vg(t,n){var a=en();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&Eh(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function Lg(t,n){var a=en();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&Eh(n,l[1]))return l[0];if(l=t(),ka){jn(!0);try{t()}finally{jn(!1)}}return a.memoizedState=[l,n],l}function kh(t,n,a){return a===void 0||($s&1073741824)!==0&&($e&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=Up(),ze.lanes|=t,Vr|=t,a)}function Ug(t,n,a,l){return Ti(a,n)?a:yo.current!==null?(t=kh(t,a,l),Ti(t,n)||(on=!0),t):($s&42)===0||($s&1073741824)!==0&&($e&261930)===0?(on=!0,t.memoizedState=a):(t=Up(),ze.lanes|=t,Vr|=t,n)}function Pg(t,n,a,l,f){var d=B.p;B.p=d!==0&&8>d?d:8;var b=Y.T,_={};Y.T=_,Lh(t,!1,n,a);try{var I=f(),H=Y.S;if(H!==null&&H(_,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var K=P_(I,l);_l(t,n,K,Ci(t))}else _l(t,n,l,Ci(t))}catch(ee){_l(t,n,{then:function(){},status:"rejected",reason:ee},Ci())}finally{B.p=d,b!==null&&_.types!==null&&(b.types=_.types),Y.T=b}}function G_(){}function jh(t,n,a,l){if(t.tag!==5)throw Error(s(476));var f=zg(t).queue;Pg(t,f,n,ce,a===null?G_:function(){return Bg(t),a(l)})}function zg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:ce},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Bg(t){var n=zg(t);n.next===null&&(n=t.alternate.memoizedState),_l(t,n.next.queue,{},Ci())}function Vh(){return Nn(Ul)}function qg(){return en().memoizedState}function Hg(){return en().memoizedState}function Y_(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Ci();t=Ir(a);var l=Dr(n,t,a);l!==null&&(gi(l,n,a),pl(l,n,a)),n={cache:fh()},t.payload=n;return}n=n.return}}function Q_(t,n,a){var l=Ci();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},au(t)?Gg(n,a):(a=eh(t,n,a,l),a!==null&&(gi(a,t,l),Yg(a,n,l)))}function Fg(t,n,a){var l=Ci();_l(t,n,a,l)}function _l(t,n,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(au(t))Gg(n,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var b=n.lastRenderedState,_=d(b,a);if(f.hasEagerState=!0,f.eagerState=_,Ti(_,b))return zc(t,n,f,0),_t===null&&Pc(),!1}catch{}finally{}if(a=eh(t,n,f,l),a!==null)return gi(a,t,l),Yg(a,n,l),!0}return!1}function Lh(t,n,a,l){if(l={lane:2,revertLane:gd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},au(t)){if(n)throw Error(s(479))}else n=eh(t,a,l,2),n!==null&&gi(n,t,2)}function au(t){var n=t.alternate;return t===ze||n!==null&&n===ze}function Gg(t,n){xo=Wc=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function Yg(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,fs(t,a)}}var El={readContext:Nn,use:nu,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt};El.useEffectEvent=Kt;var Qg={readContext:Nn,use:nu,useCallback:function(t,n){return ni().memoizedState=[t,n===void 0?null:n],t},useContext:Nn,useEffect:Ig,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,su(4194308,4,kg.bind(null,n,t),a)},useLayoutEffect:function(t,n){return su(4194308,4,t,n)},useInsertionEffect:function(t,n){su(4,2,t,n)},useMemo:function(t,n){var a=ni();n=n===void 0?null:n;var l=t();if(ka){jn(!0);try{t()}finally{jn(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=ni();if(a!==void 0){var f=a(n);if(ka){jn(!0);try{a(n)}finally{jn(!1)}}}else f=n;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=Q_.bind(null,ze,t),[l.memoizedState,t]},useRef:function(t){var n=ni();return t={current:t},n.memoizedState=t},useState:function(t){t=Ih(t);var n=t.queue,a=Fg.bind(null,ze,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Oh,useDeferredValue:function(t,n){var a=ni();return kh(a,t,n)},useTransition:function(){var t=Ih(!1);return t=Pg.bind(null,ze,t.queue,!0,!1),ni().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=ze,f=ni();if(et){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),_t===null)throw Error(s(349));($e&127)!==0||mg(l,n,a)}f.memoizedState=a;var d={value:a,getSnapshot:n};return f.queue=d,Ig(pg.bind(null,l,d,t),[t]),l.flags|=2048,vo(9,{destroy:void 0},gg.bind(null,l,d,a,n),null),a},useId:function(){var t=ni(),n=_t.identifierPrefix;if(et){var a=Ts,l=Es;a=(l&~(1<<32-wt(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=eu++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=z_++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Vh,useFormState:Sg,useActionState:Sg,useOptimistic:function(t){var n=ni();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Lh.bind(null,ze,!0,a),a.dispatch=n,[t,n]},useMemoCache:Nh,useCacheRefresh:function(){return ni().memoizedState=Y_.bind(null,ze)},useEffectEvent:function(t){var n=ni(),a={impl:t};return n.memoizedState=a,function(){if((ut&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Uh={readContext:Nn,use:nu,useCallback:Vg,useContext:Nn,useEffect:Mh,useImperativeHandle:jg,useInsertionEffect:Mg,useLayoutEffect:Og,useMemo:Lg,useReducer:iu,useRef:Cg,useState:function(){return iu(Xs)},useDebugValue:Oh,useDeferredValue:function(t,n){var a=en();return Ug(a,yt.memoizedState,t,n)},useTransition:function(){var t=iu(Xs)[0],n=en().memoizedState;return[typeof t=="boolean"?t:vl(t),n]},useSyncExternalStore:dg,useId:qg,useHostTransitionStatus:Vh,useFormState:Ag,useActionState:Ag,useOptimistic:function(t,n){var a=en();return bg(a,yt,t,n)},useMemoCache:Nh,useCacheRefresh:Hg};Uh.useEffectEvent=Dg;var Kg={readContext:Nn,use:nu,useCallback:Vg,useContext:Nn,useEffect:Mh,useImperativeHandle:jg,useInsertionEffect:Mg,useLayoutEffect:Og,useMemo:Lg,useReducer:Ch,useRef:Cg,useState:function(){return Ch(Xs)},useDebugValue:Oh,useDeferredValue:function(t,n){var a=en();return yt===null?kh(a,t,n):Ug(a,yt.memoizedState,t,n)},useTransition:function(){var t=Ch(Xs)[0],n=en().memoizedState;return[typeof t=="boolean"?t:vl(t),n]},useSyncExternalStore:dg,useId:qg,useHostTransitionStatus:Vh,useFormState:Rg,useActionState:Rg,useOptimistic:function(t,n){var a=en();return yt!==null?bg(a,yt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Nh,useCacheRefresh:Hg};Kg.useEffectEvent=Dg;function Ph(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:w({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var zh={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=Ci(),f=Ir(l);f.payload=n,a!=null&&(f.callback=a),n=Dr(t,f,l),n!==null&&(gi(n,t,l),pl(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=Ci(),f=Ir(l);f.tag=1,f.payload=n,a!=null&&(f.callback=a),n=Dr(t,f,l),n!==null&&(gi(n,t,l),pl(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Ci(),l=Ir(a);l.tag=2,n!=null&&(l.callback=n),n=Dr(t,l,a),n!==null&&(gi(n,t,a),pl(n,t,a))}};function $g(t,n,a,l,f,d,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,b):n.prototype&&n.prototype.isPureReactComponent?!ll(a,l)||!ll(f,d):!0}function Xg(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&zh.enqueueReplaceState(n,n.state,null)}function ja(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=w({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function Zg(t){Uc(t)}function Jg(t){console.error(t)}function Wg(t){Uc(t)}function ou(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function ep(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Bh(t,n,a){return a=Ir(a),a.tag=3,a.payload={element:null},a.callback=function(){ou(t,n)},a}function tp(t){return t=Ir(t),t.tag=3,t}function np(t,n,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){ep(n,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){ep(n,a,l),typeof f!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function K_(t,n,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&fo(n,a,f,!0),a=Si.current,a!==null){switch(a.tag){case 31:case 13:return Li===null?bu():a.alternate===null&&$t===0&&($t=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Kc?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),hd(t,l,f)),!1;case 22:return a.flags|=65536,l===Kc?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),hd(t,l,f)),!1}throw Error(s(435,a.tag))}return hd(t,l,f),bu(),!1}if(et)return n=Si.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,l!==ah&&(t=Error(s(422),{cause:l}),fl(Oi(t,a)))):(l!==ah&&(n=Error(s(423),{cause:l}),fl(Oi(n,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Oi(l,a),f=Bh(t.stateNode,l,f),yh(t,f),$t!==4&&($t=2)),!1;var d=Error(s(520),{cause:l});if(d=Oi(d,a),Il===null?Il=[d]:Il.push(d),$t!==4&&($t=2),n===null)return!0;l=Oi(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Bh(a.stateNode,l,t),yh(a,t),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Lr===null||!Lr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=tp(f),np(f,t,a,l),yh(a,f),!1}a=a.return}while(a!==null);return!1}var qh=Error(s(461)),on=!1;function Rn(t,n,a,l){n.child=t===null?ag(n,null,a,l):Oa(n,t.child,a,l)}function ip(t,n,a,l,f){a=a.render;var d=n.ref;if("ref"in l){var b={};for(var _ in l)_!=="ref"&&(b[_]=l[_])}else b=l;return Ca(n),l=Th(t,n,a,b,d,f),_=wh(),t!==null&&!on?(Sh(t,n,f),Zs(t,n,f)):(et&&_&&sh(n),n.flags|=1,Rn(t,n,l,f),n.child)}function sp(t,n,a,l,f){if(t===null){var d=a.type;return typeof d=="function"&&!th(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,rp(t,n,d,l,f)):(t=qc(a.type,null,l,n,n.mode,f),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!Xh(t,f)){var b=d.memoizedProps;if(a=a.compare,a=a!==null?a:ll,a(b,l)&&t.ref===n.ref)return Zs(t,n,f)}return n.flags|=1,t=Gs(d,l),t.ref=n.ref,t.return=n,n.child=t}function rp(t,n,a,l,f){if(t!==null){var d=t.memoizedProps;if(ll(d,l)&&t.ref===n.ref)if(on=!1,n.pendingProps=l=d,Xh(t,f))(t.flags&131072)!==0&&(on=!0);else return n.lanes=t.lanes,Zs(t,n,f)}return Hh(t,n,a,l,f)}function ap(t,n,a,l){var f=l.children,d=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=n.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,n.child=null;return op(t,n,d,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yc(n,d!==null?d.cachePool:null),d!==null?cg(n,d):bh(),ug(n);else return l=n.lanes=536870912,op(t,n,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(Yc(n,d.cachePool),cg(n,d),Or(),n.memoizedState=null):(t!==null&&Yc(n,null),bh(),Or());return Rn(t,n,f,a),n.child}function Tl(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function op(t,n,a,l,f){var d=dh();return d=d===null?null:{parent:rn._currentValue,pool:d},n.memoizedState={baseLanes:a,cachePool:d},t!==null&&Yc(n,null),bh(),ug(n),t!==null&&fo(t,n,l,!0),n.childLanes=f,null}function lu(t,n){return n=uu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function lp(t,n,a){return Oa(n,t.child,null,a),t=lu(n,n.pendingProps),t.flags|=2,Ai(n),n.memoizedState=null,t}function $_(t,n,a){var l=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(et){if(l.mode==="hidden")return t=lu(n,l),n.lanes=536870912,Tl(null,t);if(_h(n),(t=Rt)?(t=vy(t,Vi),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Sr!==null?{id:Es,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},a=G0(t),a.return=n,n.child=a,An=n,Rt=null)):t=null,t===null)throw Nr(n);return n.lanes=536870912,null}return lu(n,l)}var d=t.memoizedState;if(d!==null){var b=d.dehydrated;if(_h(n),f)if(n.flags&256)n.flags&=-257,n=lp(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(s(558));else if(on||fo(t,n,a,!1),f=(a&t.childLanes)!==0,on||f){if(l=_t,l!==null&&(b=xn(l,a),b!==0&&b!==d.retryLane))throw d.retryLane=b,Sa(t,b),gi(l,t,b),qh;bu(),n=lp(t,n,a)}else t=d.treeContext,Rt=Ui(b.nextSibling),An=n,et=!0,Ar=null,Vi=!1,t!==null&&K0(n,t),n=lu(n,l),n.flags|=4096;return n}return t=Gs(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function cu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function Hh(t,n,a,l,f){return Ca(n),a=Th(t,n,a,l,void 0,f),l=wh(),t!==null&&!on?(Sh(t,n,f),Zs(t,n,f)):(et&&l&&sh(n),n.flags|=1,Rn(t,n,a,f),n.child)}function cp(t,n,a,l,f,d){return Ca(n),n.updateQueue=null,a=hg(n,l,a,f),fg(t),l=wh(),t!==null&&!on?(Sh(t,n,d),Zs(t,n,d)):(et&&l&&sh(n),n.flags|=1,Rn(t,n,a,d),n.child)}function up(t,n,a,l,f){if(Ca(n),n.stateNode===null){var d=oo,b=a.contextType;typeof b=="object"&&b!==null&&(d=Nn(b)),d=new a(l,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=zh,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=l,d.state=n.memoizedState,d.refs={},gh(n),b=a.contextType,d.context=typeof b=="object"&&b!==null?Nn(b):oo,d.state=n.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Ph(n,a,b,l),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(b=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),b!==d.state&&zh.enqueueReplaceState(d,d.state,null),xl(n,l,d,f),yl(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){d=n.stateNode;var _=n.memoizedProps,I=ja(a,_);d.props=I;var H=d.context,K=a.contextType;b=oo,typeof K=="object"&&K!==null&&(b=Nn(K));var ee=a.getDerivedStateFromProps;K=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_||H!==b)&&Xg(n,d,l,b),Cr=!1;var F=n.memoizedState;d.state=F,xl(n,l,d,f),yl(),H=n.memoizedState,_||F!==H||Cr?(typeof ee=="function"&&(Ph(n,a,ee,l),H=n.memoizedState),(I=Cr||$g(n,a,I,l,F,H,b))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=H),d.props=l,d.state=H,d.context=b,l=I):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{d=n.stateNode,ph(t,n),b=n.memoizedProps,K=ja(a,b),d.props=K,ee=n.pendingProps,F=d.context,H=a.contextType,I=oo,typeof H=="object"&&H!==null&&(I=Nn(H)),_=a.getDerivedStateFromProps,(H=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b!==ee||F!==I)&&Xg(n,d,l,I),Cr=!1,F=n.memoizedState,d.state=F,xl(n,l,d,f),yl();var Q=n.memoizedState;b!==ee||F!==Q||Cr||t!==null&&t.dependencies!==null&&Fc(t.dependencies)?(typeof _=="function"&&(Ph(n,a,_,l),Q=n.memoizedState),(K=Cr||$g(n,a,K,l,F,Q,I)||t!==null&&t.dependencies!==null&&Fc(t.dependencies))?(H||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,Q,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,Q,I)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Q),d.props=l,d.state=Q,d.context=I,l=K):(typeof d.componentDidUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),l=!1)}return d=l,cu(t,n),l=(n.flags&128)!==0,d||l?(d=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&l?(n.child=Oa(n,t.child,null,f),n.child=Oa(n,null,a,f)):Rn(t,n,a,f),n.memoizedState=d.state,t=n.child):t=Zs(t,n,f),t}function fp(t,n,a,l){return Na(),n.flags|=256,Rn(t,n,a,l),n.child}var Fh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gh(t){return{baseLanes:t,cachePool:eg()}}function Yh(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Ri),t}function hp(t,n,a){var l=n.pendingProps,f=!1,d=(n.flags&128)!==0,b;if((b=d)||(b=t!==null&&t.memoizedState===null?!1:(Wt.current&2)!==0),b&&(f=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,t===null){if(et){if(f?Mr(n):Or(),(t=Rt)?(t=vy(t,Vi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Sr!==null?{id:Es,overflow:Ts}:null,retryLane:536870912,hydrationErrors:null},a=G0(t),a.return=n,n.child=a,An=n,Rt=null)):t=null,t===null)throw Nr(n);return Rd(t)?n.lanes=32:n.lanes=536870912,null}var _=l.children;return l=l.fallback,f?(Or(),f=n.mode,_=uu({mode:"hidden",children:_},f),l=Aa(l,f,a,null),_.return=n,l.return=n,_.sibling=l,n.child=_,l=n.child,l.memoizedState=Gh(a),l.childLanes=Yh(t,b,a),n.memoizedState=Fh,Tl(null,l)):(Mr(n),Qh(n,_))}var I=t.memoizedState;if(I!==null&&(_=I.dehydrated,_!==null)){if(d)n.flags&256?(Mr(n),n.flags&=-257,n=Kh(t,n,a)):n.memoizedState!==null?(Or(),n.child=t.child,n.flags|=128,n=null):(Or(),_=l.fallback,f=n.mode,l=uu({mode:"visible",children:l.children},f),_=Aa(_,f,a,null),_.flags|=2,l.return=n,_.return=n,l.sibling=_,n.child=l,Oa(n,t.child,null,a),l=n.child,l.memoizedState=Gh(a),l.childLanes=Yh(t,b,a),n.memoizedState=Fh,n=Tl(null,l));else if(Mr(n),Rd(_)){if(b=_.nextSibling&&_.nextSibling.dataset,b)var H=b.dgst;b=H,l=Error(s(419)),l.stack="",l.digest=b,fl({value:l,source:null,stack:null}),n=Kh(t,n,a)}else if(on||fo(t,n,a,!1),b=(a&t.childLanes)!==0,on||b){if(b=_t,b!==null&&(l=xn(b,a),l!==0&&l!==I.retryLane))throw I.retryLane=l,Sa(t,l),gi(b,t,l),qh;Nd(_)||bu(),n=Kh(t,n,a)}else Nd(_)?(n.flags|=192,n.child=t.child,n=null):(t=I.treeContext,Rt=Ui(_.nextSibling),An=n,et=!0,Ar=null,Vi=!1,t!==null&&K0(n,t),n=Qh(n,l.children),n.flags|=4096);return n}return f?(Or(),_=l.fallback,f=n.mode,I=t.child,H=I.sibling,l=Gs(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,H!==null?_=Gs(H,_):(_=Aa(_,f,a,null),_.flags|=2),_.return=n,l.return=n,l.sibling=_,n.child=l,Tl(null,l),l=n.child,_=t.child.memoizedState,_===null?_=Gh(a):(f=_.cachePool,f!==null?(I=rn._currentValue,f=f.parent!==I?{parent:I,pool:I}:f):f=eg(),_={baseLanes:_.baseLanes|a,cachePool:f}),l.memoizedState=_,l.childLanes=Yh(t,b,a),n.memoizedState=Fh,Tl(t.child,l)):(Mr(n),a=t.child,t=a.sibling,a=Gs(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(b=n.deletions,b===null?(n.deletions=[t],n.flags|=16):b.push(t)),n.child=a,n.memoizedState=null,a)}function Qh(t,n){return n=uu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function uu(t,n){return t=wi(22,t,null,n),t.lanes=0,t}function Kh(t,n,a){return Oa(n,t.child,null,a),t=Qh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function dp(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),ch(t.return,n,a)}function $h(t,n,a,l,f,d){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=a,b.tailMode=f,b.treeForkCount=d)}function mp(t,n,a){var l=n.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var b=Wt.current,_=(b&2)!==0;if(_?(b=b&1|2,n.flags|=128):b&=1,de(Wt,b),Rn(t,n,l,a),l=et?ul:0,!_&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dp(t,a,n);else if(t.tag===19)dp(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=n.child,f=null;a!==null;)t=a.alternate,t!==null&&Jc(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=n.child,n.child=null):(f=a.sibling,a.sibling=null),$h(n,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=n.child,n.child=null;f!==null;){if(t=f.alternate,t!==null&&Jc(t)===null){n.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}$h(n,!0,a,null,d,l);break;case"together":$h(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Zs(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),Vr|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(fo(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(s(153));if(n.child!==null){for(t=n.child,a=Gs(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=Gs(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function Xh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Fc(t)))}function X_(t,n,a){switch(n.tag){case 3:Tt(n,n.stateNode.containerInfo),Rr(n,rn,t.memoizedState.cache),Na();break;case 27:case 5:Fi(n);break;case 4:Tt(n,n.stateNode.containerInfo);break;case 10:Rr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,_h(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Mr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?hp(t,n,a):(Mr(n),t=Zs(t,n,a),t!==null?t.sibling:null);Mr(n);break;case 19:var f=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(fo(t,n,a,!1),l=(a&n.childLanes)!==0),f){if(l)return mp(t,n,a);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),de(Wt,Wt.current),l)break;return null;case 22:return n.lanes=0,ap(t,n,a,n.pendingProps);case 24:Rr(n,rn,t.memoizedState.cache)}return Zs(t,n,a)}function gp(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)on=!0;else{if(!Xh(t,a)&&(n.flags&128)===0)return on=!1,X_(t,n,a);on=(t.flags&131072)!==0}else on=!1,et&&(n.flags&1048576)!==0&&Q0(n,ul,n.index);switch(n.lanes=0,n.tag){case 16:e:{var l=n.pendingProps;if(t=Da(n.elementType),n.type=t,typeof t=="function")th(t)?(l=ja(t,l),n.tag=1,n=up(null,n,t,l,a)):(n.tag=0,n=Hh(null,n,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===Fe){n.tag=11,n=ip(null,n,t,l,a);break e}else if(f===D){n.tag=14,n=sp(null,n,t,l,a);break e}}throw n=Be(t)||t,Error(s(306,n,""))}}return n;case 0:return Hh(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,f=ja(l,n.pendingProps),up(t,n,l,f,a);case 3:e:{if(Tt(n,n.stateNode.containerInfo),t===null)throw Error(s(387));l=n.pendingProps;var d=n.memoizedState;f=d.element,ph(t,n),xl(n,l,null,a);var b=n.memoizedState;if(l=b.cache,Rr(n,rn,l),l!==d.cache&&uh(n,[rn],a,!0),yl(),l=b.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=fp(t,n,l,a);break e}else if(l!==f){f=Oi(Error(s(424)),n),fl(f),n=fp(t,n,l,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Rt=Ui(t.firstChild),An=n,et=!0,Ar=null,Vi=!0,a=ag(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Na(),l===f){n=Zs(t,n,a);break e}Rn(t,n,l,a)}n=n.child}return n;case 26:return cu(t,n),t===null?(a=Ay(n.type,null,n.pendingProps,null))?n.memoizedState=a:et||(a=n.type,t=n.pendingProps,l=Au(Oe.current).createElement(a),l[st]=n,l[Ht]=t,Cn(l,a,t),St(l),n.stateNode=l):n.memoizedState=Ay(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Fi(n),t===null&&et&&(l=n.stateNode=Ty(n.type,n.pendingProps,Oe.current),An=n,Vi=!0,f=Rt,Br(n.type)?(Cd=f,Rt=Ui(l.firstChild)):Rt=f),Rn(t,n,n.pendingProps.children,a),cu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&et&&((f=l=Rt)&&(l=A2(l,n.type,n.pendingProps,Vi),l!==null?(n.stateNode=l,An=n,Rt=Ui(l.firstChild),Vi=!1,f=!0):f=!1),f||Nr(n)),Fi(n),f=n.type,d=n.pendingProps,b=t!==null?t.memoizedProps:null,l=d.children,wd(f,d)?l=null:b!==null&&wd(f,b)&&(n.flags|=32),n.memoizedState!==null&&(f=Th(t,n,B_,null,null,a),Ul._currentValue=f),cu(t,n),Rn(t,n,l,a),n.child;case 6:return t===null&&et&&((t=a=Rt)&&(a=N2(a,n.pendingProps,Vi),a!==null?(n.stateNode=a,An=n,Rt=null,t=!0):t=!1),t||Nr(n)),null;case 13:return hp(t,n,a);case 4:return Tt(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Oa(n,null,l,a):Rn(t,n,l,a),n.child;case 11:return ip(t,n,n.type,n.pendingProps,a);case 7:return Rn(t,n,n.pendingProps,a),n.child;case 8:return Rn(t,n,n.pendingProps.children,a),n.child;case 12:return Rn(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,Rr(n,n.type,l.value),Rn(t,n,l.children,a),n.child;case 9:return f=n.type._context,l=n.pendingProps.children,Ca(n),f=Nn(f),l=l(f),n.flags|=1,Rn(t,n,l,a),n.child;case 14:return sp(t,n,n.type,n.pendingProps,a);case 15:return rp(t,n,n.type,n.pendingProps,a);case 19:return mp(t,n,a);case 31:return $_(t,n,a);case 22:return ap(t,n,a,n.pendingProps);case 24:return Ca(n),l=Nn(rn),t===null?(f=dh(),f===null&&(f=_t,d=fh(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),n.memoizedState={parent:l,cache:f},gh(n),Rr(n,rn,f)):((t.lanes&a)!==0&&(ph(t,n),xl(n,null,null,a),yl()),f=t.memoizedState,d=n.memoizedState,f.parent!==l?(f={parent:l,cache:l},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),Rr(n,rn,l)):(l=d.cache,Rr(n,rn,l),l!==f.cache&&uh(n,[rn],a,!0))),Rn(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Js(t){t.flags|=4}function Zh(t,n,a,l,f){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(qp())t.flags|=8192;else throw Ma=Kc,mh}else t.flags&=-16777217}function pp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Dy(n))if(qp())t.flags|=8192;else throw Ma=Kc,mh}function fu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ls():536870912,t.lanes|=n,wo|=n)}function wl(t,n){if(!et)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ct(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function Z_(t,n,a){var l=n.pendingProps;switch(rh(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(n),null;case 1:return Ct(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Ks(rn),ft(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(uo(n)?Js(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,oh())),Ct(n),null;case 26:var f=n.type,d=n.memoizedState;return t===null?(Js(n),d!==null?(Ct(n),pp(n,d)):(Ct(n),Zh(n,f,null,l,a))):d?d!==t.memoizedState?(Js(n),Ct(n),pp(n,d)):(Ct(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&Js(n),Ct(n),Zh(n,f,t,l,a)),null;case 27:if(Gi(n),a=Oe.current,f=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Js(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Ct(n),null}t=pe.current,uo(n)?$0(n):(t=Ty(f,l,a),n.stateNode=t,Js(n))}return Ct(n),null;case 5:if(Gi(n),f=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&Js(n);else{if(!l){if(n.stateNode===null)throw Error(s(166));return Ct(n),null}if(d=pe.current,uo(n))$0(n);else{var b=Au(Oe.current);switch(d){case 1:d=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=b.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}d[st]=n,d[Ht]=l;e:for(b=n.child;b!==null;){if(b.tag===5||b.tag===6)d.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===n)break e;for(;b.sibling===null;){if(b.return===null||b.return===n)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}n.stateNode=d;e:switch(Cn(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Js(n)}}return Ct(n),Zh(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&Js(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(t=Oe.current,uo(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,f=An,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[st]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||hy(t.nodeValue,a)),t||Nr(n,!0)}else t=Au(t).createTextNode(l),t[st]=n,n.stateNode=t}return Ct(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=uo(n),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[st]=n}else Na(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ct(n),t=!1}else a=oh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(Ai(n),n):(Ai(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Ct(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=uo(n),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[st]=n}else Na(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ct(n),f=!1}else f=oh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(Ai(n),n):(Ai(n),null)}return Ai(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),fu(n,n.updateQueue),Ct(n),null);case 4:return ft(),t===null&&bd(n.stateNode.containerInfo),Ct(n),null;case 10:return Ks(n.type),Ct(n),null;case 19:if(Z(Wt),l=n.memoizedState,l===null)return Ct(n),null;if(f=(n.flags&128)!==0,d=l.rendering,d===null)if(f)wl(l,!1);else{if($t!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=Jc(t),d!==null){for(n.flags|=128,wl(l,!1),t=d.updateQueue,n.updateQueue=t,fu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)F0(a,t),a=a.sibling;return de(Wt,Wt.current&1|2),et&&Ys(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&fn()>pu&&(n.flags|=128,f=!0,wl(l,!1),n.lanes=4194304)}else{if(!f)if(t=Jc(d),t!==null){if(n.flags|=128,f=!0,t=t.updateQueue,n.updateQueue=t,fu(n,t),wl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!et)return Ct(n),null}else 2*fn()-l.renderingStartTime>pu&&a!==536870912&&(n.flags|=128,f=!0,wl(l,!1),n.lanes=4194304);l.isBackwards?(d.sibling=n.child,n.child=d):(t=l.last,t!==null?t.sibling=d:n.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=fn(),t.sibling=null,a=Wt.current,de(Wt,f?a&1|2:a&1),et&&Ys(n,l.treeForkCount),t):(Ct(n),null);case 22:case 23:return Ai(n),vh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(Ct(n),n.subtreeFlags&6&&(n.flags|=8192)):Ct(n),a=n.updateQueue,a!==null&&fu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&Z(Ia),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Ks(rn),Ct(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function J_(t,n){switch(rh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Ks(rn),ft(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Gi(n),null;case 31:if(n.memoizedState!==null){if(Ai(n),n.alternate===null)throw Error(s(340));Na()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Ai(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Na()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Z(Wt),null;case 4:return ft(),null;case 10:return Ks(n.type),null;case 22:case 23:return Ai(n),vh(),t!==null&&Z(Ia),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Ks(rn),null;case 25:return null;default:return null}}function yp(t,n){switch(rh(n),n.tag){case 3:Ks(rn),ft();break;case 26:case 27:case 5:Gi(n);break;case 4:ft();break;case 31:n.memoizedState!==null&&Ai(n);break;case 13:Ai(n);break;case 19:Z(Wt);break;case 10:Ks(n.type);break;case 22:case 23:Ai(n),vh(),t!==null&&Z(Ia);break;case 24:Ks(rn)}}function Sl(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var d=a.create,b=a.inst;l=d(),b.destroy=l}a=a.next}while(a!==f)}}catch(_){pt(n,n.return,_)}}function kr(t,n,a){try{var l=n.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var b=l.inst,_=b.destroy;if(_!==void 0){b.destroy=void 0,f=n;var I=a,H=_;try{H()}catch(K){pt(f,I,K)}}}l=l.next}while(l!==d)}}catch(K){pt(n,n.return,K)}}function xp(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{lg(n,a)}catch(l){pt(t,t.return,l)}}}function bp(t,n,a){a.props=ja(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){pt(t,n,l)}}function Al(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){pt(t,n,f)}}function ws(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){pt(t,n,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){pt(t,n,f)}else a.current=null}function vp(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){pt(t,t.return,f)}}function Jh(t,n,a){try{var l=t.stateNode;v2(l,t.type,a,n),l[Ht]=n}catch(f){pt(t,t.return,f)}}function _p(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Br(t.type)||t.tag===4}function Wh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_p(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Br(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ed(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=li));else if(l!==4&&(l===27&&Br(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(ed(t,n,a),t=t.sibling;t!==null;)ed(t,n,a),t=t.sibling}function hu(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&Br(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(hu(t,n,a),t=t.sibling;t!==null;)hu(t,n,a),t=t.sibling}function Ep(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);Cn(n,l,a),n[st]=t,n[Ht]=a}catch(d){pt(t,t.return,d)}}var Ws=!1,ln=!1,td=!1,Tp=typeof WeakSet=="function"?WeakSet:Set,vn=null;function W_(t,n){if(t=t.containerInfo,Ed=Ou,t=j0(t),Kf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var b=0,_=-1,I=-1,H=0,K=0,ee=t,F=null;t:for(;;){for(var Q;ee!==a||f!==0&&ee.nodeType!==3||(_=b+f),ee!==d||l!==0&&ee.nodeType!==3||(I=b+l),ee.nodeType===3&&(b+=ee.nodeValue.length),(Q=ee.firstChild)!==null;)F=ee,ee=Q;for(;;){if(ee===t)break t;if(F===a&&++H===f&&(_=b),F===d&&++K===l&&(I=b),(Q=ee.nextSibling)!==null)break;ee=F,F=ee.parentNode}ee=Q}a=_===-1||I===-1?null:{start:_,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Td={focusedElem:t,selectionRange:a},Ou=!1,vn=n;vn!==null;)if(n=vn,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,vn=t;else for(;vn!==null;){switch(n=vn,d=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=n,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ve=ja(a.type,f);t=l.getSnapshotBeforeUpdate(ve,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ce){pt(a,a.return,Ce)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Ad(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ad(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=n.sibling,t!==null){t.return=n.return,vn=t;break}vn=n.return}}function wp(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:tr(t,a),l&4&&Sl(5,a);break;case 1:if(tr(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(b){pt(a,a.return,b)}else{var f=ja(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(f,n,t.__reactInternalSnapshotBeforeUpdate)}catch(b){pt(a,a.return,b)}}l&64&&xp(a),l&512&&Al(a,a.return);break;case 3:if(tr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{lg(t,n)}catch(b){pt(a,a.return,b)}}break;case 27:n===null&&l&4&&Ep(a);case 26:case 5:tr(t,a),n===null&&l&4&&vp(a),l&512&&Al(a,a.return);break;case 12:tr(t,a);break;case 31:tr(t,a),l&4&&Np(t,a);break;case 13:tr(t,a),l&4&&Rp(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=l2.bind(null,a),R2(t,a))));break;case 22:if(l=a.memoizedState!==null||Ws,!l){n=n!==null&&n.memoizedState!==null||ln,f=Ws;var d=ln;Ws=l,(ln=n)&&!d?nr(t,a,(a.subtreeFlags&8772)!==0):tr(t,a),Ws=f,ln=d}break;case 30:break;default:tr(t,a)}}function Sp(t){var n=t.alternate;n!==null&&(t.alternate=null,Sp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&$i(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var jt=null,fi=!1;function er(t,n,a){for(a=a.child;a!==null;)Ap(t,n,a),a=a.sibling}function Ap(t,n,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:ln||ws(a,n),er(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ln||ws(a,n);var l=jt,f=fi;Br(a.type)&&(jt=a.stateNode,fi=!1),er(t,n,a),jl(a.stateNode),jt=l,fi=f;break;case 5:ln||ws(a,n);case 6:if(l=jt,f=fi,jt=null,er(t,n,a),jt=l,fi=f,jt!==null)if(fi)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(a.stateNode)}catch(d){pt(a,n,d)}else try{jt.removeChild(a.stateNode)}catch(d){pt(a,n,d)}break;case 18:jt!==null&&(fi?(t=jt,xy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Mo(t)):xy(jt,a.stateNode));break;case 4:l=jt,f=fi,jt=a.stateNode.containerInfo,fi=!0,er(t,n,a),jt=l,fi=f;break;case 0:case 11:case 14:case 15:kr(2,a,n),ln||kr(4,a,n),er(t,n,a);break;case 1:ln||(ws(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&bp(a,n,l)),er(t,n,a);break;case 21:er(t,n,a);break;case 22:ln=(l=ln)||a.memoizedState!==null,er(t,n,a),ln=l;break;default:er(t,n,a)}}function Np(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Mo(t)}catch(a){pt(n,n.return,a)}}}function Rp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Mo(t)}catch(a){pt(n,n.return,a)}}function e2(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Tp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Tp),n;default:throw Error(s(435,t.tag))}}function du(t,n){var a=e2(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var f=c2.bind(null,t,l);l.then(f,f)}})}function hi(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=t,b=n,_=b;e:for(;_!==null;){switch(_.tag){case 27:if(Br(_.type)){jt=_.stateNode,fi=!1;break e}break;case 5:jt=_.stateNode,fi=!1;break e;case 3:case 4:jt=_.stateNode.containerInfo,fi=!0;break e}_=_.return}if(jt===null)throw Error(s(160));Ap(d,b,f),jt=null,fi=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Cp(n,t),n=n.sibling}var ss=null;function Cp(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:hi(n,t),di(t),l&4&&(kr(3,t,t.return),Sl(3,t),kr(5,t,t.return));break;case 1:hi(n,t),di(t),l&512&&(ln||a===null||ws(a,a.return)),l&64&&Ws&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ss;if(hi(n,t),di(t),l&512&&(ln||a===null||ws(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Zn]||d[st]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),Cn(d,l,a),d[st]=t,St(d),l=d;break e;case"link":var b=Cy("link","href",f).get(l+(a.href||""));if(b){for(var _=0;_<b.length;_++)if(d=b[_],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(_,1);break t}}d=f.createElement(l),Cn(d,l,a),f.head.appendChild(d);break;case"meta":if(b=Cy("meta","content",f).get(l+(a.content||""))){for(_=0;_<b.length;_++)if(d=b[_],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(_,1);break t}}d=f.createElement(l),Cn(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[st]=t,St(d),l=d}t.stateNode=l}else Iy(f,t.type,t.stateNode);else t.stateNode=Ry(f,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Iy(f,t.type,t.stateNode):Ry(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Jh(t,t.memoizedProps,a.memoizedProps)}break;case 27:hi(n,t),di(t),l&512&&(ln||a===null||ws(a,a.return)),a!==null&&l&4&&Jh(t,t.memoizedProps,a.memoizedProps);break;case 5:if(hi(n,t),di(t),l&512&&(ln||a===null||ws(a,a.return)),t.flags&32){f=t.stateNode;try{Sn(f,"")}catch(ve){pt(t,t.return,ve)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Jh(t,f,a!==null?a.memoizedProps:f)),l&1024&&(td=!0);break;case 6:if(hi(n,t),di(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ve){pt(t,t.return,ve)}}break;case 3:if(Cu=null,f=ss,ss=Nu(n.containerInfo),hi(n,t),ss=f,di(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Mo(n.containerInfo)}catch(ve){pt(t,t.return,ve)}td&&(td=!1,Ip(t));break;case 4:l=ss,ss=Nu(t.stateNode.containerInfo),hi(n,t),di(t),ss=l;break;case 12:hi(n,t),di(t);break;case 31:hi(n,t),di(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,du(t,l)));break;case 13:hi(n,t),di(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(gu=fn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,du(t,l)));break;case 22:f=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,H=Ws,K=ln;if(Ws=H||f,ln=K||I,hi(n,t),ln=K,Ws=H,di(t),l&8192)e:for(n=t.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(a===null||I||Ws||ln||Va(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){I=a=n;try{if(d=I.stateNode,f)b=d.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{_=I.stateNode;var ee=I.memoizedProps.style,F=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;_.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ve){pt(I,I.return,ve)}}}else if(n.tag===6){if(a===null){I=n;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(ve){pt(I,I.return,ve)}}}else if(n.tag===18){if(a===null){I=n;try{var Q=I.stateNode;f?by(Q,!0):by(I.stateNode,!1)}catch(ve){pt(I,I.return,ve)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,du(t,a))));break;case 19:hi(n,t),di(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,du(t,l)));break;case 30:break;case 21:break;default:hi(n,t),di(t)}}function di(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(_p(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Wh(t);hu(t,d,f);break;case 5:var b=a.stateNode;a.flags&32&&(Sn(b,""),a.flags&=-33);var _=Wh(t);hu(t,_,b);break;case 3:case 4:var I=a.stateNode.containerInfo,H=Wh(t);ed(t,H,I);break;default:throw Error(s(161))}}catch(K){pt(t,t.return,K)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Ip(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Ip(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function tr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)wp(t,n.alternate,n),n=n.sibling}function Va(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:kr(4,n,n.return),Va(n);break;case 1:ws(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&bp(n,n.return,a),Va(n);break;case 27:jl(n.stateNode);case 26:case 5:ws(n,n.return),Va(n);break;case 22:n.memoizedState===null&&Va(n);break;case 30:Va(n);break;default:Va(n)}t=t.sibling}}function nr(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,f=t,d=n,b=d.flags;switch(d.tag){case 0:case 11:case 15:nr(f,d,a),Sl(4,d);break;case 1:if(nr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){pt(l,l.return,H)}if(l=d,f=l.updateQueue,f!==null){var _=l.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)og(I[f],_)}catch(H){pt(l,l.return,H)}}a&&b&64&&xp(d),Al(d,d.return);break;case 27:Ep(d);case 26:case 5:nr(f,d,a),a&&l===null&&b&4&&vp(d),Al(d,d.return);break;case 12:nr(f,d,a);break;case 31:nr(f,d,a),a&&b&4&&Np(f,d);break;case 13:nr(f,d,a),a&&b&4&&Rp(f,d);break;case 22:d.memoizedState===null&&nr(f,d,a),Al(d,d.return);break;case 30:break;default:nr(f,d,a)}n=n.sibling}}function nd(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&hl(a))}function id(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&hl(t))}function rs(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Dp(t,n,a,l),n=n.sibling}function Dp(t,n,a,l){var f=n.flags;switch(n.tag){case 0:case 11:case 15:rs(t,n,a,l),f&2048&&Sl(9,n);break;case 1:rs(t,n,a,l);break;case 3:rs(t,n,a,l),f&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&hl(t)));break;case 12:if(f&2048){rs(t,n,a,l),t=n.stateNode;try{var d=n.memoizedProps,b=d.id,_=d.onPostCommit;typeof _=="function"&&_(b,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){pt(n,n.return,I)}}else rs(t,n,a,l);break;case 31:rs(t,n,a,l);break;case 13:rs(t,n,a,l);break;case 23:break;case 22:d=n.stateNode,b=n.alternate,n.memoizedState!==null?d._visibility&2?rs(t,n,a,l):Nl(t,n):d._visibility&2?rs(t,n,a,l):(d._visibility|=2,_o(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),f&2048&&nd(b,n);break;case 24:rs(t,n,a,l),f&2048&&id(n.alternate,n);break;default:rs(t,n,a,l)}}function _o(t,n,a,l,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var d=t,b=n,_=a,I=l,H=b.flags;switch(b.tag){case 0:case 11:case 15:_o(d,b,_,I,f),Sl(8,b);break;case 23:break;case 22:var K=b.stateNode;b.memoizedState!==null?K._visibility&2?_o(d,b,_,I,f):Nl(d,b):(K._visibility|=2,_o(d,b,_,I,f)),f&&H&2048&&nd(b.alternate,b);break;case 24:_o(d,b,_,I,f),f&&H&2048&&id(b.alternate,b);break;default:_o(d,b,_,I,f)}n=n.sibling}}function Nl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,f=l.flags;switch(l.tag){case 22:Nl(a,l),f&2048&&nd(l.alternate,l);break;case 24:Nl(a,l),f&2048&&id(l.alternate,l);break;default:Nl(a,l)}n=n.sibling}}var Rl=8192;function Eo(t,n,a){if(t.subtreeFlags&Rl)for(t=t.child;t!==null;)Mp(t,n,a),t=t.sibling}function Mp(t,n,a){switch(t.tag){case 26:Eo(t,n,a),t.flags&Rl&&t.memoizedState!==null&&z2(a,ss,t.memoizedState,t.memoizedProps);break;case 5:Eo(t,n,a);break;case 3:case 4:var l=ss;ss=Nu(t.stateNode.containerInfo),Eo(t,n,a),ss=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Rl,Rl=16777216,Eo(t,n,a),Rl=l):Eo(t,n,a));break;default:Eo(t,n,a)}}function Op(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Cl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];vn=l,jp(l,t)}Op(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)kp(t),t=t.sibling}function kp(t){switch(t.tag){case 0:case 11:case 15:Cl(t),t.flags&2048&&kr(9,t,t.return);break;case 3:Cl(t);break;case 12:Cl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,mu(t)):Cl(t);break;default:Cl(t)}}function mu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];vn=l,jp(l,t)}Op(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:kr(8,n,n.return),mu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,mu(n));break;default:mu(n)}t=t.sibling}}function jp(t,n){for(;vn!==null;){var a=vn;switch(a.tag){case 0:case 11:case 15:kr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:hl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,vn=l;else e:for(a=t;vn!==null;){l=vn;var f=l.sibling,d=l.return;if(Sp(l),l===a){vn=null;break e}if(f!==null){f.return=d,vn=f;break e}vn=d}}}var t2={getCacheForType:function(t){var n=Nn(rn),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return Nn(rn).controller.signal}},n2=typeof WeakMap=="function"?WeakMap:Map,ut=0,_t=null,Qe=null,$e=0,gt=0,Ni=null,jr=!1,To=!1,sd=!1,ir=0,$t=0,Vr=0,La=0,rd=0,Ri=0,wo=0,Il=null,mi=null,ad=!1,gu=0,Vp=0,pu=1/0,yu=null,Lr=null,gn=0,Ur=null,So=null,sr=0,od=0,ld=null,Lp=null,Dl=0,cd=null;function Ci(){return(ut&2)!==0&&$e!==0?$e&-$e:Y.T!==null?gd():Er()}function Up(){if(Ri===0)if(($e&536870912)===0||et){var t=Vs;Vs<<=1,(Vs&3932160)===0&&(Vs=262144),Ri=t}else Ri=536870912;return t=Si.current,t!==null&&(t.flags|=32),Ri}function gi(t,n,a){(t===_t&&(gt===2||gt===9)||t.cancelPendingCommit!==null)&&(Ao(t,0),Pr(t,$e,Ri,!1)),vi(t,a),((ut&2)===0||t!==_t)&&(t===_t&&((ut&2)===0&&(La|=a),$t===4&&Pr(t,$e,Ri,!1)),Ss(t))}function Pp(t,n,a){if((ut&6)!==0)throw Error(s(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||$n(t,n),f=l?r2(t,n):fd(t,n,!0),d=l;do{if(f===0){To&&!l&&Pr(t,n,0,!1);break}else{if(a=t.current.alternate,d&&!i2(a)){f=fd(t,n,!1),d=!1;continue}if(f===2){if(d=n,t.errorRecoveryDisabledLanes&d)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;e:{var _=t;f=Il;var I=_.current.memoizedState.isDehydrated;if(I&&(Ao(_,b).flags|=256),b=fd(_,b,!1),b!==2){if(sd&&!I){_.errorRecoveryDisabledLanes|=d,La|=d,f=4;break e}d=mi,mi=f,d!==null&&(mi===null?mi=d:mi.push.apply(mi,d))}f=b}if(d=!1,f!==2)continue}}if(f===1){Ao(t,0),Pr(t,n,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Pr(l,n,Ri,!jr);break e;case 2:mi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=gu+300-fn(),10<f)){if(Pr(l,n,Ri,!jr),Ln(l,0,!0)!==0)break e;sr=n,l.timeoutHandle=py(zp.bind(null,l,a,mi,yu,ad,n,Ri,La,wo,jr,d,"Throttled",-0,0),f);break e}zp(l,a,mi,yu,ad,n,Ri,La,wo,jr,d,null,-0,0)}}break}while(!0);Ss(t)}function zp(t,n,a,l,f,d,b,_,I,H,K,ee,F,Q){if(t.timeoutHandle=-1,ee=n.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},Mp(n,d,ee);var ve=(d&62914560)===d?gu-fn():(d&4194048)===d?Vp-fn():0;if(ve=B2(ee,ve),ve!==null){sr=d,t.cancelPendingCommit=ve(Kp.bind(null,t,n,d,a,l,f,b,_,I,K,ee,null,F,Q)),Pr(t,d,b,!H);return}}Kp(t,n,d,a,l,f,b,_,I)}function i2(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!Ti(d(),f))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Pr(t,n,a,l){n&=~rd,n&=~La,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var f=n;0<f;){var d=31-wt(f),b=1<<d;l[d]=-1,f&=~b}a!==0&&Un(t,a,n)}function xu(){return(ut&6)===0?(Ml(0),!1):!0}function ud(){if(Qe!==null){if(gt===0)var t=Qe.return;else t=Qe,Qs=Ra=null,Ah(t),po=null,ml=0,t=Qe;for(;t!==null;)yp(t.alternate,t),t=t.return;Qe=null}}function Ao(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,T2(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),sr=0,ud(),_t=t,Qe=a=Gs(t.current,null),$e=n,gt=0,Ni=null,jr=!1,To=$n(t,n),sd=!1,wo=Ri=rd=La=Vr=$t=0,mi=Il=null,ad=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var f=31-wt(l),d=1<<f;n|=t[f],l&=~d}return ir=n,Pc(),a}function Bp(t,n){ze=null,Y.H=El,n===go||n===Qc?(n=ig(),gt=3):n===mh?(n=ig(),gt=4):gt=n===qh?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ni=n,Qe===null&&($t=1,ou(t,Oi(n,t.current)))}function qp(){var t=Si.current;return t===null?!0:($e&4194048)===$e?Li===null:($e&62914560)===$e||($e&536870912)!==0?t===Li:!1}function Hp(){var t=Y.H;return Y.H=El,t===null?El:t}function Fp(){var t=Y.A;return Y.A=t2,t}function bu(){$t=4,jr||($e&4194048)!==$e&&Si.current!==null||(To=!0),(Vr&134217727)===0&&(La&134217727)===0||_t===null||Pr(_t,$e,Ri,!1)}function fd(t,n,a){var l=ut;ut|=2;var f=Hp(),d=Fp();(_t!==t||$e!==n)&&(yu=null,Ao(t,n)),n=!1;var b=$t;e:do try{if(gt!==0&&Qe!==null){var _=Qe,I=Ni;switch(gt){case 8:ud(),b=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(n=!0);var H=gt;if(gt=0,Ni=null,No(t,_,I,H),a&&To){b=0;break e}break;default:H=gt,gt=0,Ni=null,No(t,_,I,H)}}s2(),b=$t;break}catch(K){Bp(t,K)}while(!0);return n&&t.shellSuspendCounter++,Qs=Ra=null,ut=l,Y.H=f,Y.A=d,Qe===null&&(_t=null,$e=0,Pc()),b}function s2(){for(;Qe!==null;)Gp(Qe)}function r2(t,n){var a=ut;ut|=2;var l=Hp(),f=Fp();_t!==t||$e!==n?(yu=null,pu=fn()+500,Ao(t,n)):To=$n(t,n);e:do try{if(gt!==0&&Qe!==null){n=Qe;var d=Ni;t:switch(gt){case 1:gt=0,Ni=null,No(t,n,d,1);break;case 2:case 9:if(tg(d)){gt=0,Ni=null,Yp(n);break}n=function(){gt!==2&&gt!==9||_t!==t||(gt=7),Ss(t)},d.then(n,n);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:tg(d)?(gt=0,Ni=null,Yp(n)):(gt=0,Ni=null,No(t,n,d,7));break;case 5:var b=null;switch(Qe.tag){case 26:b=Qe.memoizedState;case 5:case 27:var _=Qe;if(b?Dy(b):_.stateNode.complete){gt=0,Ni=null;var I=_.sibling;if(I!==null)Qe=I;else{var H=_.return;H!==null?(Qe=H,vu(H)):Qe=null}break t}}gt=0,Ni=null,No(t,n,d,5);break;case 6:gt=0,Ni=null,No(t,n,d,6);break;case 8:ud(),$t=6;break e;default:throw Error(s(462))}}a2();break}catch(K){Bp(t,K)}while(!0);return Qs=Ra=null,Y.H=l,Y.A=f,ut=a,Qe!==null?0:(_t=null,$e=0,Pc(),$t)}function a2(){for(;Qe!==null&&!ma();)Gp(Qe)}function Gp(t){var n=gp(t.alternate,t,ir);t.memoizedProps=t.pendingProps,n===null?vu(t):Qe=n}function Yp(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=cp(a,n,n.pendingProps,n.type,void 0,$e);break;case 11:n=cp(a,n,n.pendingProps,n.type.render,n.ref,$e);break;case 5:Ah(n);default:yp(a,n),n=Qe=F0(n,ir),n=gp(a,n,ir)}t.memoizedProps=t.pendingProps,n===null?vu(t):Qe=n}function No(t,n,a,l){Qs=Ra=null,Ah(n),po=null,ml=0;var f=n.return;try{if(K_(t,f,n,a,$e)){$t=1,ou(t,Oi(a,t.current)),Qe=null;return}}catch(d){if(f!==null)throw Qe=f,d;$t=1,ou(t,Oi(a,t.current)),Qe=null;return}n.flags&32768?(et||l===1?t=!0:To||($e&536870912)!==0?t=!1:(jr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Si.current,l!==null&&l.tag===13&&(l.flags|=16384))),Qp(n,t)):vu(n)}function vu(t){var n=t;do{if((n.flags&32768)!==0){Qp(n,jr);return}t=n.return;var a=Z_(n.alternate,n,ir);if(a!==null){Qe=a;return}if(n=n.sibling,n!==null){Qe=n;return}Qe=n=t}while(n!==null);$t===0&&($t=5)}function Qp(t,n){do{var a=J_(t.alternate,t);if(a!==null){a.flags&=32767,Qe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Qe=t;return}Qe=t=a}while(t!==null);$t=6,Qe=null}function Kp(t,n,a,l,f,d,b,_,I){t.cancelPendingCommit=null;do _u();while(gn!==0);if((ut&6)!==0)throw Error(s(327));if(n!==null){if(n===t.current)throw Error(s(177));if(d=n.lanes|n.childLanes,d|=Wf,ga(t,a,d,b,_,I),t===_t&&(Qe=_t=null,$e=0),So=n,Ur=t,sr=a,od=d,ld=f,Lp=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,u2(Qi,function(){return Wp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=B.p,B.p=2,b=ut,ut|=4;try{W_(t,n,a)}finally{ut=b,B.p=f,Y.T=l}}gn=1,$p(),Xp(),Zp()}}function $p(){if(gn===1){gn=0;var t=Ur,n=So,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=Y.T,Y.T=null;var l=B.p;B.p=2;var f=ut;ut|=4;try{Cp(n,t);var d=Td,b=j0(t.containerInfo),_=d.focusedElem,I=d.selectionRange;if(b!==_&&_&&_.ownerDocument&&k0(_.ownerDocument.documentElement,_)){if(I!==null&&Kf(_)){var H=I.start,K=I.end;if(K===void 0&&(K=H),"selectionStart"in _)_.selectionStart=H,_.selectionEnd=Math.min(K,_.value.length);else{var ee=_.ownerDocument||document,F=ee&&ee.defaultView||window;if(F.getSelection){var Q=F.getSelection(),ve=_.textContent.length,Ce=Math.min(I.start,ve),bt=I.end===void 0?Ce:Math.min(I.end,ve);!Q.extend&&Ce>bt&&(b=bt,bt=Ce,Ce=b);var L=O0(_,Ce),k=O0(_,bt);if(L&&k&&(Q.rangeCount!==1||Q.anchorNode!==L.node||Q.anchorOffset!==L.offset||Q.focusNode!==k.node||Q.focusOffset!==k.offset)){var q=ee.createRange();q.setStart(L.node,L.offset),Q.removeAllRanges(),Ce>bt?(Q.addRange(q),Q.extend(k.node,k.offset)):(q.setEnd(k.node,k.offset),Q.addRange(q))}}}}for(ee=[],Q=_;Q=Q.parentNode;)Q.nodeType===1&&ee.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ee.length;_++){var J=ee[_];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}Ou=!!Ed,Td=Ed=null}finally{ut=f,B.p=l,Y.T=a}}t.current=n,gn=2}}function Xp(){if(gn===2){gn=0;var t=Ur,n=So,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=Y.T,Y.T=null;var l=B.p;B.p=2;var f=ut;ut|=4;try{wp(t,n.alternate,n)}finally{ut=f,B.p=l,Y.T=a}}gn=3}}function Zp(){if(gn===4||gn===3){gn=0,wn();var t=Ur,n=So,a=sr,l=Lp;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?gn=5:(gn=0,So=Ur=null,Jp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Lr=null),qt(a),n=n.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Kn,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=Y.T,f=B.p,B.p=2,Y.T=null;try{for(var d=t.onRecoverableError,b=0;b<l.length;b++){var _=l[b];d(_.value,{componentStack:_.stack})}}finally{Y.T=n,B.p=f}}(sr&3)!==0&&_u(),Ss(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===cd?Dl++:(Dl=0,cd=t):Dl=0,Ml(0)}}function Jp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,hl(n)))}function _u(){return $p(),Xp(),Zp(),Wp()}function Wp(){if(gn!==5)return!1;var t=Ur,n=od;od=0;var a=qt(sr),l=Y.T,f=B.p;try{B.p=32>a?32:a,Y.T=null,a=ld,ld=null;var d=Ur,b=sr;if(gn=0,So=Ur=null,sr=0,(ut&6)!==0)throw Error(s(331));var _=ut;if(ut|=4,kp(d.current),Dp(d,d.current,b,a),ut=_,Ml(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Kn,d)}catch{}return!0}finally{B.p=f,Y.T=l,Jp(t,n)}}function ey(t,n,a){n=Oi(a,n),n=Bh(t.stateNode,n,2),t=Dr(t,n,2),t!==null&&(vi(t,2),Ss(t))}function pt(t,n,a){if(t.tag===3)ey(t,t,a);else for(;n!==null;){if(n.tag===3){ey(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Lr===null||!Lr.has(l))){t=Oi(a,t),a=tp(2),l=Dr(n,a,2),l!==null&&(np(a,l,n,t),vi(l,2),Ss(l));break}}n=n.return}}function hd(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new n2;var f=new Set;l.set(n,f)}else f=l.get(n),f===void 0&&(f=new Set,l.set(n,f));f.has(a)||(sd=!0,f.add(a),t=o2.bind(null,t,n,a),n.then(t,t))}function o2(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,_t===t&&($e&a)===a&&($t===4||$t===3&&($e&62914560)===$e&&300>fn()-gu?(ut&2)===0&&Ao(t,0):rd|=a,wo===$e&&(wo=0)),Ss(t)}function ty(t,n){n===0&&(n=Ls()),t=Sa(t,n),t!==null&&(vi(t,n),Ss(t))}function l2(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),ty(t,a)}function c2(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(n),ty(t,a)}function u2(t,n){return it(t,n)}var Eu=null,Ro=null,dd=!1,Tu=!1,md=!1,zr=0;function Ss(t){t!==Ro&&t.next===null&&(Ro===null?Eu=Ro=t:Ro=Ro.next=t),Tu=!0,dd||(dd=!0,h2())}function Ml(t,n){if(!md&&Tu){md=!0;do for(var a=!1,l=Eu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var b=l.suspendedLanes,_=l.pingedLanes;d=(1<<31-wt(42|t)+1)-1,d&=f&~(b&~_),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,ry(l,d))}else d=$e,d=Ln(l,l===_t?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||$n(l,d)||(a=!0,ry(l,d));l=l.next}while(a);md=!1}}function f2(){ny()}function ny(){Tu=dd=!1;var t=0;zr!==0&&E2()&&(t=zr);for(var n=fn(),a=null,l=Eu;l!==null;){var f=l.next,d=iy(l,n);d===0?(l.next=null,a===null?Eu=f:a.next=f,f===null&&(Ro=a)):(a=l,(t!==0||(d&3)!==0)&&(Tu=!0)),l=f}gn!==0&&gn!==5||Ml(t),zr!==0&&(zr=0)}function iy(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var b=31-wt(d),_=1<<b,I=f[b];I===-1?((_&a)===0||(_&l)!==0)&&(f[b]=Ja(_,n)):I<=n&&(t.expiredLanes|=_),d&=~_}if(n=_t,a=$e,a=Ln(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(gt===2||gt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Xt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||$n(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&Xt(l),qt(a)){case 2:case 8:a=Lt;break;case 32:a=Qi;break;case 268435456:a=yr;break;default:a=Qi}return l=sy.bind(null,t),a=it(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&Xt(l),t.callbackPriority=2,t.callbackNode=null,2}function sy(t,n){if(gn!==0&&gn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(_u()&&t.callbackNode!==a)return null;var l=$e;return l=Ln(t,t===_t?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Pp(t,l,n),iy(t,fn()),t.callbackNode!=null&&t.callbackNode===a?sy.bind(null,t):null)}function ry(t,n){if(_u())return null;Pp(t,n,!0)}function h2(){w2(function(){(ut&6)!==0?it(Yi,f2):ny()})}function gd(){if(zr===0){var t=ho;t===0&&(t=si,si<<=1,(si&261888)===0&&(si=256)),zr=t}return zr}function ay(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Bs(""+t)}function oy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function d2(t,n,a,l,f){if(n==="submit"&&a&&a.stateNode===f){var d=ay((f[Ht]||null).action),b=l.submitter;b&&(n=(n=b[Ht]||null)?ay(n.formAction):b.getAttribute("formAction"),n!==null&&(d=n,b=null));var _=new rt("action","action",null,l,f);t.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(zr!==0){var I=b?oy(f,b):new FormData(f);jh(a,{pending:!0,data:I,method:f.method,action:d},null,I)}}else typeof d=="function"&&(_.preventDefault(),I=b?oy(f,b):new FormData(f),jh(a,{pending:!0,data:I,method:f.method,action:d},d,I))},currentTarget:f}]})}}for(var pd=0;pd<Jf.length;pd++){var yd=Jf[pd],m2=yd.toLowerCase(),g2=yd[0].toUpperCase()+yd.slice(1);is(m2,"on"+g2)}is(U0,"onAnimationEnd"),is(P0,"onAnimationIteration"),is(z0,"onAnimationStart"),is("dblclick","onDoubleClick"),is("focusin","onFocus"),is("focusout","onBlur"),is(D_,"onTransitionRun"),is(M_,"onTransitionStart"),is(O_,"onTransitionCancel"),is(B0,"onTransitionEnd"),oi("onMouseEnter",["mouseout","mouseover"]),oi("onMouseLeave",["mouseout","mouseover"]),oi("onPointerEnter",["pointerout","pointerover"]),oi("onPointerLeave",["pointerout","pointerover"]),Mt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ol));function ly(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var b=l.length-1;0<=b;b--){var _=l[b],I=_.instance,H=_.currentTarget;if(_=_.listener,I!==d&&f.isPropagationStopped())break e;d=_,f.currentTarget=H;try{d(f)}catch(K){Uc(K)}f.currentTarget=null,d=I}else for(b=0;b<l.length;b++){if(_=l[b],I=_.instance,H=_.currentTarget,_=_.listener,I!==d&&f.isPropagationStopped())break e;d=_,f.currentTarget=H;try{d(f)}catch(K){Uc(K)}f.currentTarget=null,d=I}}}}function Ke(t,n){var a=n[hs];a===void 0&&(a=n[hs]=new Set);var l=t+"__bubble";a.has(l)||(cy(n,t,2,!1),a.add(l))}function xd(t,n,a){var l=0;n&&(l|=4),cy(a,t,l,n)}var wu="_reactListening"+Math.random().toString(36).slice(2);function bd(t){if(!t[wu]){t[wu]=!0,Xi.forEach(function(a){a!=="selectionchange"&&(p2.has(a)||xd(a,!1,t),xd(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[wu]||(n[wu]=!0,xd("selectionchange",!1,n))}}function cy(t,n,a,l){switch(Uy(n)){case 2:var f=F2;break;case 8:f=G2;break;default:f=kd}a=f.bind(null,n,a,t),f=void 0,!$||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(n,a,{capture:!0,passive:f}):t.addEventListener(n,a,!0):f!==void 0?t.addEventListener(n,a,{passive:f}):t.addEventListener(n,a,!1)}function vd(t,n,a,l,f){var d=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var _=l.stateNode.containerInfo;if(_===f)break;if(b===4)for(b=l.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;_!==null;){if(b=ai(_),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){l=d=b;continue e}_=_.parentNode}}l=l.return}es(function(){var H=d,K=ei(a),ee=[];e:{var F=q0.get(t);if(F!==void 0){var Q=rt,ve=t;switch(t){case"keypress":if(Ee(a)===0)break e;case"keydown":case"keyup":Q=jc;break;case"focusin":ve="focus",Q=ui;break;case"focusout":ve="blur",Q=ui;break;case"beforeblur":case"afterblur":Q=ui;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=ci;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Bn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=g;break;case U0:case P0:case z0:Q=bs;break;case B0:Q=T;break;case"scroll":case"scrollend":Q=Qt;break;case"wheel":Q=G;break;case"copy":case"cut":case"paste":Q=Cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Fs;break;case"toggle":case"beforetoggle":Q=Pe}var Ce=(n&4)!==0,bt=!Ce&&(t==="scroll"||t==="scrollend"),L=Ce?F!==null?F+"Capture":null:F;Ce=[];for(var k=H,q;k!==null;){var J=k;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||L===null||(J=S(k,L),J!=null&&Ce.push(kl(k,J,q))),bt)break;k=k.return}0<Ce.length&&(F=new Q(F,ve,null,a,K),ee.push({event:F,listeners:Ce}))}}if((n&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",Q=t==="mouseout"||t==="pointerout",F&&a!==qs&&(ve=a.relatedTarget||a.fromElement)&&(ai(ve)||ve[hn]))break e;if((Q||F)&&(F=K.window===K?K:(F=K.ownerDocument)?F.defaultView||F.parentWindow:window,Q?(ve=a.relatedTarget||a.toElement,Q=H,ve=ve?ai(ve):null,ve!==null&&(bt=c(ve),Ce=ve.tag,ve!==bt||Ce!==5&&Ce!==27&&Ce!==6)&&(ve=null)):(Q=null,ve=H),Q!==ve)){if(Ce=ci,J="onMouseLeave",L="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(Ce=Fs,J="onPointerLeave",L="onPointerEnter",k="pointer"),bt=Q==null?F:Gt(Q),q=ve==null?F:Gt(ve),F=new Ce(J,k+"leave",Q,a,K),F.target=bt,F.relatedTarget=q,J=null,ai(K)===H&&(Ce=new Ce(L,k+"enter",ve,a,K),Ce.target=q,Ce.relatedTarget=bt,J=Ce),bt=J,Q&&ve)t:{for(Ce=y2,L=Q,k=ve,q=0,J=L;J;J=Ce(J))q++;J=0;for(var Se=k;Se;Se=Ce(Se))J++;for(;0<q-J;)L=Ce(L),q--;for(;0<J-q;)k=Ce(k),J--;for(;q--;){if(L===k||k!==null&&L===k.alternate){Ce=L;break t}L=Ce(L),k=Ce(k)}Ce=null}else Ce=null;Q!==null&&uy(ee,F,Q,Ce,!1),ve!==null&&bt!==null&&uy(ee,bt,ve,Ce,!0)}}e:{if(F=H?Gt(H):window,Q=F.nodeName&&F.nodeName.toLowerCase(),Q==="select"||Q==="input"&&F.type==="file")var at=N0;else if(S0(F))if(R0)at=R_;else{at=A_;var _e=S_}else Q=F.nodeName,!Q||Q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&Tr(H.elementType)&&(at=N0):at=N_;if(at&&(at=at(t,H))){A0(ee,at,a,K);break e}_e&&_e(t,F,H),t==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&ya(F,"number",F.value)}switch(_e=H?Gt(H):window,t){case"focusin":(S0(_e)||_e.contentEditable==="true")&&(so=_e,$f=H,cl=null);break;case"focusout":cl=$f=so=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,V0(ee,a,K);break;case"selectionchange":if(I_)break;case"keydown":case"keyup":V0(ee,a,K)}var He;if(ct)e:{switch(t){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else io?Ea(t,a)&&(Xe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Xe="onCompositionStart");Xe&&(_s&&a.locale!=="ko"&&(io||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&io&&(He=ge()):(ue=K,ae="value"in ue?ue.value:ue.textContent,io=!0)),_e=Su(H,Xe),0<_e.length&&(Xe=new vs(Xe,t,null,a,K),ee.push({event:Xe,listeners:_e}),He?Xe.data=He:(He=no(a),He!==null&&(Xe.data=He)))),(He=Di?__(t,a):E_(t,a))&&(Xe=Su(H,"onBeforeInput"),0<Xe.length&&(_e=new vs("onBeforeInput","beforeinput",null,a,K),ee.push({event:_e,listeners:Xe}),_e.data=He)),d2(ee,t,H,a,K)}ly(ee,n)})}function kl(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Su(t,n){for(var a=n+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=S(t,a),f!=null&&l.unshift(kl(t,f,d)),f=S(t,n),f!=null&&l.push(kl(t,f,d))),t.tag===3)return l;t=t.return}return[]}function y2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function uy(t,n,a,l,f){for(var d=n._reactName,b=[];a!==null&&a!==l;){var _=a,I=_.alternate,H=_.stateNode;if(_=_.tag,I!==null&&I===l)break;_!==5&&_!==26&&_!==27||H===null||(I=H,f?(H=S(a,d),H!=null&&b.unshift(kl(a,H,I))):f||(H=S(a,d),H!=null&&b.push(kl(a,H,I)))),a=a.return}b.length!==0&&t.push({event:n,listeners:b})}var x2=/\r\n?/g,b2=/\u0000|\uFFFD/g;function fy(t){return(typeof t=="string"?t:""+t).replace(x2,`
`).replace(b2,"")}function hy(t,n){return n=fy(n),fy(t)===n}function xt(t,n,a,l,f,d){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||Sn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&Sn(t,""+l);break;case"className":Wn(t,"class",l);break;case"tabIndex":Wn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Wn(t,a,l);break;case"style":ba(t,l,d);break;case"data":if(n!=="object"){Wn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Bs(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&xt(t,n,"name",f.name,f,null),xt(t,n,"formEncType",f.formEncType,f,null),xt(t,n,"formMethod",f.formMethod,f,null),xt(t,n,"formTarget",f.formTarget,f,null)):(xt(t,n,"encType",f.encType,f,null),xt(t,n,"method",f.method,f,null),xt(t,n,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Bs(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=li);break;case"onScroll":l!=null&&Ke("scroll",t);break;case"onScrollEnd":l!=null&&Ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Bs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ke("beforetoggle",t),Ke("toggle",t),Ei(t,"popover",l);break;case"xlinkActuate":Yt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Yt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Yt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Yt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Yt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Yt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ei(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Et.get(a)||a,Ei(t,a,l))}}function _d(t,n,a,l,f,d){switch(a){case"style":ba(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Sn(t,l):(typeof l=="number"||typeof l=="bigint")&&Sn(t,""+l);break;case"onScroll":l!=null&&Ke("scroll",t);break;case"onScrollEnd":l!=null&&Ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ps.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),n=a.slice(2,f?a.length-7:void 0),d=t[Ht]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(n,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ei(t,a,l)}}}function Cn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",t),Ke("load",t);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var b=a[d];if(b!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:xt(t,n,d,b,a,null)}}f&&xt(t,n,"srcSet",a.srcSet,a,null),l&&xt(t,n,"src",a.src,a,null);return;case"input":Ke("invalid",t);var _=d=b=f=null,I=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":f=K;break;case"type":b=K;break;case"checked":I=K;break;case"defaultChecked":H=K;break;case"value":d=K;break;case"defaultValue":_=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:xt(t,n,l,K,a,null)}}Wa(t,d,_,I,H,b,f,!1);return;case"select":Ke("invalid",t),l=b=d=null;for(f in a)if(a.hasOwnProperty(f)&&(_=a[f],_!=null))switch(f){case"value":d=_;break;case"defaultValue":b=_;break;case"multiple":l=_;default:xt(t,n,f,_,a,null)}n=d,a=b,t.multiple=!!l,n!=null?le(t,!!l,n,!1):a!=null&&le(t,!!l,a,!0);return;case"textarea":Ke("invalid",t),d=f=l=null;for(b in a)if(a.hasOwnProperty(b)&&(_=a[b],_!=null))switch(b){case"value":l=_;break;case"defaultValue":f=_;break;case"children":d=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:xt(t,n,b,_,a,null)}bn(t,l,f,d);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:xt(t,n,I,l,a,null)}return;case"dialog":Ke("beforetoggle",t),Ke("toggle",t),Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":Ke("load",t);break;case"video":case"audio":for(l=0;l<Ol.length;l++)Ke(Ol[l],t);break;case"image":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"embed":case"source":case"link":Ke("error",t),Ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:xt(t,n,H,l,a,null)}return;default:if(Tr(n)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&_d(t,n,K,l,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(l=a[_],l!=null&&xt(t,n,_,l,a,null))}function v2(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,b=null,_=null,I=null,H=null,K=null;for(Q in a){var ee=a[Q];if(a.hasOwnProperty(Q)&&ee!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":I=ee;default:l.hasOwnProperty(Q)||xt(t,n,Q,null,l,ee)}}for(var F in l){var Q=l[F];if(ee=a[F],l.hasOwnProperty(F)&&(Q!=null||ee!=null))switch(F){case"type":d=Q;break;case"name":f=Q;break;case"checked":H=Q;break;case"defaultChecked":K=Q;break;case"value":b=Q;break;case"defaultValue":_=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,n));break;default:Q!==ee&&xt(t,n,F,Q,l,ee)}}gs(t,b,_,I,H,K,d,f);return;case"select":Q=b=_=F=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":Q=I;default:l.hasOwnProperty(d)||xt(t,n,d,null,l,I)}for(f in l)if(d=l[f],I=a[f],l.hasOwnProperty(f)&&(d!=null||I!=null))switch(f){case"value":F=d;break;case"defaultValue":_=d;break;case"multiple":b=d;default:d!==I&&xt(t,n,f,d,l,I)}n=_,a=b,l=Q,F!=null?le(t,!!a,F,!1):!!l!=!!a&&(n!=null?le(t,!!a,n,!0):le(t,!!a,a?[]:"",!1));return;case"textarea":Q=F=null;for(_ in a)if(f=a[_],a.hasOwnProperty(_)&&f!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:xt(t,n,_,null,l,f)}for(b in l)if(f=l[b],d=a[b],l.hasOwnProperty(b)&&(f!=null||d!=null))switch(b){case"value":F=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&xt(t,n,b,f,l,d)}Wi(t,F,Q);return;case"option":for(var ve in a)if(F=a[ve],a.hasOwnProperty(ve)&&F!=null&&!l.hasOwnProperty(ve))switch(ve){case"selected":t.selected=!1;break;default:xt(t,n,ve,null,l,F)}for(I in l)if(F=l[I],Q=a[I],l.hasOwnProperty(I)&&F!==Q&&(F!=null||Q!=null))switch(I){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:xt(t,n,I,F,l,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in a)F=a[Ce],a.hasOwnProperty(Ce)&&F!=null&&!l.hasOwnProperty(Ce)&&xt(t,n,Ce,null,l,F);for(H in l)if(F=l[H],Q=a[H],l.hasOwnProperty(H)&&F!==Q&&(F!=null||Q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,n));break;default:xt(t,n,H,F,l,Q)}return;default:if(Tr(n)){for(var bt in a)F=a[bt],a.hasOwnProperty(bt)&&F!==void 0&&!l.hasOwnProperty(bt)&&_d(t,n,bt,void 0,l,F);for(K in l)F=l[K],Q=a[K],!l.hasOwnProperty(K)||F===Q||F===void 0&&Q===void 0||_d(t,n,K,F,l,Q);return}}for(var L in a)F=a[L],a.hasOwnProperty(L)&&F!=null&&!l.hasOwnProperty(L)&&xt(t,n,L,null,l,F);for(ee in l)F=l[ee],Q=a[ee],!l.hasOwnProperty(ee)||F===Q||F==null&&Q==null||xt(t,n,ee,F,l,Q)}function dy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,b=f.initiatorType,_=f.duration;if(d&&_&&dy(b)){for(b=0,_=f.responseEnd,l+=1;l<a.length;l++){var I=a[l],H=I.startTime;if(H>_)break;var K=I.transferSize,ee=I.initiatorType;K&&dy(ee)&&(I=I.responseEnd,b+=K*(I<_?1:(_-H)/(I-H)))}if(--l,n+=8*(d+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ed=null,Td=null;function Au(t){return t.nodeType===9?t:t.ownerDocument}function my(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function wd(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Sd=null;function E2(){var t=window.event;return t&&t.type==="popstate"?t===Sd?!1:(Sd=t,!0):(Sd=null,!1)}var py=typeof setTimeout=="function"?setTimeout:void 0,T2=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,w2=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(t){return yy.resolve(null).then(t).catch(S2)}:py;function S2(t){setTimeout(function(){throw t})}function Br(t){return t==="head"}function xy(t,n){var a=n,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),Mo(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")jl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,jl(a);for(var d=a.firstChild;d;){var b=d.nextSibling,_=d.nodeName;d[Zn]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=b}}else a==="body"&&jl(t.ownerDocument.body);a=f}while(a);Mo(n)}function by(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Ad(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ad(a),$i(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function A2(t,n,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Zn])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Ui(t.nextSibling),t===null)break}return null}function N2(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ui(t.nextSibling),t===null))return null;return t}function vy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ui(t.nextSibling),t===null))return null;return t}function Nd(t){return t.data==="$?"||t.data==="$~"}function Rd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function R2(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ui(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Cd=null;function _y(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return Ui(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Ey(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function Ty(t,n,a){switch(n=Au(a),t){case"html":if(t=n.documentElement,!t)throw Error(s(452));return t;case"head":if(t=n.head,!t)throw Error(s(453));return t;case"body":if(t=n.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function jl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);$i(t)}var Pi=new Map,wy=new Set;function Nu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var rr=B.d;B.d={f:C2,r:I2,D:D2,C:M2,L:O2,m:k2,X:V2,S:j2,M:L2};function C2(){var t=rr.f(),n=xu();return t||n}function I2(t){var n=Ft(t);n!==null&&n.tag===5&&n.type==="form"?Bg(n):rr.r(t)}var Co=typeof document>"u"?null:document;function Sy(t,n,a){var l=Co;if(l&&typeof n=="string"&&n){var f=Pn(n);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),wy.has(f)||(wy.add(f),t={rel:t,crossOrigin:a,href:n},l.querySelector(f)===null&&(n=l.createElement("link"),Cn(n,"link",t),St(n),l.head.appendChild(n)))}}function D2(t){rr.D(t),Sy("dns-prefetch",t,null)}function M2(t,n){rr.C(t,n),Sy("preconnect",t,n)}function O2(t,n,a){rr.L(t,n,a);var l=Co;if(l&&t&&n){var f='link[rel="preload"][as="'+Pn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Pn(a.imageSizes)+'"]')):f+='[href="'+Pn(t)+'"]';var d=f;switch(n){case"style":d=Io(t);break;case"script":d=Do(t)}Pi.has(d)||(t=w({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Pi.set(d,t),l.querySelector(f)!==null||n==="style"&&l.querySelector(Vl(d))||n==="script"&&l.querySelector(Ll(d))||(n=l.createElement("link"),Cn(n,"link",t),St(n),l.head.appendChild(n)))}}function k2(t,n){rr.m(t,n);var a=Co;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+Pn(l)+'"][href="'+Pn(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Do(t)}if(!Pi.has(d)&&(t=w({rel:"modulepreload",href:t},n),Pi.set(d,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(d)))return}l=a.createElement("link"),Cn(l,"link",t),St(l),a.head.appendChild(l)}}}function j2(t,n,a){rr.S(t,n,a);var l=Co;if(l&&t){var f=_i(l).hoistableStyles,d=Io(t);n=n||"default";var b=f.get(d);if(!b){var _={loading:0,preload:null};if(b=l.querySelector(Vl(d)))_.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Pi.get(d))&&Id(t,a);var I=b=l.createElement("link");St(I),Cn(I,"link",t),I._p=new Promise(function(H,K){I.onload=H,I.onerror=K}),I.addEventListener("load",function(){_.loading|=1}),I.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Ru(b,n,l)}b={type:"stylesheet",instance:b,count:1,state:_},f.set(d,b)}}}function V2(t,n){rr.X(t,n);var a=Co;if(a&&t){var l=_i(a).hoistableScripts,f=Do(t),d=l.get(f);d||(d=a.querySelector(Ll(f)),d||(t=w({src:t,async:!0},n),(n=Pi.get(f))&&Dd(t,n),d=a.createElement("script"),St(d),Cn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function L2(t,n){rr.M(t,n);var a=Co;if(a&&t){var l=_i(a).hoistableScripts,f=Do(t),d=l.get(f);d||(d=a.querySelector(Ll(f)),d||(t=w({src:t,async:!0,type:"module"},n),(n=Pi.get(f))&&Dd(t,n),d=a.createElement("script"),St(d),Cn(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Ay(t,n,a,l){var f=(f=Oe.current)?Nu(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Io(a.href),a=_i(f).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Io(a.href);var d=_i(f).hoistableStyles,b=d.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,b),(d=f.querySelector(Vl(t)))&&!d._p&&(b.instance=d,b.state.loading=5),Pi.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Pi.set(t,a),d||U2(f,t,a,b.state))),n&&l===null)throw Error(s(528,""));return b}if(n&&l!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Do(a),a=_i(f).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Io(t){return'href="'+Pn(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function Ny(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function U2(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Cn(n,"link",a),St(n),t.head.appendChild(n))}function Do(t){return'[src="'+Pn(t)+'"]'}function Ll(t){return"script[async]"+t}function Ry(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+Pn(a.href)+'"]');if(l)return n.instance=l,St(l),l;var f=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),St(l),Cn(l,"style",f),Ru(l,a.precedence,t),n.instance=l;case"stylesheet":f=Io(a.href);var d=t.querySelector(Vl(f));if(d)return n.state.loading|=4,n.instance=d,St(d),d;l=Ny(a),(f=Pi.get(f))&&Id(l,f),d=(t.ownerDocument||t).createElement("link"),St(d);var b=d;return b._p=new Promise(function(_,I){b.onload=_,b.onerror=I}),Cn(d,"link",l),n.state.loading|=4,Ru(d,a.precedence,t),n.instance=d;case"script":return d=Do(a.src),(f=t.querySelector(Ll(d)))?(n.instance=f,St(f),f):(l=a,(f=Pi.get(d))&&(l=w({},a),Dd(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),St(f),Cn(f,"link",l),t.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Ru(l,a.precedence,t));return n.instance}function Ru(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,b=0;b<l.length;b++){var _=l[b];if(_.dataset.precedence===n)d=_;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function Id(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Dd(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Cu=null;function Cy(t,n,a){if(Cu===null){var l=new Map,f=Cu=new Map;f.set(a,l)}else f=Cu,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var d=a[f];if(!(d[Zn]||d[st]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var b=d.getAttribute(n)||"";b=t+b;var _=l.get(b);_?_.push(d):l.set(b,[d])}}return l}function Iy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function P2(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Dy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function z2(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Io(l.href),d=n.querySelector(Vl(f));if(d){n=d._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Iu.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=d,St(d);return}d=n.ownerDocument||n,l=Ny(l),(f=Pi.get(f))&&Id(l,f),d=d.createElement("link"),St(d);var b=d;b._p=new Promise(function(_,I){b.onload=_,b.onerror=I}),Cn(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Iu.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Md=0;function B2(t,n){return t.stylesheets&&t.count===0&&Mu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Mu(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+n);0<t.imgBytes&&Md===0&&(Md=62500*_2());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Mu(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>Md?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Iu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Du=null;function Mu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Du=new Map,n.forEach(q2,t),Du=null,Iu.call(t))}function q2(t,n){if(!(n.state.loading&4)){var a=Du.get(t);if(a)var l=a.get(null);else{a=new Map,Du.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var b=f[d];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}f=n.instance,b=f.getAttribute("data-precedence"),d=a.get(b)||l,d===l&&a.set(null,f),a.set(b,f),this.count++,l=Iu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),n.state.loading|=4}}var Ul={$$typeof:xe,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function H2(t,n,a,l,f,d,b,_,I){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function My(t,n,a,l,f,d,b,_,I,H,K,ee){return t=new H2(t,n,a,b,I,H,K,ee,_),n=1,d===!0&&(n|=24),d=wi(3,null,null,n),t.current=d,d.stateNode=t,n=fh(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:n},gh(d),t}function Oy(t){return t?(t=oo,t):oo}function ky(t,n,a,l,f,d){f=Oy(f),l.context===null?l.context=f:l.pendingContext=f,l=Ir(n),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Dr(t,l,n),a!==null&&(gi(a,t,n),pl(a,t,n))}function jy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Od(t,n){jy(t,n),(t=t.alternate)&&jy(t,n)}function Vy(t){if(t.tag===13||t.tag===31){var n=Sa(t,67108864);n!==null&&gi(n,t,67108864),Od(t,67108864)}}function Ly(t){if(t.tag===13||t.tag===31){var n=Ci();n=Ki(n);var a=Sa(t,n);a!==null&&gi(a,t,n),Od(t,n)}}var Ou=!0;function F2(t,n,a,l){var f=Y.T;Y.T=null;var d=B.p;try{B.p=2,kd(t,n,a,l)}finally{B.p=d,Y.T=f}}function G2(t,n,a,l){var f=Y.T;Y.T=null;var d=B.p;try{B.p=8,kd(t,n,a,l)}finally{B.p=d,Y.T=f}}function kd(t,n,a,l){if(Ou){var f=jd(l);if(f===null)vd(t,n,l,ku,a),Py(t,l);else if(Q2(f,t,n,a,l))l.stopPropagation();else if(Py(t,l),n&4&&-1<Y2.indexOf(t)){for(;f!==null;){var d=Ft(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var b=Vn(d.pendingLanes);if(b!==0){var _=d;for(_.pendingLanes|=2,_.entangledLanes|=2;b;){var I=1<<31-wt(b);_.entanglements[1]|=I,b&=~I}Ss(d),(ut&6)===0&&(pu=fn()+500,Ml(0))}}break;case 31:case 13:_=Sa(d,2),_!==null&&gi(_,d,2),xu(),Od(d,2)}if(d=jd(l),d===null&&vd(t,n,l,ku,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else vd(t,n,l,null,a)}}function jd(t){return t=ei(t),Vd(t)}var ku=null;function Vd(t){if(ku=null,t=ai(t),t!==null){var n=c(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=h(n),t!==null)return t;t=null}else if(a===31){if(t=y(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return ku=t,null}function Uy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case Yi:return 2;case Lt:return 8;case Qi:case ii:return 32;case yr:return 268435456;default:return 32}default:return 32}}var Ld=!1,qr=null,Hr=null,Fr=null,Pl=new Map,zl=new Map,Gr=[],Y2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Py(t,n){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Pl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(n.pointerId)}}function Bl(t,n,a,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},n!==null&&(n=Ft(n),n!==null&&Vy(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),t)}function Q2(t,n,a,l,f){switch(n){case"focusin":return qr=Bl(qr,t,n,a,l,f),!0;case"dragenter":return Hr=Bl(Hr,t,n,a,l,f),!0;case"mouseover":return Fr=Bl(Fr,t,n,a,l,f),!0;case"pointerover":var d=f.pointerId;return Pl.set(d,Bl(Pl.get(d)||null,t,n,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,zl.set(d,Bl(zl.get(d)||null,t,n,a,l,f)),!0}return!1}function zy(t){var n=ai(t.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=h(a),n!==null){t.blockedOn=n,nn(t.priority,function(){Ly(a)});return}}else if(n===31){if(n=y(a),n!==null){t.blockedOn=n,nn(t.priority,function(){Ly(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=jd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);qs=l,a.target.dispatchEvent(l),qs=null}else return n=Ft(a),n!==null&&Vy(n),t.blockedOn=a,!1;n.shift()}return!0}function By(t,n,a){ju(t)&&a.delete(n)}function K2(){Ld=!1,qr!==null&&ju(qr)&&(qr=null),Hr!==null&&ju(Hr)&&(Hr=null),Fr!==null&&ju(Fr)&&(Fr=null),Pl.forEach(By),zl.forEach(By)}function Vu(t,n){t.blockedOn===n&&(t.blockedOn=null,Ld||(Ld=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,K2)))}var Lu=null;function qy(t){Lu!==t&&(Lu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Lu===t&&(Lu=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],f=t[n+2];if(typeof l!="function"){if(Vd(l||a)===null)continue;break}var d=Ft(a);d!==null&&(t.splice(n,3),n-=3,jh(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Mo(t){function n(I){return Vu(I,t)}qr!==null&&Vu(qr,t),Hr!==null&&Vu(Hr,t),Fr!==null&&Vu(Fr,t),Pl.forEach(n),zl.forEach(n);for(var a=0;a<Gr.length;a++){var l=Gr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Gr.length&&(a=Gr[0],a.blockedOn===null);)zy(a),a.blockedOn===null&&Gr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],b=f[Ht]||null;if(typeof d=="function")b||qy(a);else if(b){var _=null;if(d&&d.hasAttribute("formAction")){if(f=d,b=d[Ht]||null)_=b.formAction;else if(Vd(f)!==null)continue}else _=b.action;typeof _=="function"?a[l+1]=_:(a.splice(l,3),l-=3),qy(a)}}}function Hy(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Ud(t){this._internalRoot=t}Uu.prototype.render=Ud.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,l=Ci();ky(a,l,t,n,null,null)},Uu.prototype.unmount=Ud.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ky(t.current,2,null,t,null,null),xu(),n[hn]=null}};function Uu(t){this._internalRoot=t}Uu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Er();t={blockedOn:null,target:t,priority:n};for(var a=0;a<Gr.length&&n!==0&&n<Gr[a].priority;a++);Gr.splice(a,0,t),a===0&&zy(t)}};var Fy=e.version;if(Fy!=="19.2.1")throw Error(s(527,Fy,"19.2.1"));B.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=x(n),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var $2={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pu.isDisabled&&Pu.supportsFiber)try{Kn=Pu.inject($2),Zt=Pu}catch{}}return Hl.createRoot=function(t,n){if(!o(t))throw Error(s(299));var a=!1,l="",f=Zg,d=Jg,b=Wg;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError)),n=My(t,1,!1,null,null,a,l,null,f,d,b,Hy),t[hn]=n.current,bd(t),new Ud(n)},Hl.hydrateRoot=function(t,n,a){if(!o(t))throw Error(s(299));var l=!1,f="",d=Zg,b=Jg,_=Wg,I=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(I=a.formState)),n=My(t,1,!0,n,a??null,l,f,I,d,b,_,Hy),n.context=Oy(null),a=n.current,l=Ci(),l=Ki(l),f=Ir(l),f.callback=null,Dr(a,f,l),a=l,n.current.lanes=a,vi(n,a),Ss(n),t[hn]=n.current,bd(t),new Uu(n)},Hl.version="19.2.1",Hl}var e1;function rE(){if(e1)return Bd.exports;e1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Bd.exports=sE(),Bd.exports}var aE=rE();const oE="modulepreload",lE=function(r){return"/hv-scheduler/"+r},t1={},cE=function(e,i,s){let o=Promise.resolve();if(i&&i.length>0){let x=function(E){return Promise.all(E.map(w=>Promise.resolve(w).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};var h=x;document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),p=y?.nonce||y?.getAttribute("nonce");o=x(i.map(E=>{if(E=lE(E),E in t1)return;t1[E]=!0;const w=E.endsWith(".css"),C=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${C}`))return;const U=document.createElement("link");if(U.rel=w?"stylesheet":oE,w||(U.as="script"),U.crossOrigin="",U.href=E,p&&U.setAttribute("nonce",p),document.head.appendChild(U),w)return new Promise((W,X)=>{U.addEventListener("load",W),U.addEventListener("error",()=>X(new Error(`Unable to preload CSS for ${E}`)))})}))}function c(y){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=y,window.dispatchEvent(p),!p.defaultPrevented)throw y}return o.then(y=>{for(const p of y||[])p.status==="rejected"&&c(p.reason);return e().catch(c)})};const uE=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fE=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,i,s)=>s?s.toUpperCase():i.toLowerCase()),n1=r=>{const e=fE(r);return e.charAt(0).toUpperCase()+e.slice(1)},Hx=(...r)=>r.filter((e,i,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===i).join(" ").trim(),hE=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var dE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const mE=ne.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:o="",children:c,iconNode:h,...y},p)=>ne.createElement("svg",{ref:p,...dE,width:e,height:e,stroke:r,strokeWidth:s?Number(i)*24/Number(e):i,className:Hx("lucide",o),...!c&&!hE(y)&&{"aria-hidden":"true"},...y},[...h.map(([x,E])=>ne.createElement(x,E)),...Array.isArray(c)?c:[c]]));const Ye=(r,e)=>{const i=ne.forwardRef(({className:s,...o},c)=>ne.createElement(mE,{ref:c,iconNode:e,className:Hx(`lucide-${uE(n1(r))}`,`lucide-${r}`,s),...o}));return i.displayName=n1(r),i};const gE=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]],i1=Ye("arrow-down-a-z",gE);const pE=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]],yE=Ye("arrow-down-z-a",pE);const xE=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],bE=Ye("briefcase",xE);const vE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zl=Ye("calendar",vE);const _E=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Fx=Ye("chart-column",_E);const EE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],TE=Ye("check",EE);const wE=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],af=Ye("chevron-left",wE);const SE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$r=Ye("chevron-right",SE);const AE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Jl=Ye("circle-alert",AE);const NE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Xr=Ye("circle-check-big",NE);const RE=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Gx=Ye("clock",RE);const CE=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],s1=Ye("cloud-off",CE);const IE=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],r1=Ye("cloud",IE);const DE=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Gd=Ye("download",DE);const ME=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],OE=Ye("ellipsis",ME);const kE=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],jE=Ye("eraser",kE);const VE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],a1=Ye("eye",VE);const LE=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],UE=Ye("file-braces",LE);const PE=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],zE=Ye("funnel",PE);const BE=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Yx=Ye("inbox",BE);const qE=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],HE=Ye("languages",qE);const FE=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Qx=Ye("layers",FE);const GE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yd=Ye("loader-circle",GE);const YE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],o1=Ye("lock",YE);const QE=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],KE=Ye("palette",QE);const $E=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],l1=Ye("pen-line",$E);const XE=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],ZE=Ye("plane",XE);const JE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],c1=Ye("plus",JE);const WE=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],eT=Ye("printer",WE);const tT=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],nT=Ye("redo",tT);const iT=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qu=Ye("refresh-cw",iT);const sT=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Kx=Ye("settings",sT);const rT=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],om=Ye("shield-alert",rT);const aT=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Pa=Ye("shield",aT);const oT=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],lT=Ye("stethoscope",oT);const cT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$x=Ye("triangle-alert",cT);const uT=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],fT=Ye("undo",uT);const hT=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],u1=Ye("upload",hT);const dT=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],mT=Ye("user-check",dT);const gT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],aa=Ye("x",gT),pT=()=>{};var f1={};const Xx=function(r){const e=[];let i=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},yT=function(r){const e=[];let i=0,s=0;for(;i<r.length;){const o=r[i++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[i++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[i++],h=r[i++],y=r[i++],p=((o&7)<<18|(c&63)<<12|(h&63)<<6|y&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=r[i++],h=r[i++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},Zx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],h=o+1<r.length,y=h?r[o+1]:0,p=o+2<r.length,x=p?r[o+2]:0,E=c>>2,w=(c&3)<<4|y>>4;let C=(y&15)<<2|x>>6,U=x&63;p||(U=64,h||(C=64)),s.push(i[E],i[w],i[C],i[U])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Xx(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):yT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=i[r.charAt(o++)],y=o<r.length?i[r.charAt(o)]:0;++o;const x=o<r.length?i[r.charAt(o)]:64;++o;const w=o<r.length?i[r.charAt(o)]:64;if(++o,c==null||y==null||x==null||w==null)throw new xT;const C=c<<2|y>>4;if(s.push(C),x!==64){const U=y<<4&240|x>>2;if(s.push(U),w!==64){const W=x<<6&192|w;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class xT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bT=function(r){const e=Xx(r);return Zx.encodeByteArray(e,!0)},of=function(r){return bT(r).replace(/\./g,"")},Jx=function(r){try{return Zx.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _T=()=>vT().__FIREBASE_DEFAULTS__,ET=()=>{if(typeof process>"u"||typeof f1>"u")return;const r=f1.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},TT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Jx(r[1]);return e&&JSON.parse(e)},Cf=()=>{try{return pT()||_T()||ET()||TT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Wx=r=>Cf()?.emulatorHosts?.[r],wT=r=>{const e=Wx(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),s]:[e.substring(0,i),s]},eb=()=>Cf()?.config,tb=r=>Cf()?.[`_${r}`];class ST{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,s))}}}function Qa(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lm(r){return(await fetch(r,{credentials:"include"})).ok}function AT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[of(JSON.stringify(i)),of(JSON.stringify(h)),""].join(".")}const Wl={};function NT(){const r={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?r.emulator.push(e):r.prod.push(e);return r}function RT(r){let e=document.getElementById(r),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),i=!0),{created:i,element:e}}let h1=!1;function nb(r,e){if(typeof window>"u"||typeof document>"u"||!Qa(window.location.host)||Wl[r]===e||Wl[r]||h1)return;Wl[r]=e;function i(C){return`__firebase__banner__${C}`}const s="__firebase__banner",c=NT().prod.length>0;function h(){const C=document.getElementById(s);C&&C.remove()}function y(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,U){C.setAttribute("width","24"),C.setAttribute("id",U),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function x(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{h1=!0,h()},C}function E(C,U){C.setAttribute("id",U),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function w(){const C=RT(s),U=i("text"),W=document.getElementById(U)||document.createElement("span"),X=i("learnmore"),oe=document.getElementById(X)||document.createElement("a"),me=i("preprendIcon"),Ne=document.getElementById(me)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const xe=C.element;y(xe),E(oe,X);const Fe=x();p(Ne,me),xe.append(Ne,W,oe,Fe),document.body.appendChild(xe)}c?(W.innerText="Preview backend disconnected.",Ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yn())}function IT(){const r=Cf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function OT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kT(){const r=Yn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function jT(){return!IT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VT(){try{return typeof indexedDB=="object"}catch{return!1}}function LT(){return new Promise((r,e)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(i){e(i)}})}const UT="FirebaseError";class pr extends Error{constructor(e,i,s){super(i),this.code=e,this.customData=s,this.name=UT,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yc.prototype.create)}}class yc{constructor(e,i,s){this.service=e,this.serviceName=i,this.errors=s}create(e,...i){const s=i[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?PT(c,s):"Error",y=`${this.serviceName}: ${h} (${o}).`;return new pr(o,y,s)}}function PT(r,e){return r.replace(zT,(i,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const zT=/\{\$([^}]+)}/g;function BT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function oa(r,e){if(r===e)return!0;const i=Object.keys(r),s=Object.keys(e);for(const o of i){if(!s.includes(o))return!1;const c=r[o],h=e[o];if(d1(c)&&d1(h)){if(!oa(c,h))return!1}else if(c!==h)return!1}for(const o of s)if(!i.includes(o))return!1;return!0}function d1(r){return r!==null&&typeof r=="object"}function xc(r){const e=[];for(const[i,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function qT(r,e){const i=new HT(r,e);return i.subscribe.bind(i)}class HT{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,s){let o;if(e===void 0&&i===void 0&&s===void 0)throw new Error("Missing Observer.");FT(e,["next","error","complete"])?o=e:o={next:e,error:i,complete:s},o.next===void 0&&(o.next=Qd),o.error===void 0&&(o.error=Qd),o.complete===void 0&&(o.complete=Qd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FT(r,e){if(typeof r!="object"||r===null)return!1;for(const i of e)if(i in r&&typeof r[i]=="function")return!0;return!1}function Qd(){}function Hi(r){return r&&r._delegate?r._delegate:r}class Ha{constructor(e,i,s){this.name=e,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ua="[DEFAULT]";class GT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const s=new ST;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QT(e))try{this.getOrInitializeService({instanceIdentifier:Ua})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Ua){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ua){return this.instances.has(e)}getOptions(e=Ua){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[c,h]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(c);s===y&&h.resolve(o)}return o}onInit(e,i){const s=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,i){const s=this.onInitCallbacks.get(i);if(s)for(const o of s)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:YT(e),options:i}),this.instances.set(e,s),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ua){return this.component?this.component.multipleInstances?e:Ua:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YT(r){return r===Ua?void 0:r}function QT(r){return r.instantiationMode==="EAGER"}class KT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new GT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}var Ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ze||(Ze={}));const $T={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},XT=Ze.INFO,ZT={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},JT=(r,e,...i)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=ZT[e];if(o)console[o](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Um{constructor(e){this.name=e,this._logLevel=XT,this._logHandler=JT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$T[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const WT=(r,e)=>e.some(i=>r instanceof i);let m1,g1;function ew(){return m1||(m1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tw(){return g1||(g1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ib=new WeakMap,lm=new WeakMap,sb=new WeakMap,Kd=new WeakMap,Pm=new WeakMap;function nw(r){const e=new Promise((i,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",h)},c=()=>{i(na(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",h)});return e.then(i=>{i instanceof IDBCursor&&ib.set(i,r)}).catch(()=>{}),Pm.set(e,r),e}function iw(r){if(lm.has(r))return;const e=new Promise((i,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",h),r.removeEventListener("abort",h)},c=()=>{i(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",h),r.addEventListener("abort",h)});lm.set(r,e)}let cm={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return lm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||sb.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return na(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function sw(r){cm=r(cm)}function rw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const s=r.call($d(this),e,...i);return sb.set(s,e.sort?e.sort():[e]),na(s)}:tw().includes(r)?function(...e){return r.apply($d(this),e),na(ib.get(this))}:function(...e){return na(r.apply($d(this),e))}}function aw(r){return typeof r=="function"?rw(r):(r instanceof IDBTransaction&&iw(r),WT(r,ew())?new Proxy(r,cm):r)}function na(r){if(r instanceof IDBRequest)return nw(r);if(Kd.has(r))return Kd.get(r);const e=aw(r);return e!==r&&(Kd.set(r,e),Pm.set(e,r)),e}const $d=r=>Pm.get(r);function ow(r,e,{blocked:i,upgrade:s,blocking:o,terminated:c}={}){const h=indexedDB.open(r,e),y=na(h);return s&&h.addEventListener("upgradeneeded",p=>{s(na(h.result),p.oldVersion,p.newVersion,na(h.transaction),p)}),i&&h.addEventListener("blocked",p=>i(p.oldVersion,p.newVersion,p)),y.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),y}const lw=["get","getKey","getAll","getAllKeys","count"],cw=["put","add","delete","clear"],Xd=new Map;function p1(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Xd.get(e))return Xd.get(e);const i=e.replace(/FromIndex$/,""),s=e!==i,o=cw.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(o||lw.includes(i)))return;const c=async function(h,...y){const p=this.transaction(h,o?"readwrite":"readonly");let x=p.store;return s&&(x=x.index(y.shift())),(await Promise.all([x[i](...y),o&&p.done]))[0]};return Xd.set(e,c),c}sw(r=>({...r,get:(e,i,s)=>p1(e,i)||r.get(e,i,s),has:(e,i)=>!!p1(e,i)||r.has(e,i)}));class uw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(fw(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function fw(r){return r.getComponent()?.type==="VERSION"}const um="@firebase/app",y1="0.14.6";const ur=new Um("@firebase/app"),hw="@firebase/app-compat",dw="@firebase/analytics-compat",mw="@firebase/analytics",gw="@firebase/app-check-compat",pw="@firebase/app-check",yw="@firebase/auth",xw="@firebase/auth-compat",bw="@firebase/database",vw="@firebase/data-connect",_w="@firebase/database-compat",Ew="@firebase/functions",Tw="@firebase/functions-compat",ww="@firebase/installations",Sw="@firebase/installations-compat",Aw="@firebase/messaging",Nw="@firebase/messaging-compat",Rw="@firebase/performance",Cw="@firebase/performance-compat",Iw="@firebase/remote-config",Dw="@firebase/remote-config-compat",Mw="@firebase/storage",Ow="@firebase/storage-compat",kw="@firebase/firestore",jw="@firebase/ai",Vw="@firebase/firestore-compat",Lw="firebase",Uw="12.6.0";const fm="[DEFAULT]",Pw={[um]:"fire-core",[hw]:"fire-core-compat",[mw]:"fire-analytics",[dw]:"fire-analytics-compat",[pw]:"fire-app-check",[gw]:"fire-app-check-compat",[yw]:"fire-auth",[xw]:"fire-auth-compat",[bw]:"fire-rtdb",[vw]:"fire-data-connect",[_w]:"fire-rtdb-compat",[Ew]:"fire-fn",[Tw]:"fire-fn-compat",[ww]:"fire-iid",[Sw]:"fire-iid-compat",[Aw]:"fire-fcm",[Nw]:"fire-fcm-compat",[Rw]:"fire-perf",[Cw]:"fire-perf-compat",[Iw]:"fire-rc",[Dw]:"fire-rc-compat",[Mw]:"fire-gcs",[Ow]:"fire-gcs-compat",[kw]:"fire-fst",[Vw]:"fire-fst-compat",[jw]:"fire-vertex","fire-js":"fire-js",[Lw]:"fire-js-all"};const lf=new Map,zw=new Map,hm=new Map;function x1(r,e){try{r.container.addComponent(e)}catch(i){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function Qo(r){const e=r.name;if(hm.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;hm.set(e,r);for(const i of lf.values())x1(i,r);for(const i of zw.values())x1(i,r);return!0}function If(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function zi(r){return r==null?!1:r.settings!==void 0}const Bw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ia=new yc("app","Firebase",Bw);class qw{constructor(e,i,s){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}const el=Uw;function dm(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const s={name:fm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ia.create("bad-app-name",{appName:String(o)});if(i||(i=eb()),!i)throw ia.create("no-options");const c=lf.get(o);if(c){if(oa(i,c.options)&&oa(s,c.config))return c;throw ia.create("duplicate-app",{appName:o})}const h=new KT(o);for(const p of hm.values())h.addComponent(p);const y=new qw(i,s,h);return lf.set(o,y),y}function cf(r=fm){const e=lf.get(r);if(!e&&r===fm&&eb())return dm();if(!e)throw ia.create("no-app",{appName:r});return e}function sa(r,e,i){let s=Pw[r]??r;i&&(s+=`-${i}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(h.join(" "));return}Qo(new Ha(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const Hw="firebase-heartbeat-database",Fw=1,rc="firebase-heartbeat-store";let Zd=null;function rb(){return Zd||(Zd=ow(Hw,Fw,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(rc)}catch(i){console.warn(i)}}}}).catch(r=>{throw ia.create("idb-open",{originalErrorMessage:r.message})})),Zd}async function Gw(r){try{const i=(await rb()).transaction(rc),s=await i.objectStore(rc).get(ab(r));return await i.done,s}catch(e){if(e instanceof pr)ur.warn(e.message);else{const i=ia.create("idb-get",{originalErrorMessage:e?.message});ur.warn(i.message)}}}async function b1(r,e){try{const s=(await rb()).transaction(rc,"readwrite");await s.objectStore(rc).put(e,ab(r)),await s.done}catch(i){if(i instanceof pr)ur.warn(i.message);else{const s=ia.create("idb-set",{originalErrorMessage:i?.message});ur.warn(s.message)}}}function ab(r){return`${r.name}!${r.options.appId}`}const Yw=1024,Qw=30;class Kw{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Xw(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=v1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Qw){const o=Zw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ur.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=v1(),{heartbeatsToSend:i,unsentEntries:s}=$w(this._heartbeatsCache.heartbeats),o=of(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ur.warn(e),""}}}function v1(){return new Date().toISOString().substring(0,10)}function $w(r,e=Yw){const i=[];let s=r.slice();for(const o of r){const c=i.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),_1(i)>e){c.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),_1(i)>e){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class Xw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VT()?LT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await Gw(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return b1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return b1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _1(r){return of(JSON.stringify({version:2,heartbeats:r})).length}function Zw(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,e=s);return e}function Jw(r){Qo(new Ha("platform-logger",e=>new uw(e),"PRIVATE")),Qo(new Ha("heartbeat",e=>new Kw(e),"PRIVATE")),sa(um,y1,r),sa(um,y1,"esm2020"),sa("fire-js","")}Jw("");var Ww="firebase",eS="12.6.0";sa(Ww,eS,"app");function ob(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tS=ob,lb=new yc("auth","Firebase",ob());const uf=new Um("@firebase/auth");function nS(r,...e){uf.logLevel<=Ze.WARN&&uf.warn(`Auth (${el}): ${r}`,...e)}function Ku(r,...e){uf.logLevel<=Ze.ERROR&&uf.error(`Auth (${el}): ${r}`,...e)}function fr(r,...e){throw zm(r,...e)}function Ns(r,...e){return zm(r,...e)}function cb(r,e,i){const s={...tS(),[e]:i};return new yc("auth","Firebase",s).create(e,{appName:r.name})}function lr(r){return cb(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zm(r,...e){if(typeof r!="string"){const i=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(i,...s)}return lb.create(r,...e)}function Me(r,e,...i){if(!r)throw zm(e,...i)}function ar(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ku(e),new Error(e)}function hr(r,e){r||ar(e)}function mm(){return typeof self<"u"&&self.location?.href||""}function iS(){return E1()==="http:"||E1()==="https:"}function E1(){return typeof self<"u"&&self.location?.protocol||null}function sS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iS()||MT()||"connection"in navigator)?navigator.onLine:!0}function rS(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class bc{constructor(e,i){this.shortDelay=e,this.longDelay=i,hr(i>e,"Short delay should be less than long delay!"),this.isMobile=CT()||OT()}get(){return sS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bm(r,e){hr(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}class ub{static initialize(e,i,s){this.fetchImpl=e,i&&(this.headersImpl=i),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const aS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const oS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lS=new bc(3e4,6e4);function vc(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function tl(r,e,i,s,o={}){return fb(r,o,async()=>{let c={},h={};s&&(e==="GET"?h=s:c={body:JSON.stringify(s)});const y=xc({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const x={method:e,headers:p,...c};return DT()||(x.referrerPolicy="no-referrer"),r.emulatorConfig&&Qa(r.emulatorConfig.host)&&(x.credentials="include"),ub.fetch()(await hb(r,r.config.apiHost,i,y),x)})}async function fb(r,e,i){r._canInitEmulator=!1;const s={...aS,...e};try{const o=new cS(r),c=await Promise.race([i(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw zu(r,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const y=c.ok?h.errorMessage:h.error.message,[p,x]=y.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw zu(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw zu(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw zu(r,"user-disabled",h);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw cb(r,E,x);fr(r,E)}}catch(o){if(o instanceof pr)throw o;fr(r,"network-request-failed",{message:String(o)})}}async function qm(r,e,i,s,o={}){const c=await tl(r,e,i,s,o);return"mfaPendingCredential"in c&&fr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function hb(r,e,i,s){const o=`${e}${i}?${s}`,c=r,h=c.config.emulator?Bm(r.config,o):`${r.config.apiScheme}://${o}`;return oS.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}class cS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,s)=>{this.timer=setTimeout(()=>s(Ns(this.auth,"network-request-failed")),lS.get())})}}function zu(r,e,i){const s={appName:r.name};i.email&&(s.email=i.email),i.phoneNumber&&(s.phoneNumber=i.phoneNumber);const o=Ns(r,e,s);return o.customData._tokenResponse=i,o}async function uS(r,e){return tl(r,"POST","/v1/accounts:delete",e)}async function ff(r,e){return tl(r,"POST","/v1/accounts:lookup",e)}function ec(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fS(r,e=!1){const i=Hi(r),s=await i.getIdToken(e),o=Hm(s);Me(o&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:s,authTime:ec(Jd(o.auth_time)),issuedAtTime:ec(Jd(o.iat)),expirationTime:ec(Jd(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Jd(r){return Number(r)*1e3}function Hm(r){const[e,i,s]=r.split(".");if(e===void 0||i===void 0||s===void 0)return Ku("JWT malformed, contained fewer than 3 sections"),null;try{const o=Jx(i);return o?JSON.parse(o):(Ku("Failed to decode base64 JWT payload"),null)}catch(o){return Ku("Caught error parsing JWT payload as JSON",o?.toString()),null}}function T1(r){const e=Hm(r);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ac(r,e,i=!1){if(i)return e;try{return await e}catch(s){throw s instanceof pr&&hS(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function hS({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class dS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gm{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hf(r){const e=r.auth,i=await r.getIdToken(),s=await ac(r,ff(e,{idToken:i}));Me(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?db(o.providerUserInfo):[],h=gS(r.providerData,c),y=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!h?.length,x=y?p:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new gm(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(r,E)}async function mS(r){const e=Hi(r);await hf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function db(r){return r.map(({providerId:e,...i})=>({providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}async function pS(r,e){const i=await fb(r,{},async()=>{const s=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,h=await hb(r,o,"/v1/token",`key=${c}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:y,body:s};return r.emulatorConfig&&Qa(r.emulatorConfig.host)&&(p.credentials="include"),ub.fetch()(h,p)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function yS(r,e){return tl(r,"POST","/v2/accounts:revokeToken",vc(r,e))}class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const i=T1(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:s,refreshToken:o,expiresIn:c}=await pS(e,i);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,i,s){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,i){const{refreshToken:s,accessToken:o,expirationTime:c}=i,h=new zo;return s&&(Me(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Me(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Me(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return ar("not implemented")}}function Qr(r,e){Me(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class as{constructor({uid:e,auth:i,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new dS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const i=await ac(this,this.stsTokenManager.getToken(this.auth,e));return Me(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return fS(this,e)}reload(){return mS(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>({...i})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new as({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),i&&await hf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zi(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await ac(this,uS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){const s=i.displayName??void 0,o=i.email??void 0,c=i.phoneNumber??void 0,h=i.photoURL??void 0,y=i.tenantId??void 0,p=i._redirectEventId??void 0,x=i.createdAt??void 0,E=i.lastLoginAt??void 0,{uid:w,emailVerified:C,isAnonymous:U,providerData:W,stsTokenManager:X}=i;Me(w&&X,e,"internal-error");const oe=zo.fromJSON(this.name,X);Me(typeof w=="string",e,"internal-error"),Qr(s,e.name),Qr(o,e.name),Me(typeof C=="boolean",e,"internal-error"),Me(typeof U=="boolean",e,"internal-error"),Qr(c,e.name),Qr(h,e.name),Qr(y,e.name),Qr(p,e.name),Qr(x,e.name),Qr(E,e.name);const me=new as({uid:w,auth:e,email:o,emailVerified:C,displayName:s,isAnonymous:U,photoURL:h,phoneNumber:c,tenantId:y,stsTokenManager:oe,createdAt:x,lastLoginAt:E});return W&&Array.isArray(W)&&(me.providerData=W.map(Ne=>({...Ne}))),p&&(me._redirectEventId=p),me}static async _fromIdTokenResponse(e,i,s=!1){const o=new zo;o.updateFromServerResponse(i);const c=new as({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await hf(c),c}static async _fromGetAccountInfoResponse(e,i,s){const o=i.users[0];Me(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?db(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,y=new zo;y.updateFromIdToken(s);const p=new as({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:h}),x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new gm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(p,x),p}}const w1=new Map;function or(r){hr(r instanceof Function,"Expected a class definition");let e=w1.get(r);return e?(hr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,w1.set(r,e),e)}class mb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}mb.type="NONE";const S1=mb;function $u(r,e,i){return`firebase:${r}:${e}:${i}`}class Bo{constructor(e,i,s){this.persistence=e,this.auth=i,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=$u(this.userKey,o.apiKey,c),this.fullPersistenceKey=$u("persistence",o.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await ff(this.auth,{idToken:e}).catch(()=>{});return i?as._fromGetAccountInfoResponse(this.auth,i,e):null}return as._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,s="authUser"){if(!i.length)return new Bo(or(S1),e,s);const o=(await Promise.all(i.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=o[0]||or(S1);const h=$u(s,e.config.apiKey,e.name);let y=null;for(const x of i)try{const E=await x._get(h);if(E){let w;if(typeof E=="string"){const C=await ff(e,{idToken:E}).catch(()=>{});if(!C)break;w=await as._fromGetAccountInfoResponse(e,C,E)}else w=as._fromJSON(e,E);x!==c&&(y=w),c=x;break}}catch{}const p=o.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Bo(c,e,s):(c=p[0],y&&await c._set(h,y.toJSON()),await Promise.all(i.map(async x=>{if(x!==c)try{await x._remove(h)}catch{}})),new Bo(c,e,s))}}function A1(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vb(e))return"Blackberry";if(_b(e))return"Webos";if(pb(e))return"Safari";if((e.includes("chrome/")||yb(e))&&!e.includes("edge/"))return"Chrome";if(bb(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(i);if(s?.length===2)return s[1]}return"Other"}function gb(r=Yn()){return/firefox\//i.test(r)}function pb(r=Yn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yb(r=Yn()){return/crios\//i.test(r)}function xb(r=Yn()){return/iemobile/i.test(r)}function bb(r=Yn()){return/android/i.test(r)}function vb(r=Yn()){return/blackberry/i.test(r)}function _b(r=Yn()){return/webos/i.test(r)}function Fm(r=Yn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function xS(r=Yn()){return Fm(r)&&!!window.navigator?.standalone}function bS(){return kT()&&document.documentMode===10}function Eb(r=Yn()){return Fm(r)||bb(r)||_b(r)||vb(r)||/windows phone/i.test(r)||xb(r)}function Tb(r,e=[]){let i;switch(r){case"Browser":i=A1(Yn());break;case"Worker":i=`${A1(Yn())}-${r}`;break;default:i=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${el}/${s}`}class vS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const s=c=>new Promise((h,y)=>{try{const p=e(c);h(p)}catch(p){y(p)}});s.onAbort=i,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const s of this.queue)await s(e),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const o of i)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function _S(r,e={}){return tl(r,"GET","/v2/passwordPolicy",vc(r,e))}const ES=6;class TS{constructor(e){const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??ES,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(e,i){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(i.meetsMinPasswordLength=e.length>=s),o&&(i.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(i,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,i,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class wS{constructor(e,i,s,o){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new N1(this),this.idTokenSubscription=new N1(this),this.beforeStateQueue=new vS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=or(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Bo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await ff(this,{idToken:e}),s=await as._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(s)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(zi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=s?._redirectEventId,y=await this.tryRedirectSignIn(e);(!c||c===h)&&y?.user&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await hf(e)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zi(this.app))return Promise.reject(lr(this));const i=e?Hi(e):null;return i&&Me(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zi(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zi(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _S(this),i=new TS(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yc("auth","Firebase",e())}onAuthStateChanged(e,i,s){return this.registerStateListener(this.authStateSubscription,e,i,s)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,s){return this.registerStateListener(this.idTokenSubscription,e,i,s)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(s.tenantId=this.tenantId),await yS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,i){const s=await this.getOrInitRedirectPersistenceManager(i);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&or(e)||this._popupRedirectResolver;Me(i,this,"argument-error"),this.redirectPersistenceManager=await Bo.create(this,[or(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,s,o){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let h=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(y,this,"internal-error"),y.then(()=>{h||c(this.currentUser)}),typeof i=="function"){const p=e.addObserver(i,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(i);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(zi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&nS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function _c(r){return Hi(r)}class N1{constructor(e){this.auth=e,this.observer=null,this.addObserver=qT(i=>this.observer=i)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function SS(r){Gm=r}function AS(r){return Gm.loadJS(r)}function NS(){return Gm.gapiScript}function RS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function CS(r,e){const i=If(r,"auth");if(i.isInitialized()){const o=i.getImmediate(),c=i.getOptions();if(oa(c,e??{}))return o;fr(o,"already-initialized")}return i.initialize({options:e})}function IS(r,e){const i=e?.persistence||[],s=(Array.isArray(i)?i:[i]).map(or);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function DS(r,e,i){const s=_c(r);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=wb(e),{host:h,port:y}=MS(e),p=y===null?"":`:${y}`,x={url:`${c}//${h}${p}/`},E=Object.freeze({host:h,port:y,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(oa(x,s.config.emulator)&&oa(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=x,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Qa(h)?(Lm(`${c}//${h}${p}`),nb("Auth",!0)):OS()}function wb(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function MS(r){const e=wb(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!i)return{host:"",port:null};const s=i[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:R1(s.substr(c.length+1))}}else{const[c,h]=s.split(":");return{host:c,port:R1(h)}}}function R1(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function OS(){function r(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Sb{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,i){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}async function qo(r,e){return qm(r,"POST","/v1/accounts:signInWithIdp",vc(r,e))}const kS="http://localhost";class Fa extends Sb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new Fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):fr("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=i;if(!s||!o)return null;const h=new Fa(s,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const i=this.buildRequest();return qo(e,i)}_linkToIdToken(e,i){const s=this.buildRequest();return s.idToken=i,qo(e,s)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,qo(e,i)}buildRequest(){const e={requestUri:kS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=xc(i)}return e}}class Ab{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ec extends Ab{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Zr extends Ec{constructor(){super("facebook.com")}static credential(e){return Fa._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zr.credential(e.oauthAccessToken)}catch{return null}}}Zr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zr.PROVIDER_ID="facebook.com";class Jr extends Ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return Fa._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:s}=e;if(!i&&!s)return null;try{return Jr.credential(i,s)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";class Wr extends Ec{constructor(){super("github.com")}static credential(e){return Fa._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";class ea extends Ec{constructor(){super("twitter.com")}static credential(e,i){return Fa._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:s}=e;if(!i||!s)return null;try{return ea.credential(i,s)}catch{return null}}}ea.TWITTER_SIGN_IN_METHOD="twitter.com";ea.PROVIDER_ID="twitter.com";async function jS(r,e){return qm(r,"POST","/v1/accounts:signUp",vc(r,e))}class dr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,s,o=!1){const c=await as._fromIdTokenResponse(e,s,o),h=C1(s);return new dr({user:c,providerId:h,_tokenResponse:s,operationType:i})}static async _forOperation(e,i,s){await e._updateTokensIfNecessary(s,!0);const o=C1(s);return new dr({user:e,providerId:o,_tokenResponse:s,operationType:i})}}function C1(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function VS(r){if(zi(r.app))return Promise.reject(lr(r));const e=_c(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new dr({user:e.currentUser,providerId:null,operationType:"signIn"});const i=await jS(e,{returnSecureToken:!0}),s=await dr._fromIdTokenResponse(e,"signIn",i,!0);return await e._updateCurrentUser(s.user),s}class df extends pr{constructor(e,i,s,o){super(i.code,i.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,df.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,i,s,o){return new df(e,i,s,o)}}function Nb(r,e,i,s){return(e==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?df._fromErrorAndOperation(r,c,e,s):c})}async function LS(r,e,i=!1){const s=await ac(r,e._linkToIdToken(r.auth,await r.getIdToken()),i);return dr._forOperation(r,"link",s)}async function US(r,e,i=!1){const{auth:s}=r;if(zi(s.app))return Promise.reject(lr(s));const o="reauthenticate";try{const c=await ac(r,Nb(s,o,e,r),i);Me(c.idToken,s,"internal-error");const h=Hm(c.idToken);Me(h,s,"internal-error");const{sub:y}=h;return Me(r.uid===y,s,"user-mismatch"),dr._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&fr(s,"user-mismatch"),c}}async function PS(r,e,i=!1){if(zi(r.app))return Promise.reject(lr(r));const s="signIn",o=await Nb(r,s,e),c=await dr._fromIdTokenResponse(r,s,o);return i||await r._updateCurrentUser(c.user),c}async function zS(r,e){return qm(r,"POST","/v1/accounts:signInWithCustomToken",vc(r,e))}async function pm(r,e){if(zi(r.app))return Promise.reject(lr(r));const i=_c(r),s=await zS(i,{token:e,returnSecureToken:!0}),o=await dr._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}function BS(r,e,i,s){return Hi(r).onIdTokenChanged(e,i,s)}function qS(r,e,i){return Hi(r).beforeAuthStateChanged(e,i)}function HS(r){return Hi(r).signOut()}const mf="__sak";class Rb{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(mf,"1"),this.storage.removeItem(mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const FS=1e3,GS=10;class Cb extends Rb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Eb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const s=this.storage.getItem(i),o=this.localCache[i];s!==o&&e(i,o,s)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((h,y,p)=>{this.notifyListeners(h,p)});return}const s=e.key;i?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!i&&this.localCache[s]===h||this.notifyListeners(s,h)},c=this.storage.getItem(s);bS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,GS):o()}notifyListeners(e,i){this.localCache[e]=i;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:s}),!0)})},FS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}Cb.type="LOCAL";const YS=Cb;class Ib extends Rb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}Ib.type="SESSION";const Db=Ib;function QS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(o=>o.isListeningto(e));if(i)return i;const s=new Df(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:s,eventType:o,data:c}=i.data,h=this.handlersMap[o];if(!h?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const y=Array.from(h).map(async x=>x(i.origin,c)),p=await QS(y);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];function Ym(r="",e=10){let i="";for(let s=0;s<e;s++)i+=Math.floor(Math.random()*10);return r+i}class KS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((y,p)=>{const x=Ym("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(w){const C=w;if(C.data.eventId===x)switch(C.data.status){case"ack":clearTimeout(E),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),y(C.data.response);break;default:clearTimeout(E),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:x,data:i},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Rs(){return window}function $S(r){Rs().location.href=r}function Mb(){return typeof Rs().WorkerGlobalScope<"u"&&typeof Rs().importScripts=="function"}async function XS(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZS(){return navigator?.serviceWorker?.controller||null}function JS(){return Mb()?self:null}const Ob="firebaseLocalStorageDb",WS=1,gf="firebaseLocalStorage",kb="fbase_key";class Tc{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Mf(r,e){return r.transaction([gf],e?"readwrite":"readonly").objectStore(gf)}function eA(){const r=indexedDB.deleteDatabase(Ob);return new Tc(r).toPromise()}function ym(){const r=indexedDB.open(Ob,WS);return new Promise((e,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(gf,{keyPath:kb})}catch(o){i(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(gf)?e(s):(s.close(),await eA(),e(await ym()))})})}async function I1(r,e,i){const s=Mf(r,!0).put({[kb]:e,value:i});return new Tc(s).toPromise()}async function tA(r,e){const i=Mf(r,!1).get(e),s=await new Tc(i).toPromise();return s===void 0?null:s.value}function D1(r,e){const i=Mf(r,!0).delete(e);return new Tc(i).toPromise()}const nA=800,iA=3;class jb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ym(),this.db)}async _withRetries(e){let i=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(i++>iA)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(JS()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await XS(),!this.activeServiceWorker)return;this.sender=new KS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ym();return await I1(e,mf,"1"),await D1(e,mf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>I1(s,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(s=>tA(s,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>D1(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Mf(o,!1).getAll();return new Tc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),i.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),i.push(o));return i}notifyListeners(e,i){this.localCache[e]=i;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jb.type="LOCAL";const sA=jb;new bc(3e4,6e4);function rA(r,e){return e?or(e):(Me(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Qm extends Sb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,i){return qo(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function aA(r){return PS(r.auth,new Qm(r),r.bypassAuthState)}function oA(r){const{auth:e,user:i}=r;return Me(i,e,"internal-error"),US(i,new Qm(r),r.bypassAuthState)}async function lA(r){const{auth:e,user:i}=r;return Me(i,e,"internal-error"),LS(i,new Qm(r),r.bypassAuthState)}class Vb{constructor(e,i,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:s,postBody:o,tenantId:c,error:h,type:y}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:i,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(p))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aA;case"linkViaPopup":case"linkViaRedirect":return lA;case"reauthViaPopup":case"reauthViaRedirect":return oA;default:fr(this.auth,"internal-error")}}resolve(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cA=new bc(2e3,1e4);class Po extends Vb{constructor(e,i,s,o,c){super(e,i,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const e=Ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cA.get())};e()}}Po.currentPopupAction=null;const uA="pendingRedirect",Xu=new Map;class fA extends Vb{constructor(e,i,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,s),this.eventId=null}async execute(){let e=Xu.get(this.auth._key());if(!e){try{const s=await hA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(i){e=()=>Promise.reject(i)}Xu.set(this.auth._key(),e)}return this.bypassAuthState||Xu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hA(r,e){const i=gA(e),s=mA(r);if(!await s._isAvailable())return!1;const o=await s._get(i)==="true";return await s._remove(i),o}function dA(r,e){Xu.set(r._key(),e)}function mA(r){return or(r._redirectPersistence)}function gA(r){return $u(uA,r.config.apiKey,r.name)}async function pA(r,e,i=!1){if(zi(r.app))return Promise.reject(lr(r));const s=_c(r),o=rA(s,e),h=await new fA(s,o,i).execute();return h&&!i&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const yA=600*1e3;class xA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(i=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bA(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){if(e.error&&!Lb(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";i.onError(Ns(this.auth,s))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const s=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yA&&this.cachedEventUids.clear(),this.cachedEventUids.has(M1(e))}saveEventToCache(e){this.cachedEventUids.add(M1(e)),this.lastProcessedEventTime=Date.now()}}function M1(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Lb({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function bA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lb(r);default:return!1}}async function vA(r,e={}){return tl(r,"GET","/v1/projects",e)}const _A=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EA=/^https?/;async function TA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await vA(r);for(const i of e)try{if(wA(i))return}catch{}fr(r,"unauthorized-domain")}function wA(r){const e=mm(),{protocol:i,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&h.hostname===s}if(!EA.test(i))return!1;if(_A.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const SA=new bc(3e4,6e4);function O1(){const r=Rs().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function AA(r){return new Promise((e,i)=>{function s(){O1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O1(),i(Ns(r,"network-request-failed"))},timeout:SA.get()})}if(Rs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Rs().gapi?.load)s();else{const o=RS("iframefcb");return Rs()[o]=()=>{gapi.load?s():i(Ns(r,"network-request-failed"))},AS(`${NS()}?onload=${o}`).catch(c=>i(c))}}).catch(e=>{throw Zu=null,e})}let Zu=null;function NA(r){return Zu=Zu||AA(r),Zu}const RA=new bc(5e3,15e3),CA="__/auth/iframe",IA="emulator/auth/iframe",DA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function OA(r){const e=r.config;Me(e.authDomain,r,"auth-domain-config-required");const i=e.emulator?Bm(e,IA):`https://${r.config.authDomain}/${CA}`,s={apiKey:e.apiKey,appName:r.name,v:el},o=MA.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${i}?${xc(s).slice(1)}`}async function kA(r){const e=await NA(r),i=Rs().gapi;return Me(i,r,"internal-error"),e.open({where:document.body,url:OA(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DA,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const h=Ns(r,"network-request-failed"),y=Rs().setTimeout(()=>{c(h)},RA.get());function p(){Rs().clearTimeout(y),o(s)}s.ping(p).then(p,()=>{c(h)})}))}const jA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VA=500,LA=600,UA="_blank",PA="http://localhost";class k1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zA(r,e,i,s=VA,o=LA){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const p={...jA,width:s.toString(),height:o.toString(),top:c,left:h},x=Yn().toLowerCase();i&&(y=yb(x)?UA:i),gb(x)&&(e=e||PA,p.scrollbars="yes");const E=Object.entries(p).reduce((C,[U,W])=>`${C}${U}=${W},`,"");if(xS(x)&&y!=="_self")return BA(e||"",y),new k1(null);const w=window.open(e||"",y,E);Me(w,r,"popup-blocked");try{w.focus()}catch{}return new k1(w)}function BA(r,e){const i=document.createElement("a");i.href=r,i.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(s)}const qA="__/auth/handler",HA="emulator/auth/handler",FA=encodeURIComponent("fac");async function j1(r,e,i,s,o,c){Me(r.config.authDomain,r,"auth-domain-config-required"),Me(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:s,v:el,eventId:o};if(e instanceof Ab){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",BT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,w]of Object.entries({}))h[E]=w}if(e instanceof Ec){const E=e.getScopes().filter(w=>w!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const y=h;for(const E of Object.keys(y))y[E]===void 0&&delete y[E];const p=await r._getAppCheckToken(),x=p?`#${FA}=${encodeURIComponent(p)}`:"";return`${GA(r)}?${xc(y).slice(1)}${x}`}function GA({config:r}){return r.emulator?Bm(r,HA):`https://${r.authDomain}/${qA}`}const Wd="webStorageSupport";class YA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Db,this._completeRedirectFn=pA,this._overrideRedirectResult=dA}async _openPopup(e,i,s,o){hr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await j1(e,i,s,mm(),o);return zA(e,c,Ym())}async _openRedirect(e,i,s,o){await this._originValidation(e);const c=await j1(e,i,s,mm(),o);return $S(c),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:o,promise:c}=this.eventManagers[i];return o?Promise.resolve(o):(hr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[i]={promise:s},s.catch(()=>{delete this.eventManagers[i]}),s}async initAndGetManager(e){const i=await kA(e),s=new xA(e);return i.register("authEvent",o=>(Me(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=i,s}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(Wd,{type:Wd},o=>{const c=o?.[0]?.[Wd];c!==void 0&&i(!!c),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=TA(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return Eb()||pb()||Fm()}}const QA=YA;var V1="@firebase/auth",L1="1.11.1";class KA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $A(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XA(r){Qo(new Ha("auth",(e,{options:i})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:y}=s.options;Me(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tb(r)},x=new wS(s,o,c,p);return IS(x,i),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,s)=>{e.getProvider("auth-internal").initialize()})),Qo(new Ha("auth-internal",e=>{const i=_c(e.getProvider("auth").getImmediate());return(s=>new KA(s))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),sa(V1,L1,$A(r)),sa(V1,L1,"esm2020")}const ZA=300,JA=tb("authIdTokenMaxAge")||ZA;let U1=null;const WA=r=>async e=>{const i=e&&await e.getIdTokenResult(),s=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(s&&s>JA)return;const o=i?.token;U1!==o&&(U1=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Gl(r=cf()){const e=If(r,"auth");if(e.isInitialized())return e.getImmediate();const i=CS(r,{popupRedirectResolver:QA,persistence:[sA,YS,Db]}),s=tb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const h=WA(c.toString());qS(i,h,()=>h(i.currentUser)),BS(i,y=>h(y))}}const o=Wx("auth");return o&&DS(i,`http://${o}`),i}function e4(){return document.getElementsByTagName("head")?.[0]??document}SS({loadJS(r){return new Promise((e,i)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=Ns("internal-error");c.customData=o,i(c)},s.type="text/javascript",s.charset="UTF-8",e4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XA("Browser");var P1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ra,Ub;(function(){var r;function e(D,R){function A(){}A.prototype=R.prototype,D.F=R.prototype,D.prototype=new A,D.prototype.constructor=D,D.D=function(O,M,V){for(var N=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)N[Be-2]=arguments[Be];return R.prototype[M].apply(O,N)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,i),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,A){A||(A=0);const O=Array(16);if(typeof R=="string")for(var M=0;M<16;++M)O[M]=R.charCodeAt(A++)|R.charCodeAt(A++)<<8|R.charCodeAt(A++)<<16|R.charCodeAt(A++)<<24;else for(M=0;M<16;++M)O[M]=R[A++]|R[A++]<<8|R[A++]<<16|R[A++]<<24;R=D.g[0],A=D.g[1],M=D.g[2];let V=D.g[3],N;N=R+(V^A&(M^V))+O[0]+3614090360&4294967295,R=A+(N<<7&4294967295|N>>>25),N=V+(M^R&(A^M))+O[1]+3905402710&4294967295,V=R+(N<<12&4294967295|N>>>20),N=M+(A^V&(R^A))+O[2]+606105819&4294967295,M=V+(N<<17&4294967295|N>>>15),N=A+(R^M&(V^R))+O[3]+3250441966&4294967295,A=M+(N<<22&4294967295|N>>>10),N=R+(V^A&(M^V))+O[4]+4118548399&4294967295,R=A+(N<<7&4294967295|N>>>25),N=V+(M^R&(A^M))+O[5]+1200080426&4294967295,V=R+(N<<12&4294967295|N>>>20),N=M+(A^V&(R^A))+O[6]+2821735955&4294967295,M=V+(N<<17&4294967295|N>>>15),N=A+(R^M&(V^R))+O[7]+4249261313&4294967295,A=M+(N<<22&4294967295|N>>>10),N=R+(V^A&(M^V))+O[8]+1770035416&4294967295,R=A+(N<<7&4294967295|N>>>25),N=V+(M^R&(A^M))+O[9]+2336552879&4294967295,V=R+(N<<12&4294967295|N>>>20),N=M+(A^V&(R^A))+O[10]+4294925233&4294967295,M=V+(N<<17&4294967295|N>>>15),N=A+(R^M&(V^R))+O[11]+2304563134&4294967295,A=M+(N<<22&4294967295|N>>>10),N=R+(V^A&(M^V))+O[12]+1804603682&4294967295,R=A+(N<<7&4294967295|N>>>25),N=V+(M^R&(A^M))+O[13]+4254626195&4294967295,V=R+(N<<12&4294967295|N>>>20),N=M+(A^V&(R^A))+O[14]+2792965006&4294967295,M=V+(N<<17&4294967295|N>>>15),N=A+(R^M&(V^R))+O[15]+1236535329&4294967295,A=M+(N<<22&4294967295|N>>>10),N=R+(M^V&(A^M))+O[1]+4129170786&4294967295,R=A+(N<<5&4294967295|N>>>27),N=V+(A^M&(R^A))+O[6]+3225465664&4294967295,V=R+(N<<9&4294967295|N>>>23),N=M+(R^A&(V^R))+O[11]+643717713&4294967295,M=V+(N<<14&4294967295|N>>>18),N=A+(V^R&(M^V))+O[0]+3921069994&4294967295,A=M+(N<<20&4294967295|N>>>12),N=R+(M^V&(A^M))+O[5]+3593408605&4294967295,R=A+(N<<5&4294967295|N>>>27),N=V+(A^M&(R^A))+O[10]+38016083&4294967295,V=R+(N<<9&4294967295|N>>>23),N=M+(R^A&(V^R))+O[15]+3634488961&4294967295,M=V+(N<<14&4294967295|N>>>18),N=A+(V^R&(M^V))+O[4]+3889429448&4294967295,A=M+(N<<20&4294967295|N>>>12),N=R+(M^V&(A^M))+O[9]+568446438&4294967295,R=A+(N<<5&4294967295|N>>>27),N=V+(A^M&(R^A))+O[14]+3275163606&4294967295,V=R+(N<<9&4294967295|N>>>23),N=M+(R^A&(V^R))+O[3]+4107603335&4294967295,M=V+(N<<14&4294967295|N>>>18),N=A+(V^R&(M^V))+O[8]+1163531501&4294967295,A=M+(N<<20&4294967295|N>>>12),N=R+(M^V&(A^M))+O[13]+2850285829&4294967295,R=A+(N<<5&4294967295|N>>>27),N=V+(A^M&(R^A))+O[2]+4243563512&4294967295,V=R+(N<<9&4294967295|N>>>23),N=M+(R^A&(V^R))+O[7]+1735328473&4294967295,M=V+(N<<14&4294967295|N>>>18),N=A+(V^R&(M^V))+O[12]+2368359562&4294967295,A=M+(N<<20&4294967295|N>>>12),N=R+(A^M^V)+O[5]+4294588738&4294967295,R=A+(N<<4&4294967295|N>>>28),N=V+(R^A^M)+O[8]+2272392833&4294967295,V=R+(N<<11&4294967295|N>>>21),N=M+(V^R^A)+O[11]+1839030562&4294967295,M=V+(N<<16&4294967295|N>>>16),N=A+(M^V^R)+O[14]+4259657740&4294967295,A=M+(N<<23&4294967295|N>>>9),N=R+(A^M^V)+O[1]+2763975236&4294967295,R=A+(N<<4&4294967295|N>>>28),N=V+(R^A^M)+O[4]+1272893353&4294967295,V=R+(N<<11&4294967295|N>>>21),N=M+(V^R^A)+O[7]+4139469664&4294967295,M=V+(N<<16&4294967295|N>>>16),N=A+(M^V^R)+O[10]+3200236656&4294967295,A=M+(N<<23&4294967295|N>>>9),N=R+(A^M^V)+O[13]+681279174&4294967295,R=A+(N<<4&4294967295|N>>>28),N=V+(R^A^M)+O[0]+3936430074&4294967295,V=R+(N<<11&4294967295|N>>>21),N=M+(V^R^A)+O[3]+3572445317&4294967295,M=V+(N<<16&4294967295|N>>>16),N=A+(M^V^R)+O[6]+76029189&4294967295,A=M+(N<<23&4294967295|N>>>9),N=R+(A^M^V)+O[9]+3654602809&4294967295,R=A+(N<<4&4294967295|N>>>28),N=V+(R^A^M)+O[12]+3873151461&4294967295,V=R+(N<<11&4294967295|N>>>21),N=M+(V^R^A)+O[15]+530742520&4294967295,M=V+(N<<16&4294967295|N>>>16),N=A+(M^V^R)+O[2]+3299628645&4294967295,A=M+(N<<23&4294967295|N>>>9),N=R+(M^(A|~V))+O[0]+4096336452&4294967295,R=A+(N<<6&4294967295|N>>>26),N=V+(A^(R|~M))+O[7]+1126891415&4294967295,V=R+(N<<10&4294967295|N>>>22),N=M+(R^(V|~A))+O[14]+2878612391&4294967295,M=V+(N<<15&4294967295|N>>>17),N=A+(V^(M|~R))+O[5]+4237533241&4294967295,A=M+(N<<21&4294967295|N>>>11),N=R+(M^(A|~V))+O[12]+1700485571&4294967295,R=A+(N<<6&4294967295|N>>>26),N=V+(A^(R|~M))+O[3]+2399980690&4294967295,V=R+(N<<10&4294967295|N>>>22),N=M+(R^(V|~A))+O[10]+4293915773&4294967295,M=V+(N<<15&4294967295|N>>>17),N=A+(V^(M|~R))+O[1]+2240044497&4294967295,A=M+(N<<21&4294967295|N>>>11),N=R+(M^(A|~V))+O[8]+1873313359&4294967295,R=A+(N<<6&4294967295|N>>>26),N=V+(A^(R|~M))+O[15]+4264355552&4294967295,V=R+(N<<10&4294967295|N>>>22),N=M+(R^(V|~A))+O[6]+2734768916&4294967295,M=V+(N<<15&4294967295|N>>>17),N=A+(V^(M|~R))+O[13]+1309151649&4294967295,A=M+(N<<21&4294967295|N>>>11),N=R+(M^(A|~V))+O[4]+4149444226&4294967295,R=A+(N<<6&4294967295|N>>>26),N=V+(A^(R|~M))+O[11]+3174756917&4294967295,V=R+(N<<10&4294967295|N>>>22),N=M+(R^(V|~A))+O[2]+718787259&4294967295,M=V+(N<<15&4294967295|N>>>17),N=A+(V^(M|~R))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+V&4294967295}s.prototype.v=function(D,R){R===void 0&&(R=D.length);const A=R-this.blockSize,O=this.C;let M=this.h,V=0;for(;V<R;){if(M==0)for(;V<=A;)o(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<R;)if(O[M++]=D.charCodeAt(V++),M==this.blockSize){o(this,O),M=0;break}}else for(;V<R;)if(O[M++]=D[V++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=R},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;R=this.o*8;for(var A=D.length-8;A<D.length;++A)D[A]=R&255,R/=256;for(this.v(D),D=Array(16),R=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)D[R++]=this.g[A]>>>O&255;return D};function c(D,R){var A=y;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=R(D)}function h(D,R){this.h=R;const A=[];let O=!0;for(let M=D.length-1;M>=0;M--){const V=D[M]|0;O&&V==R||(A[M]=V,O=!1)}this.g=A}var y={};function p(D){return-128<=D&&D<128?c(D,function(R){return new h([R|0],R<0?-1:0)}):new h([D|0],D<0?-1:0)}function x(D){if(isNaN(D)||!isFinite(D))return w;if(D<0)return oe(x(-D));const R=[];let A=1;for(let O=0;D>=A;O++)R[O]=D/A|0,A*=4294967296;return new h(R,0)}function E(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return oe(E(D.substring(1),R));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=x(Math.pow(R,8));let O=w;for(let V=0;V<D.length;V+=8){var M=Math.min(8,D.length-V);const N=parseInt(D.substring(V,V+M),R);M<8?(M=x(Math.pow(R,M)),O=O.j(M).add(x(N))):(O=O.j(A),O=O.add(x(N)))}return O}var w=p(0),C=p(1),U=p(16777216);r=h.prototype,r.m=function(){if(X(this))return-oe(this).m();let D=0,R=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);D+=(O>=0?O:4294967296+O)*R,R*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(W(this))return"0";if(X(this))return"-"+oe(this).toString(D);const R=x(Math.pow(D,6));var A=this;let O="";for(;;){const M=Fe(A,R).g;A=me(A,M.j(R));let V=((A.g.length>0?A.g[0]:A.h)>>>0).toString(D);if(A=M,W(A))return V+O;for(;V.length<6;)V="0"+V;O=V+O}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function W(D){if(D.h!=0)return!1;for(let R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function X(D){return D.h==-1}r.l=function(D){return D=me(this,D),X(D)?-1:W(D)?0:1};function oe(D){const R=D.g.length,A=[];for(let O=0;O<R;O++)A[O]=~D.g[O];return new h(A,~D.h).add(C)}r.abs=function(){return X(this)?oe(this):this},r.add=function(D){const R=Math.max(this.g.length,D.g.length),A=[];let O=0;for(let M=0;M<=R;M++){let V=O+(this.i(M)&65535)+(D.i(M)&65535),N=(V>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);O=N>>>16,V&=65535,N&=65535,A[M]=N<<16|V}return new h(A,A[A.length-1]&-2147483648?-1:0)};function me(D,R){return D.add(oe(R))}r.j=function(D){if(W(this)||W(D))return w;if(X(this))return X(D)?oe(this).j(oe(D)):oe(oe(this).j(D));if(X(D))return oe(this.j(oe(D)));if(this.l(U)<0&&D.l(U)<0)return x(this.m()*D.m());const R=this.g.length+D.g.length,A=[];for(var O=0;O<2*R;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let M=0;M<D.g.length;M++){const V=this.i(O)>>>16,N=this.i(O)&65535,Be=D.i(M)>>>16,nt=D.i(M)&65535;A[2*O+2*M]+=N*nt,Ne(A,2*O+2*M),A[2*O+2*M+1]+=V*nt,Ne(A,2*O+2*M+1),A[2*O+2*M+1]+=N*Be,Ne(A,2*O+2*M+1),A[2*O+2*M+2]+=V*Be,Ne(A,2*O+2*M+2)}for(D=0;D<R;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=R;D<2*R;D++)A[D]=0;return new h(A,0)};function Ne(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function xe(D,R){this.g=D,this.h=R}function Fe(D,R){if(W(R))throw Error("division by zero");if(W(D))return new xe(w,w);if(X(D))return R=Fe(oe(D),R),new xe(oe(R.g),oe(R.h));if(X(R))return R=Fe(D,oe(R)),new xe(oe(R.g),R.h);if(D.g.length>30){if(X(D)||X(R))throw Error("slowDivide_ only works with positive integers.");for(var A=C,O=R;O.l(D)<=0;)A=Ae(A),O=Ae(O);var M=Ue(A,1),V=Ue(O,1);for(O=Ue(O,2),A=Ue(A,2);!W(O);){var N=V.add(O);N.l(D)<=0&&(M=M.add(A),V=N),O=Ue(O,1),A=Ue(A,1)}return R=me(D,M.j(R)),new xe(M,R)}for(M=w;D.l(R)>=0;){for(A=Math.max(1,Math.floor(D.m()/R.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),V=x(A),N=V.j(R);X(N)||N.l(D)>0;)A-=O,V=x(A),N=V.j(R);W(V)&&(V=C),M=M.add(V),D=me(D,N)}return new xe(M,D)}r.B=function(D){return Fe(this,D).h},r.and=function(D){const R=Math.max(this.g.length,D.g.length),A=[];for(let O=0;O<R;O++)A[O]=this.i(O)&D.i(O);return new h(A,this.h&D.h)},r.or=function(D){const R=Math.max(this.g.length,D.g.length),A=[];for(let O=0;O<R;O++)A[O]=this.i(O)|D.i(O);return new h(A,this.h|D.h)},r.xor=function(D){const R=Math.max(this.g.length,D.g.length),A=[];for(let O=0;O<R;O++)A[O]=this.i(O)^D.i(O);return new h(A,this.h^D.h)};function Ae(D){const R=D.g.length+1,A=[];for(let O=0;O<R;O++)A[O]=D.i(O)<<1|D.i(O-1)>>>31;return new h(A,D.h)}function Ue(D,R){const A=R>>5;R%=32;const O=D.g.length-A,M=[];for(let V=0;V<O;V++)M[V]=R>0?D.i(V+A)>>>R|D.i(V+A+1)<<32-R:D.i(V+A);return new h(M,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Ub=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=x,h.fromString=E,ra=h}).apply(typeof P1<"u"?P1:typeof self<"u"?self:typeof window<"u"?window:{});var Bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Pb,Yl,zb,Ju,xm,Bb,qb,Hb;(function(){var r,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bu=="object"&&Bu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=i(this);function o(u,g){if(g)e:{var v=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var z=u[T];if(!(z in v))break e;v=v[z]}u=u[u.length-1],T=v[u],g=g(T),g!=T&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var v=[],T;for(T in g)Object.prototype.hasOwnProperty.call(g,T)&&v.push([T,g[T]]);return v}});var c=c||{},h=this||self;function y(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function p(u,g,v){return u.call.apply(u.bind,arguments)}function x(u,g,v){return x=p,x.apply(null,arguments)}function E(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function w(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(T,z,G){for(var fe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)fe[Pe-2]=arguments[Pe];return g.prototype[z].apply(T,fe)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function U(u){const g=u.length;if(g>0){const v=Array(g);for(let T=0;T<g;T++)v[T]=u[T];return v}return[]}function W(u,g){for(let T=1;T<arguments.length;T++){const z=arguments[T];var v=typeof z;if(v=v!="object"?v:z?Array.isArray(z)?"array":v:"null",v=="array"||v=="object"&&typeof z.length=="number"){v=u.length||0;const G=z.length||0;u.length=v+G;for(let fe=0;fe<G;fe++)u[v+fe]=z[fe]}else u.push(z)}}class X{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function oe(u){h.setTimeout(()=>{throw u},0)}function me(){var u=D;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class Ne{constructor(){this.h=this.g=null}add(g,v){const T=xe.get();T.set(g,v),this.h?this.h.next=T:this.g=T,this.h=T}}var xe=new X(()=>new Fe,u=>u.reset());class Fe{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,Ue=!1,D=new Ne,R=()=>{const u=Promise.resolve(void 0);Ae=()=>{u.then(A)}};function A(){for(var u;u=me();){try{u.h.call(u.g)}catch(v){oe(v)}var g=xe;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Ue=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,g),h.removeEventListener("test",v,g)}catch{}return u})();function N(u){return/^[\s\xa0]*$/.test(u)}function Be(u,g){M.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}w(Be,M),Be.prototype.init=function(u,g){const v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var nt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function B(u,g,v,T,z){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!T,this.ha=z,this.key=++Y,this.da=this.fa=!1}function ce(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function qe(u,g,v){for(const T in u)g.call(v,u[T],T,u)}function je(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function j(u){const g={};for(const v in u)g[v]=u[v];return g}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(u,g){let v,T;for(let z=1;z<arguments.length;z++){T=arguments[z];for(v in T)u[v]=T[v];for(let G=0;G<Z.length;G++)v=Z[G],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function pe(u){this.src=u,this.g={},this.h=0}pe.prototype.add=function(u,g,v,T,z){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const fe=Oe(u,g,T,z);return fe>-1?(g=u[fe],v||(g.fa=!1)):(g=new B(g,this.src,G,!!T,z),g.fa=v,u.push(g)),g};function Ie(u,g){const v=g.type;if(v in u.g){var T=u.g[v],z=Array.prototype.indexOf.call(T,g,void 0),G;(G=z>=0)&&Array.prototype.splice.call(T,z,1),G&&(ce(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Oe(u,g,v,T){for(let z=0;z<u.length;++z){const G=u[z];if(!G.da&&G.listener==g&&G.capture==!!v&&G.ha==T)return z}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Tt={};function ft(u,g,v,T,z){if(Array.isArray(g)){for(let G=0;G<g.length;G++)ft(u,g[G],v,T,z);return null}return v=xi(v),u&&u[nt]?u.J(g,v,y(T)?!!T.capture:!1,z):Fi(u,g,v,!1,T,z)}function Fi(u,g,v,T,z,G){if(!g)throw Error("Invalid event type");const fe=y(z)?!!z.capture:!!z;let Pe=yi(u);if(Pe||(u[Ge]=Pe=new pe(u)),v=Pe.add(g,v,T,fe,G),v.proxy)return v;if(T=Gi(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)V||(z=fe),z===void 0&&(z=!1),u.addEventListener(g.toString(),T,z);else if(u.attachEvent)u.attachEvent(kn(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Gi(){function u(v){return g.call(u.src,u.listener,v)}const g=cs;return u}function Qn(u,g,v,T,z){if(Array.isArray(g))for(var G=0;G<g.length;G++)Qn(u,g[G],v,T,z);else T=y(T)?!!T.capture:!!T,v=xi(v),u&&u[nt]?(u=u.i,G=String(g).toString(),G in u.g&&(g=u.g[G],v=Oe(g,v,T,z),v>-1&&(ce(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[G],u.h--)))):u&&(u=yi(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Oe(g,v,T,z)),(v=u>-1?g[u]:null)&&Tn(v))}function Tn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[nt])Ie(g.i,u);else{var v=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(v,T,u.capture):g.detachEvent?g.detachEvent(kn(v),T):g.addListener&&g.removeListener&&g.removeListener(T),(v=yi(g))?(Ie(v,u),v.h==0&&(v.src=null,g[Ge]=null)):ce(u)}}}function kn(u){return u in Tt?Tt[u]:Tt[u]="on"+u}function cs(u,g){if(u.da)u=!0;else{g=new Be(g,this);const v=u.listener,T=u.ha||u.src;u.fa&&Tn(u),u=v.call(T,g)}return u}function yi(u){return u=u[Ge],u instanceof pe?u:null}var js="__closure_events_fn_"+(Math.random()*1e9>>>0);function xi(u){return typeof u=="function"?u:(u[js]||(u[js]=function(g){return u.handleEvent(g)}),u[js])}function Vt(){O.call(this),this.i=new pe(this),this.M=this,this.G=null}w(Vt,O),Vt.prototype[nt]=!0,Vt.prototype.removeEventListener=function(u,g,v,T){Qn(this,u,g,v,T)};function it(u,g){var v,T=u.G;if(T)for(v=[];T;T=T.G)v.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new M(g,u);else if(g instanceof M)g.target=g.target||u;else{var z=g;g=new M(T,u),de(g,z)}z=!0;let G,fe;if(v)for(fe=v.length-1;fe>=0;fe--)G=g.g=v[fe],z=Xt(G,T,!0,g)&&z;if(G=g.g=u,z=Xt(G,T,!0,g)&&z,z=Xt(G,T,!1,g)&&z,v)for(fe=0;fe<v.length;fe++)G=g.g=v[fe],z=Xt(G,T,!1,g)&&z}Vt.prototype.N=function(){if(Vt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let T=0;T<v.length;T++)ce(v[T]);delete u.g[g],u.h--}}this.G=null},Vt.prototype.J=function(u,g,v,T){return this.i.add(String(u),g,!1,v,T)},Vt.prototype.K=function(u,g,v,T){return this.i.add(String(u),g,!0,v,T)};function Xt(u,g,v,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let z=!0;for(let G=0;G<g.length;++G){const fe=g[G];if(fe&&!fe.da&&fe.capture==v){const Pe=fe.listener,Jt=fe.ha||fe.src;fe.fa&&Ie(u.i,fe),z=Pe.call(Jt,T)!==!1&&z}}return z&&!T.defaultPrevented}function ma(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=x(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:h.setTimeout(u,g||0)}function wn(u){u.g=ma(()=>{u.g=null,u.i&&(u.i=!1,wn(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class fn extends O{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:wn(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(u){O.call(this),this.h=u,this.g={}}w(Dt,O);var Yi=[];function Lt(u){qe(u.g,function(g,v){this.g.hasOwnProperty(v)&&Tn(g)},u),u.g={}}Dt.prototype.N=function(){Dt.Z.N.call(this),Lt(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qi=h.JSON.stringify,ii=h.JSON.parse,yr=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function xr(){}function br(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){M.call(this,"d")}w(Zt,M);function jn(){M.call(this,"c")}w(jn,M);var wt={},vr=null;function us(){return vr=vr||new Vt}wt.Ia="serverreachability";function _r(u){M.call(this,wt.Ia,u)}w(_r,M);function si(u){const g=us();it(g,new _r(g))}wt.STAT_EVENT="statevent";function Vs(u,g){M.call(this,wt.STAT_EVENT,u),this.stat=g}w(Vs,M);function ht(u){const g=us();it(g,new Vs(g,u))}wt.Ja="timingevent";function Vn(u,g){M.call(this,wt.Ja,u),this.size=g}w(Vn,M);function Ln(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},g)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function Ja(u,g,v,T,z,G){u.info(function(){if(u.g)if(G){var fe="",Pe=G.split("&");for(let ct=0;ct<Pe.length;ct++){var Jt=Pe[ct].split("=");if(Jt.length>1){const kt=Jt[0];Jt=Jt[1];const Di=kt.split("_");fe=Di.length>=2&&Di[1]=="type"?fe+(kt+"="+Jt+"&"):fe+(kt+"=redacted&")}}}else fe=null;else fe=G;return"XMLHTTP REQ ("+T+") [attempt "+z+"]: "+g+`
`+v+`
`+fe})}function Ls(u,g,v,T,z,G,fe){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+z+"]: "+g+`
`+v+`
`+G+" "+fe})}function bi(u,g,v,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ga(u,v)+(T?" "+T:"")})}function vi(u,g){u.info(function(){return"TIMEOUT: "+g})}$n.prototype.info=function(){};function ga(u,g){if(!u.g)return g;if(!g)return null;try{const G=JSON.parse(g);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var v=G[u];if(!(v.length<2)){var T=v[1];if(Array.isArray(T)&&!(T.length<1)){var z=T[0];if(z!="noop"&&z!="stop"&&z!="close")for(let fe=1;fe<T.length;fe++)T[fe]=""}}}}return Qi(G)}catch{return g}}var Un={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xn;function Ki(){}w(Ki,xr),Ki.prototype.g=function(){return new XMLHttpRequest},xn=new Ki;function qt(u){return encodeURIComponent(String(u))}function Er(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function nn(u,g,v,T){this.j=u,this.i=g,this.l=v,this.S=T||1,this.V=new Dt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var st={},Ht={};function hn(u,g,v){u.M=1,u.A=ms(Yt(g)),u.u=v,u.R=!0,hs(u,null)}function hs(u,g){u.F=Date.now(),Zn(u),u.B=Yt(u.A);var v=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Tr(v.i,"t",T),u.C=0,v=u.j.L,u.h=new Xn,u.g=Oc(u.j,v?g:null,!u.u),u.P>0&&(u.O=new fn(x(u.Y,u,u.g),u.P)),g=u.V,v=u.g,T=u.ba;var z="readystatechange";Array.isArray(z)||(z&&(Yi[0]=z.toString()),z=Yi);for(let G=0;G<z.length;G++){const fe=ft(v,z[G],T||g.handleEvent,!1,g.h||g);if(!fe)break;g.g[fe.key]=fe}g=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),si(),Ja(u.i,u.v,u.B,u.l,u.S,u.u)}nn.prototype.ba=function(u){u=u.target;const g=this.O;g&&ye(u)==3?g.j():this.Y(u)},nn.prototype.Y=function(u){try{if(u==this.g)e:{const Pe=ye(this.g),Jt=this.g.ya(),ct=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||he(this.g)))){this.K||Pe!=4||Jt==7||(Jt==8||ct<=0?si(3):si(2)),ai(this);var g=this.g.ca();this.X=g;var v=dn(this);if(this.o=g==200,Ls(this.i,this.v,this.B,this.l,this.S,Pe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var T,z=this.g;if((T=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(T)){var G=T;break t}}G=null}if(u=G)bi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_i(this,u);else{this.o=!1,this.m=3,ht(12),Gt(this),Ft(this);break e}}if(this.R){u=!0;let kt;for(;!this.K&&this.C<v.length;)if(kt=Us(this,v),kt==Ht){Pe==4&&(this.m=4,ht(14),u=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==st){this.m=4,ht(15),bi(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else bi(this.i,this.l,kt,null),_i(this,kt);if(ri(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||v.length!=0||this.h.h||(this.m=1,ht(16),u=!1),this.o=this.o&&u,!u)bi(this.i,this.l,v,"[Invalid Chunked Response]"),Gt(this),Ft(this);else if(v.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),_a(fe),fe.P=!0,ht(11))}}else bi(this.i,this.l,v,null),_i(this,v);Pe==4&&Gt(this),this.o&&!this.K&&(Pe==4?Cc(this.j,this):(this.o=!1,Zn(this)))}else dt(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Gt(this),Ft(this)}}}catch{}finally{}};function dn(u){if(!ri(u))return u.g.la();const g=he(u.g);if(g==="")return"";let v="";const T=g.length,z=ye(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Gt(u),Ft(u),"";u.h.i=new h.TextDecoder}for(let G=0;G<T;G++)u.h.h=!0,v+=u.h.i.decode(g[G],{stream:!(z&&G==T-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function ri(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Us(u,g){var v=u.C,T=g.indexOf(`
`,v);return T==-1?Ht:(v=Number(g.substring(v,T)),isNaN(v)?st:(T+=1,T+v>g.length?Ht:(g=g.slice(T,T+v),u.C=T+v,g)))}nn.prototype.cancel=function(){this.K=!0,Gt(this)};function Zn(u){u.T=Date.now()+u.H,$i(u,u.H)}function $i(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ln(x(u.aa,u),g)}function ai(u){u.D&&(h.clearTimeout(u.D),u.D=null)}nn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(vi(this.i,this.B),this.M!=2&&(si(),ht(17)),Gt(this),this.m=2,Ft(this)):$i(this,this.T-u)};function Ft(u){u.j.I==0||u.K||Cc(u.j,u)}function Gt(u){ai(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Lt(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function _i(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||oi(v.h,u))){if(!u.L&&oi(v.h,u)&&v.I==3){try{var T=v.Ba.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var z=T;if(z[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)to(v),Ot(v);else break e;ui(v),ht(18)}}else v.xa=z[1],0<v.xa-v.K&&z[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ln(x(v.Va,v),6e3));Mt(v.h)<=1&&v.ta&&(v.ta=void 0)}else vs(v,11)}else if((u.L||v.g==u)&&to(v),!N(g))for(z=v.Ba.g.parse(g),g=0;g<z.length;g++){let ct=z[g];const kt=ct[0];if(!(kt<=v.K))if(v.K=kt,ct=ct[1],v.I==2)if(ct[0]=="c"){v.M=ct[1],v.ba=ct[2];const Di=ct[3];Di!=null&&(v.ka=Di,v.j.info("VER="+v.ka));const _s=ct[4];_s!=null&&(v.za=_s,v.j.info("SVER="+v.za));const ts=ct[5];ts!=null&&typeof ts=="number"&&ts>0&&(T=1.5*ts,v.O=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const ns=u.g;if(ns){const Ea=ns.g?ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ea){var G=T.h;G.g||Ea.indexOf("spdy")==-1&&Ea.indexOf("quic")==-1&&Ea.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(At(G,G.h),G.h=null))}if(T.G){const no=ns.g?ns.g.getResponseHeader("X-HTTP-Session-Id"):null;no&&(T.wa=no,lt(T.J,T.G,no))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),T=v;var fe=u;if(T.na=Mc(T,T.L?T.ba:null,T.W),fe.L){Zi(T.h,fe);var Pe=fe,Jt=T.O;Jt&&(Pe.H=Jt),Pe.D&&(ai(Pe),Zn(Pe)),T.g=fe}else va(T);v.i.length>0&&Nt(v)}else ct[0]!="stop"&&ct[0]!="close"||vs(v,7);else v.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?vs(v,7):Qt(v):ct[0]!="noop"&&v.l&&v.l.qa(ct),v.A=0)}}si(4)}catch{}}var St=class{constructor(u,g){this.g=u,this.map=g}};function Xi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ps(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Mt(u){return u.h?1:u.g?u.g.size:0}function oi(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function At(u,g){u.g?u.g.add(g):u.h=g}function Zi(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Xi.prototype.cancel=function(){if(this.i=Jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Jn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return U(u.i)}var Ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ei(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const T=u[v].indexOf("=");let z,G=null;T>=0?(z=u[v].substring(0,T),G=u[v].substring(T+1)):z=u[v],g(z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Wn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Wn?(this.l=u.l,sn(this,u.j),this.o=u.o,this.g=u.g,ds(this,u.u),this.h=u.h,pa(this,Et(u.i)),this.m=u.m):u&&(g=String(u).match(Ji))?(this.l=!1,sn(this,g[1]||"",!0),this.o=Ii(g[2]||""),this.g=Ii(g[3]||"",!0),ds(this,g[4]),this.h=Ii(g[5]||"",!0),pa(this,g[6]||"",!0),this.m=Ii(g[7]||"")):(this.l=!1,this.i=new bn(null,this.l))}Wn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(zs(g,gs,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(zs(g,gs,!0),"@"),u.push(qt(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(zs(v,v.charAt(0)=="/"?ya:Wa,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",zs(v,Wi)),u.join("")},Wn.prototype.resolve=function(u){const g=Yt(this);let v=!!u.j;v?sn(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var T=u.h;if(v)ds(g,u.u);else if(v=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var z=g.h.lastIndexOf("/");z!=-1&&(T=g.h.slice(0,z+1)+T)}if(z=T,z==".."||z==".")T="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){T=z.lastIndexOf("/",0)==0,z=z.split("/");const G=[];for(let fe=0;fe<z.length;){const Pe=z[fe++];Pe=="."?T&&fe==z.length&&G.push(""):Pe==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),T&&fe==z.length&&G.push("")):(G.push(Pe),T=!0)}T=G.join("/")}else T=z}return v?g.h=T:v=u.i.toString()!=="",v?pa(g,Et(u.i)):v=!!u.m,v&&(g.m=u.m),g};function Yt(u){return new Wn(u)}function sn(u,g,v){u.j=v?Ii(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ds(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function pa(u,g,v){g instanceof bn?(u.i=g,Bs(u.i,u.l)):(v||(g=zs(g,le)),u.i=new bn(g,u.l))}function lt(u,g,v){u.i.set(g,v)}function ms(u){return lt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ii(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function zs(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,Pn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Pn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var gs=/[#\/\?@]/g,Wa=/[#\?:]/g,ya=/[#\?]/g,le=/[#\?@]/g,Wi=/#/g;function bn(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Sn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ei(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}r=bn.prototype,r.add=function(u,g){Sn(this),this.i=null,u=ps(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function eo(u,g){Sn(u),g=ps(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function xa(u,g){return Sn(u),g=ps(u,g),u.g.has(g)}r.forEach=function(u,g){Sn(this),this.g.forEach(function(v,T){v.forEach(function(z){u.call(g,z,T,this)},this)},this)};function ba(u,g){Sn(u);let v=[];if(typeof g=="string")xa(u,g)&&(v=v.concat(u.g.get(ps(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}r.set=function(u,g){return Sn(this),this.i=null,u=ps(this,u),xa(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=ba(this,u),u.length>0?String(u[0]):g):g};function Tr(u,g,v){eo(u,g),v.length>0&&(u.i=null,u.g.set(ps(u,g),U(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let T=0;T<g.length;T++){var v=g[T];const z=qt(v);v=ba(this,v);for(let G=0;G<v.length;G++){let fe=z;v[G]!==""&&(fe+="="+qt(v[G])),u.push(fe)}}return this.i=u.join("&")};function Et(u){const g=new bn;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function ps(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Bs(u,g){g&&!u.j&&(Sn(u),u.i=null,u.g.forEach(function(v,T){const z=T.toLowerCase();T!=z&&(eo(this,T),Tr(this,z,v))},u)),u.j=g}function li(u,g){const v=new $n;if(h.Image){const T=new Image;T.onload=E(ei,v,"TestLoadImage: loaded",!0,g,T),T.onerror=E(ei,v,"TestLoadImage: error",!1,g,T),T.onabort=E(ei,v,"TestLoadImage: abort",!1,g,T),T.ontimeout=E(ei,v,"TestLoadImage: timeout",!1,g,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function qs(u,g){const v=new $n,T=new AbortController,z=setTimeout(()=>{T.abort(),ei(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(G=>{clearTimeout(z),G.ok?ei(v,"TestPingServer: ok",!0,g):ei(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),ei(v,"TestPingServer: error",!1,g)})}function ei(u,g,v,T,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),T(v)}catch{}}function ys(){this.g=new yr}function Ut(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Ut,xr),Ut.prototype.g=function(){return new xs(this.i,this.h)};function xs(u,g){Vt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(xs,Vt),r=xs.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,S(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||h).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,S(this)),this.g&&(this.readyState=3,S(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hs(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hs(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?es(this):S(this),this.readyState==3&&Hs(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,es(this))},r.Na=function(u){this.g&&(this.response=u,es(this))},r.ga=function(){this.g&&es(this)};function es(u){u.readyState=4,u.l=null,u.j=null,u.B=null,S(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function S(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function P(u){let g="";return qe(u,function(v,T){g+=T,g+=":",g+=v,g+=`\r
`}),g}function $(u,g,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=P(v),typeof u=="string"?v!=null&&qt(v):lt(u,g,v))}function re(u){Vt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(re,Vt);var ue=/^https?$/i,ae=["POST","PUT"];r=re.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xn.g(),this.g.onreadystatechange=C(x(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(G){se(this,G);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var z in T)v.set(z,T[z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const G of T.keys())v.set(G,T.get(G));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),z=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(ae,g,void 0)>=0)||T||z||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,fe]of v)this.g.setRequestHeader(G,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){se(this,G)}};function se(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,ge(u),we(u)}function ge(u){u.A||(u.A=!0,it(u,"complete"),it(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,it(this,"complete"),it(this,"abort"),we(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),we(this,!0)),re.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ee(this):this.Xa())},r.Xa=function(){Ee(this)};function Ee(u){if(u.h&&typeof c<"u"){if(u.v&&ye(u)==4)setTimeout(u.Ca.bind(u),0);else if(it(u,"readystatechange"),ye(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var T;if(T=G===0){let fe=String(u.D).match(Ji)[1]||null;!fe&&h.self&&h.self.location&&(fe=h.self.location.protocol.slice(0,-1)),T=!ue.test(fe?fe.toLowerCase():"")}v=T}if(v)it(u,"complete"),it(u,"success");else{u.o=6;try{var z=ye(u)>2?u.g.statusText:""}catch{z=""}u.l=z+" ["+u.ca()+"]",ge(u)}}finally{we(u)}}}}function we(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||it(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ye(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ye(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),ii(g)}};function he(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function dt(u){const g={};u=(u.g&&ye(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(N(u[T]))continue;var v=Er(u[T]);const z=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=g[z]||[];g[z]=G,G.push(v)}je(g,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rt(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Pt(u){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rt("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rt("baseRetryDelayMs",5e3,u),this.Za=rt("retryDelaySeedMs",1e4,u),this.Ta=rt("forwardChannelMaxRetries",2,u),this.va=rt("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Xi(u&&u.concurrentRequestLimit),this.Ba=new ys,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Pt.prototype,r.ka=8,r.I=1,r.connect=function(u,g,v,T){ht(0),this.W=u,this.H=g||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.J=Mc(this,null,this.W),Nt(this)};function Qt(u){if(vt(u),u.I==3){var g=u.V++,v=Yt(u.J);if(lt(v,"SID",u.M),lt(v,"RID",g),lt(v,"TYPE","terminate"),zn(u,v),g=new nn(u,u.j,g),g.M=2,g.A=ms(Yt(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=g.A,v=!0),v||(g.g=Oc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Zn(g)}Dc(u)}function Ot(u){u.g&&(_a(u),u.g.cancel(),u.g=null)}function vt(u){Ot(u),u.v&&(h.clearTimeout(u.v),u.v=null),to(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function Nt(u){if(!Ps(u.h)&&!u.m){u.m=!0;var g=u.Ea;Ae||R(),Ue||(Ae(),Ue=!0),D.add(g,u),u.D=0}}function mn(u,g){return Mt(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ln(x(u.Ea,u,g),Ic(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const z=new nn(this,this.j,u);let G=this.o;if(this.U&&(G?(G=j(G),de(G,this.U)):G=this.U),this.u!==null||this.R||(z.J=G,G=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Bn(this,z,g),v=Yt(this.J),lt(v,"RID",u),lt(v,"CVER",22),this.G&&lt(v,"X-HTTP-Session-Id",this.G),zn(this,v),G&&(this.R?g="headers="+qt(P(G))+"&"+g:this.u&&$(v,this.u,G)),At(this.h,z),this.Ra&&lt(v,"TYPE","init"),this.S?(lt(v,"$req",g),lt(v,"SID","null"),z.U=!0,hn(z,v,null)):hn(z,v,g),this.I=2}}else this.I==3&&(u?ci(this,u):this.i.length==0||Ps(this.h)||ci(this))};function ci(u,g){var v;g?v=g.l:v=u.V++;const T=Yt(u.J);lt(T,"SID",u.M),lt(T,"RID",v),lt(T,"AID",u.K),zn(u,T),u.u&&u.o&&$(T,u.u,u.o),v=new nn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Bn(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),At(u.h,v),hn(v,T,g)}function zn(u,g){u.H&&qe(u.H,function(v,T){lt(g,T,v)}),u.l&&qe({},function(v,T){lt(g,T,v)})}function Bn(u,g,v){v=Math.min(u.i.length,v);const T=u.l?x(u.l.Ka,u.l,u):null;e:{var z=u.i;let Pe=-1;for(;;){const Jt=["count="+v];Pe==-1?v>0?(Pe=z[0].g,Jt.push("ofs="+Pe)):Pe=0:Jt.push("ofs="+Pe);let ct=!0;for(let kt=0;kt<v;kt++){var G=z[kt].g;const Di=z[kt].map;if(G-=Pe,G<0)Pe=Math.max(0,z[kt].g-100),ct=!1;else try{G="req"+G+"_"||"";try{var fe=Di instanceof Map?Di:Object.entries(Di);for(const[_s,ts]of fe){let ns=ts;y(ts)&&(ns=Qi(ts)),Jt.push(G+_s+"="+encodeURIComponent(ns))}}catch(_s){throw Jt.push(G+"type="+encodeURIComponent("_badmap")),_s}}catch{T&&T(Di)}}if(ct){fe=Jt.join("&");break e}}fe=void 0}return u=u.i.splice(0,v),g.G=u,fe}function va(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Ae||R(),Ue||(Ae(),Ue=!0),D.add(g,u),u.A=0}}function ui(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ln(x(u.Da,u),Ic(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,bs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ln(x(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Ot(this),bs(this))};function _a(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function bs(u){u.g=new nn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Yt(u.na);lt(g,"RID","rpc"),lt(g,"SID",u.M),lt(g,"AID",u.K),lt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&lt(g,"TO",u.ia),lt(g,"TYPE","xmlhttp"),zn(u,g),u.u&&u.o&&$(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=ms(Yt(g)),v.u=null,v.R=!0,hs(v,u)}r.Va=function(){this.C!=null&&(this.C=null,Ot(this),ui(this),ht(19))};function to(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Cc(u,g){var v=null;if(u.g==g){to(u),_a(u),u.g=null;var T=2}else if(oi(u.h,g))v=g.G,Zi(u.h,g),T=1;else return;if(u.I!=0){if(g.o)if(T==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var z=u.D;T=us(),it(T,new Vn(T,v)),Nt(u)}else va(u);else if(z=g.m,z==3||z==0&&g.X>0||!(T==1&&mn(u,g)||T==2&&ui(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),z){case 1:vs(u,5);break;case 4:vs(u,10);break;case 3:vs(u,6);break;default:vs(u,2)}}}function Ic(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function vs(u,g){if(u.j.info("Error code "+g),g==2){var v=x(u.bb,u),T=u.Ua;const z=!T;T=new Wn(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||sn(T,"https"),ms(T),z?li(T.toString(),v):qs(T.toString(),v)}else ht(2);u.I=0,u.l&&u.l.pa(g),Dc(u),vt(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Dc(u){if(u.I=0,u.ja=[],u.l){const g=Jn(u.h);(g.length!=0||u.i.length!=0)&&(W(u.ja,g),W(u.ja,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.oa()}}function Mc(u,g,v){var T=v instanceof Wn?Yt(v):new Wn(v);if(T.g!="")g&&(T.g=g+"."+T.g),ds(T,T.u);else{var z=h.location;T=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;const G=new Wn(null);T&&sn(G,T),g&&(G.g=g),z&&ds(G,z),v&&(G.h=v),T=G}return v=u.G,g=u.wa,v&&g&&lt(T,v,g),lt(T,"VER",u.ka),zn(u,T),T}function Oc(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new re(new Ut({ab:v})):new re(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function kc(){}r=kc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function wr(){}wr.prototype.g=function(u,g){return new ti(u,g)};function ti(u,g){Vt.call(this),this.g=new Pt(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!N(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Fs(this)}w(ti,Vt),ti.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ti.prototype.close=function(){Qt(this.g)},ti.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Qi(u),u=v);g.i.push(new St(g.Ya++,u)),g.I==3&&Nt(g)},ti.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,ti.Z.N.call(this)};function jc(u){Zt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}w(jc,Zt);function Vc(){jn.call(this),this.status=1}w(Vc,jn);function Fs(u){this.g=u}w(Fs,kc),Fs.prototype.ra=function(){it(this.g,"a")},Fs.prototype.qa=function(u){it(this.g,new jc(u))},Fs.prototype.pa=function(u){it(this.g,new Vc)},Fs.prototype.oa=function(){it(this.g,"b")},wr.prototype.createWebChannel=wr.prototype.g,ti.prototype.send=ti.prototype.o,ti.prototype.open=ti.prototype.m,ti.prototype.close=ti.prototype.close,Hb=function(){return new wr},qb=function(){return us()},Bb=wt,xm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Un.NO_ERROR=0,Un.TIMEOUT=8,Un.HTTP_ERROR=6,Ju=Un,fs.COMPLETE="complete",zb=fs,br.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",Vt.prototype.listen=Vt.prototype.J,Yl=br,re.prototype.listenOnce=re.prototype.K,re.prototype.getLastError=re.prototype.Ha,re.prototype.getLastErrorCode=re.prototype.ya,re.prototype.getStatus=re.prototype.ca,re.prototype.getResponseJson=re.prototype.La,re.prototype.getResponseText=re.prototype.la,re.prototype.send=re.prototype.ea,re.prototype.setWithCredentials=re.prototype.Fa,Pb=re}).apply(typeof Bu<"u"?Bu:typeof self<"u"?self:typeof window<"u"?window:{});const z1="@firebase/firestore",B1="4.9.2";class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");let nl="12.3.0";const Ga=new Um("@firebase/firestore");function ko(){return Ga.logLevel}function be(r,...e){if(Ga.logLevel<=Ze.DEBUG){const i=e.map(Km);Ga.debug(`Firestore (${nl}): ${r}`,...i)}}function mr(r,...e){if(Ga.logLevel<=Ze.ERROR){const i=e.map(Km);Ga.error(`Firestore (${nl}): ${r}`,...i)}}function Ko(r,...e){if(Ga.logLevel<=Ze.WARN){const i=e.map(Km);Ga.warn(`Firestore (${nl}): ${r}`,...i)}}function Km(r){if(typeof r=="string")return r;try{return(function(i){return JSON.stringify(i)})(r)}catch{return r}}function De(r,e,i){let s="Unexpected state";typeof e=="string"?s=e:i=e,Fb(r,s,i)}function Fb(r,e,i){let s=`FIRESTORE (${nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw mr(s),new Error(s)}function mt(r,e,i,s){let o="Unexpected state";typeof i=="string"?o=i:s=i,r||Fb(e,o,s)}function Le(r,e){return r}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends pr{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ba{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}class Gb{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(Fn.UNAUTHENTICATED)))}shutdown(){}}class n4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class i4{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){mt(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,i(p)):Promise.resolve();let c=new Ba;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ba,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},y=p=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>y(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?y(p):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ba)}}),0),h()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((s=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(mt(typeof s.accessToken=="string",31837,{l:s}),new Gb(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new Fn(e)}}class s4{constructor(e,i,s){this.P=e,this.T=i,this.I=s,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class r4{constructor(e,i,s){this.P=e,this.T=i,this.I=s}getToken(){return Promise.resolve(new s4(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(Fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class q1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a4{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){mt(this.o===void 0,3512);const s=c=>{c.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,be("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?i(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new q1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(mt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new q1(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function o4(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}class $m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=o4(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<i&&(s+=e.charAt(o[c]%62))}return s}}function Je(r,e){return r<e?-1:r>e?1:0}function bm(r,e){const i=Math.min(r.length,e.length);for(let s=0;s<i;s++){const o=r.charAt(s),c=e.charAt(s);if(o!==c)return em(o)===em(c)?Je(o,c):em(o)?1:-1}return Je(r.length,e.length)}const l4=55296,c4=57343;function em(r){const e=r.charCodeAt(0);return e>=l4&&e<=c4}function $o(r,e,i){return r.length===e.length&&r.every(((s,o)=>i(s,e[o])))}const H1="__name__";class As{constructor(e,i,s){i===void 0?i=0:i>e.length&&De(637,{offset:i,range:e.length}),s===void 0?s=e.length-i:s>e.length-i&&De(1746,{length:s,range:e.length-i}),this.segments=e,this.offset=i,this.len=s}get length(){return this.len}isEqual(e){return As.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof As?e.forEach((s=>{i.push(s)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,s=this.limit();i<s;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const s=Math.min(e.length,i.length);for(let o=0;o<s;o++){const c=As.compareSegments(e.get(o),i.get(o));if(c!==0)return c}return Je(e.length,i.length)}static compareSegments(e,i){const s=As.isNumericId(e),o=As.isNumericId(i);return s&&!o?-1:!s&&o?1:s&&o?As.extractNumericId(e).compare(As.extractNumericId(i)):bm(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ra.fromString(e.substring(4,e.length-2))}}class zt extends As{construct(e,i,s){return new zt(e,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const s of e){if(s.indexOf("//")>=0)throw new Te(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter((o=>o.length>0)))}return new zt(i)}static emptyPath(){return new zt([])}}const u4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends As{construct(e,i,s){return new Mn(e,i,s)}static isValidIdentifier(e){return u4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H1}static keyField(){return new Mn([H1])}static fromServerFormat(e){const i=[];let s="",o=0;const c=()=>{if(s.length===0)throw new Te(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let h=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new Te(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Te(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else y==="`"?(h=!h,o++):y!=="."||h?(s+=y,o++):(c(),o++)}if(c(),h)throw new Te(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(i)}static emptyPath(){return new Mn([])}}class Re{constructor(e){this.path=e}static fromPath(e){return new Re(zt.fromString(e))}static fromName(e){return new Re(zt.fromString(e).popFirst(5))}static empty(){return new Re(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return zt.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Re(new zt(e.slice()))}}function f4(r,e,i){if(!i)throw new Te(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function h4(r,e,i,s){if(e===!0&&s===!0)throw new Te(ie.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function F1(r){if(!Re.isDocumentKey(r))throw new Te(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Yb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Xm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":De(12329,{type:typeof r})}function Ho(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Te(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Xm(r);throw new Te(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}function un(r,e){const i={typeString:r};return e&&(i.value=e),i}function wc(r,e){if(!Yb(r))throw new Te(ie.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){i=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){i=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){i=`Expected '${s}' field to equal '${c.value}'`;break}}if(i)throw new Te(ie.INVALID_ARGUMENT,i);return!0}const G1=-62135596800,Y1=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),s=Math.floor((e-1e3*i)*Y1);return new It(i,s)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new Te(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new Te(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<G1)throw new Te(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Y1}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:It._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wc(e,It._jsonSchema))return new It(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-G1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}It._jsonSchemaVersion="firestore/timestamp/1.0",It._jsonSchema={type:un("string",It._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new It(0,0))}static max(){return new ke(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const oc=-1;function d4(r,e){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(s===1e9?new It(i+1,0):new It(i,s));return new la(o,Re.empty(),e)}function m4(r){return new la(r.readTime,r.key,oc)}class la{constructor(e,i,s){this.readTime=e,this.documentKey=i,this.largestBatchId=s}static min(){return new la(ke.min(),Re.empty(),oc)}static max(){return new la(ke.max(),Re.empty(),oc)}}function g4(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=Re.comparator(r.documentKey,e.documentKey),i!==0?i:Je(r.largestBatchId,e.largestBatchId))}const p4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class y4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function il(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==p4)throw r;be("LocalStore","Unexpectedly lost primary lease")}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new te(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(i,c).next(s,o)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof te?i:te.resolve(i)}catch(i){return te.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):te.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):te.reject(i)}static resolve(e){return new te(((i,s)=>{i(e)}))}static reject(e){return new te(((i,s)=>{s(e)}))}static waitFor(e){return new te(((i,s)=>{let o=0,c=0,h=!1;e.forEach((y=>{++o,y.next((()=>{++c,h&&c===o&&i()}),(p=>s(p)))})),h=!0,c===o&&i()}))}static or(e){let i=te.resolve(!1);for(const s of e)i=i.next((o=>o?te.resolve(o):s()));return i}static forEach(e,i){const s=[];return e.forEach(((o,c)=>{s.push(i.call(this,o,c))})),this.waitFor(s)}static mapArray(e,i){return new te(((s,o)=>{const c=e.length,h=new Array(c);let y=0;for(let p=0;p<c;p++){const x=p;i(e[x]).next((E=>{h[x]=E,++y,y===c&&s(h)}),(E=>o(E)))}}))}static doWhile(e,i){return new te(((s,o)=>{const c=()=>{e()===!0?i().next((()=>{c()}),o):s()};c()}))}}function x4(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function sl(r){return r.name==="IndexedDbTransactionError"}class Of{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>i.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Of.ce=-1;const Zm=-1;function kf(r){return r==null}function pf(r){return r===0&&1/r==-1/0}function b4(r){return typeof r=="number"&&Number.isInteger(r)&&!pf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const Qb="";function v4(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=Q1(e)),e=_4(r.get(i),e);return Q1(e)}function _4(r,e){let i=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":i+="";break;case Qb:i+="";break;default:i+=c}}return i}function Q1(r){return r+Qb+""}function K1(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function Ka(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function Kb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Bt{constructor(e,i){this.comparator=e,this.root=i||Dn.EMPTY}insert(e,i){return new Bt(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(e){let i=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return i+s.left.size;o<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,s)=>(e(i,s),!1)))}toString(){const e=[];return this.inorderTraversal(((i,s)=>(e.push(`${i}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,i,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=i?s(e.key,i):1,i&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,i,s,o,c){this.key=e,this.value=i,this.color=s??Dn.RED,this.left=o??Dn.EMPTY,this.right=c??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,s,o,c){return new Dn(e??this.key,i??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,i,s),null):c===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let s,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,i,s,o,c){return this}insert(e,i,s){return new Dn(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,s)=>(e(i),!1)))}forEachInRange(e,i){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new $1(this.data.getIterator())}getIteratorFrom(e){return new $1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((s=>{i=i.add(s)})),i}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const i=this.data.getIterator(),s=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new yn(this.comparator);return i.data=e,i}}class $1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class os{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new os([])}unionWith(e){let i=new yn(Mn.comparator);for(const s of this.fields)i=i.add(s);for(const s of e)i=i.add(s);return new os(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,((i,s)=>i.isEqual(s)))}}class $b extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class On{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new $b("Invalid base64 string: "+c):c}})(e);return new On(i)}static fromUint8Array(e){const i=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new On(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const s=new Uint8Array(i.length);for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const E4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(r){if(mt(!!r,39018),typeof r=="string"){let e=0;const i=E4.exec(r);if(mt(!!i,46558,{timestamp:r}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:tn(r.seconds),nanos:tn(r.nanos)}}function tn(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ua(r){return typeof r=="string"?On.fromBase64String(r):On.fromUint8Array(r)}const Xb="server_timestamp",Zb="__type__",Jb="__previous_value__",Wb="__local_write_time__";function Jm(r){return(r?.mapValue?.fields||{})[Zb]?.stringValue===Xb}function jf(r){const e=r.mapValue.fields[Jb];return Jm(e)?jf(e):e}function lc(r){const e=ca(r.mapValue.fields[Wb].timestampValue);return new It(e.seconds,e.nanos)}class T4{constructor(e,i,s,o,c,h,y,p,x,E){this.databaseId=e,this.appId=i,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=y,this.longPollingOptions=p,this.useFetchStreams=x,this.isUsingEmulator=E}}const cc="(default)";class uc{constructor(e,i){this.projectId=e,this.database=i||cc}static empty(){return new uc("","")}get isDefaultDatabase(){return this.database===cc}isEqual(e){return e instanceof uc&&e.projectId===this.projectId&&e.database===this.database}}const ev="__type__",w4="__max__",Hu={mapValue:{}},tv="__vector__",yf="value";function fa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Jm(r)?4:A4(r)?9007199254740991:S4(r)?10:11:De(28295,{value:r})}function Os(r,e){if(r===e)return!0;const i=fa(r);if(i!==fa(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return lc(r).isEqual(lc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=ca(o.timestampValue),y=ca(c.timestampValue);return h.seconds===y.seconds&&h.nanos===y.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return ua(o.bytesValue).isEqual(ua(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return tn(o.geoPointValue.latitude)===tn(c.geoPointValue.latitude)&&tn(o.geoPointValue.longitude)===tn(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return tn(o.integerValue)===tn(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=tn(o.doubleValue),y=tn(c.doubleValue);return h===y?pf(h)===pf(y):isNaN(h)&&isNaN(y)}return!1})(r,e);case 9:return $o(r.arrayValue.values||[],e.arrayValue.values||[],Os);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},y=c.mapValue.fields||{};if(K1(h)!==K1(y))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(y[p]===void 0||!Os(h[p],y[p])))return!1;return!0})(r,e);default:return De(52216,{left:r})}}function fc(r,e){return(r.values||[]).find((i=>Os(i,e)))!==void 0}function Xo(r,e){if(r===e)return 0;const i=fa(r),s=fa(e);if(i!==s)return Je(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return Je(r.booleanValue,e.booleanValue);case 2:return(function(c,h){const y=tn(c.integerValue||c.doubleValue),p=tn(h.integerValue||h.doubleValue);return y<p?-1:y>p?1:y===p?0:isNaN(y)?isNaN(p)?0:-1:1})(r,e);case 3:return X1(r.timestampValue,e.timestampValue);case 4:return X1(lc(r),lc(e));case 5:return bm(r.stringValue,e.stringValue);case 6:return(function(c,h){const y=ua(c),p=ua(h);return y.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(c,h){const y=c.split("/"),p=h.split("/");for(let x=0;x<y.length&&x<p.length;x++){const E=Je(y[x],p[x]);if(E!==0)return E}return Je(y.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,h){const y=Je(tn(c.latitude),tn(h.latitude));return y!==0?y:Je(tn(c.longitude),tn(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Z1(r.arrayValue,e.arrayValue);case 10:return(function(c,h){const y=c.fields||{},p=h.fields||{},x=y[yf]?.arrayValue,E=p[yf]?.arrayValue,w=Je(x?.values?.length||0,E?.values?.length||0);return w!==0?w:Z1(x,E)})(r.mapValue,e.mapValue);case 11:return(function(c,h){if(c===Hu.mapValue&&h===Hu.mapValue)return 0;if(c===Hu.mapValue)return 1;if(h===Hu.mapValue)return-1;const y=c.fields||{},p=Object.keys(y),x=h.fields||{},E=Object.keys(x);p.sort(),E.sort();for(let w=0;w<p.length&&w<E.length;++w){const C=bm(p[w],E[w]);if(C!==0)return C;const U=Xo(y[p[w]],x[E[w]]);if(U!==0)return U}return Je(p.length,E.length)})(r.mapValue,e.mapValue);default:throw De(23264,{he:i})}}function X1(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Je(r,e);const i=ca(r),s=ca(e),o=Je(i.seconds,s.seconds);return o!==0?o:Je(i.nanos,s.nanos)}function Z1(r,e){const i=r.values||[],s=e.values||[];for(let o=0;o<i.length&&o<s.length;++o){const c=Xo(i[o],s[o]);if(c)return c}return Je(i.length,s.length)}function Zo(r){return vm(r)}function vm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const s=ca(i);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return ua(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return Re.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let s="[",o=!0;for(const c of i.values||[])o?o=!1:s+=",",s+=vm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(i){const s=Object.keys(i.fields||{}).sort();let o="{",c=!0;for(const h of s)c?c=!1:o+=",",o+=`${h}:${vm(i.fields[h])}`;return o+"}"})(r.mapValue):De(61005,{value:r})}function Wu(r){switch(fa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jf(r);return e?16+Wu(e):16;case 5:return 2*r.stringValue.length;case 6:return ua(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+Wu(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ka(s.fields,((c,h)=>{o+=c.length+Wu(h)})),o})(r.mapValue);default:throw De(13486,{value:r})}}function _m(r){return!!r&&"integerValue"in r}function Wm(r){return!!r&&"arrayValue"in r}function J1(r){return!!r&&"nullValue"in r}function W1(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ef(r){return!!r&&"mapValue"in r}function S4(r){return(r?.mapValue?.fields||{})[ev]?.stringValue===tv}function tc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ka(r.mapValue.fields,((i,s)=>e.mapValue.fields[i]=tc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=tc(r.arrayValue.values[i]);return e}return{...r}}function A4(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===w4}class Bi{constructor(e){this.value=e}static empty(){return new Bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let s=0;s<e.length-1;++s)if(i=(i.mapValue.fields||{})[e.get(s)],!ef(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(i)}setAll(e){let i=Mn.emptyPath(),s={},o=[];e.forEach(((h,y)=>{if(!i.isImmediateParentOf(y)){const p=this.getFieldsMap(i);this.applyChanges(p,s,o),s={},o=[],i=y.popLast()}h?s[y.lastSegment()]=tc(h):o.push(y.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,s,o)}delete(e){const i=this.field(e.popLast());ef(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Os(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=i.mapValue.fields[e.get(s)];ef(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(s)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,s){Ka(i,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new Bi(tc(this.value))}}function nv(r){const e=[];return Ka(r.fields,((i,s)=>{const o=new Mn([i]);if(ef(s)){const c=nv(s.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new os(e)}class Gn{constructor(e,i,s,o,c,h,y){this.key=e,this.documentType=i,this.version=s,this.readTime=o,this.createTime=c,this.data=h,this.documentState=y}static newInvalidDocument(e){return new Gn(e,0,ke.min(),ke.min(),ke.min(),Bi.empty(),0)}static newFoundDocument(e,i,s,o){return new Gn(e,1,i,ke.min(),s,o,0)}static newNoDocument(e,i){return new Gn(e,2,i,ke.min(),ke.min(),Bi.empty(),0)}static newUnknownDocument(e,i){return new Gn(e,3,i,ke.min(),ke.min(),Bi.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xf{constructor(e,i){this.position=e,this.inclusive=i}}function ex(r,e,i){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],h=r.position[o];if(c.field.isKeyField()?s=Re.comparator(Re.fromName(h.referenceValue),i.key):s=Xo(h,i.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function tx(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Os(r.position[i],e.position[i]))return!1;return!0}class bf{constructor(e,i="asc"){this.field=e,this.dir=i}}function N4(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class iv{}class pn extends iv{constructor(e,i,s){super(),this.field=e,this.op=i,this.value=s}static create(e,i,s){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,s):new C4(e,i,s):i==="array-contains"?new M4(e,s):i==="in"?new O4(e,s):i==="not-in"?new k4(e,s):i==="array-contains-any"?new j4(e,s):new pn(e,i,s)}static createKeyFieldInFilter(e,i,s){return i==="in"?new I4(e,s):new D4(e,s)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Xo(i,this.value)):i!==null&&fa(this.value)===fa(i)&&this.matchesComparison(Xo(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ks extends iv{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new ks(e,i)}matches(e){return sv(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sv(r){return r.op==="and"}function rv(r){return R4(r)&&sv(r)}function R4(r){for(const e of r.filters)if(e instanceof ks)return!1;return!0}function Em(r){if(r instanceof pn)return r.field.canonicalString()+r.op.toString()+Zo(r.value);if(rv(r))return r.filters.map((e=>Em(e))).join(",");{const e=r.filters.map((i=>Em(i))).join(",");return`${r.op}(${e})`}}function av(r,e){return r instanceof pn?(function(s,o){return o instanceof pn&&s.op===o.op&&s.field.isEqual(o.field)&&Os(s.value,o.value)})(r,e):r instanceof ks?(function(s,o){return o instanceof ks&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,h,y)=>c&&av(h,o.filters[y])),!0):!1})(r,e):void De(19439)}function ov(r){return r instanceof pn?(function(i){return`${i.field.canonicalString()} ${i.op} ${Zo(i.value)}`})(r):r instanceof ks?(function(i){return i.op.toString()+" {"+i.getFilters().map(ov).join(" ,")+"}"})(r):"Filter"}class C4 extends pn{constructor(e,i,s){super(e,i,s),this.key=Re.fromName(s.referenceValue)}matches(e){const i=Re.comparator(e.key,this.key);return this.matchesComparison(i)}}class I4 extends pn{constructor(e,i){super(e,"in",i),this.keys=lv("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class D4 extends pn{constructor(e,i){super(e,"not-in",i),this.keys=lv("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function lv(r,e){return(e.arrayValue?.values||[]).map((i=>Re.fromName(i.referenceValue)))}class M4 extends pn{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Wm(i)&&fc(i.arrayValue,this.value)}}class O4 extends pn{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&fc(this.value.arrayValue,i)}}class k4 extends pn{constructor(e,i){super(e,"not-in",i)}matches(e){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!fc(this.value.arrayValue,i)}}class j4 extends pn{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Wm(i)||!i.arrayValue.values)&&i.arrayValue.values.some((s=>fc(this.value.arrayValue,s)))}}class V4{constructor(e,i=null,s=[],o=[],c=null,h=null,y=null){this.path=e,this.collectionGroup=i,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=h,this.endAt=y,this.Te=null}}function nx(r,e=null,i=[],s=[],o=null,c=null,h=null){return new V4(r,e,i,s,o,c,h)}function e0(r){const e=Le(r);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((s=>Em(s))).join(","),i+="|ob:",i+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),kf(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((s=>Zo(s))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((s=>Zo(s))).join(",")),e.Te=i}return e.Te}function t0(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!N4(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!av(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!tx(r.startAt,e.startAt)&&tx(r.endAt,e.endAt)}function Tm(r){return Re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Vf{constructor(e,i=null,s=[],o=[],c=null,h="F",y=null,p=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=h,this.startAt=y,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L4(r,e,i,s,o,c,h,y){return new Vf(r,e,i,s,o,c,h,y)}function n0(r){return new Vf(r)}function ix(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function U4(r){return r.collectionGroup!==null}function nc(r){const e=Le(r);if(e.Ie===null){e.Ie=[];const i=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),i.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let y=new yn(Mn.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((x=>{x.isInequality()&&(y=y.add(x.field))}))})),y})(e).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new bf(c,s))})),i.has(Mn.keyField().canonicalString())||e.Ie.push(new bf(Mn.keyField(),s))}return e.Ie}function Cs(r){const e=Le(r);return e.Ee||(e.Ee=P4(e,nc(r))),e.Ee}function P4(r,e){if(r.limitType==="F")return nx(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new bf(o.field,c)}));const i=r.endAt?new xf(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new xf(r.startAt.position,r.startAt.inclusive):null;return nx(r.path,r.collectionGroup,e,r.filters,r.limit,i,s)}}function wm(r,e,i){return new Vf(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function Lf(r,e){return t0(Cs(r),Cs(e))&&r.limitType===e.limitType}function cv(r){return`${e0(Cs(r))}|lt:${r.limitType}`}function jo(r){return`Query(target=${(function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map((o=>ov(o))).join(", ")}]`),kf(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map((o=>Zo(o))).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map((o=>Zo(o))).join(",")),`Target(${s})`})(Cs(r))}; limitType=${r.limitType})`}function Uf(r,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Re.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,o){for(const c of nc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,y,p){const x=ex(h,y,p);return h.inclusive?x<=0:x<0})(s.startAt,nc(s),o)||s.endAt&&!(function(h,y,p){const x=ex(h,y,p);return h.inclusive?x>=0:x>0})(s.endAt,nc(s),o))})(r,e)}function z4(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function uv(r){return(e,i)=>{let s=!1;for(const o of nc(r)){const c=B4(o,e,i);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function B4(r,e,i){const s=r.field.isKeyField()?Re.comparator(e.key,i.key):(function(c,h,y){const p=h.data.field(c),x=y.data.field(c);return p!==null&&x!==null?Xo(p,x):De(42886)})(r.field,e,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return De(19790,{direction:r.dir})}}class $a{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),s=this.inner[i];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,i){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,i]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[i]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,((i,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return Kb(this.inner)}size(){return this.innerSize}}const q4=new Bt(Re.comparator);function gr(){return q4}const fv=new Bt(Re.comparator);function Ql(...r){let e=fv;for(const i of r)e=e.insert(i.key,i);return e}function hv(r){let e=fv;return r.forEach(((i,s)=>e=e.insert(i,s.overlayedDocument))),e}function za(){return ic()}function dv(){return ic()}function ic(){return new $a((r=>r.toString()),((r,e)=>r.isEqual(e)))}const H4=new Bt(Re.comparator),F4=new yn(Re.comparator);function We(...r){let e=F4;for(const i of r)e=e.add(i);return e}const G4=new yn(Je);function Y4(){return G4}function i0(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function mv(r){return{integerValue:""+r}}function Q4(r,e){return b4(e)?mv(e):i0(r,e)}class Pf{constructor(){this._=void 0}}function K4(r,e,i){return r instanceof vf?(function(o,c){const h={fields:{[Zb]:{stringValue:Xb},[Wb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Jm(c)&&(c=jf(c)),c&&(h.fields[Jb]=c),{mapValue:h}})(i,e):r instanceof hc?pv(r,e):r instanceof dc?yv(r,e):(function(o,c){const h=gv(o,c),y=sx(h)+sx(o.Ae);return _m(h)&&_m(o.Ae)?mv(y):i0(o.serializer,y)})(r,e)}function $4(r,e,i){return r instanceof hc?pv(r,e):r instanceof dc?yv(r,e):i}function gv(r,e){return r instanceof _f?(function(s){return _m(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class vf extends Pf{}class hc extends Pf{constructor(e){super(),this.elements=e}}function pv(r,e){const i=xv(e);for(const s of r.elements)i.some((o=>Os(o,s)))||i.push(s);return{arrayValue:{values:i}}}class dc extends Pf{constructor(e){super(),this.elements=e}}function yv(r,e){let i=xv(e);for(const s of r.elements)i=i.filter((o=>!Os(o,s)));return{arrayValue:{values:i}}}class _f extends Pf{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function sx(r){return tn(r.integerValue||r.doubleValue)}function xv(r){return Wm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function X4(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof hc&&o instanceof hc||s instanceof dc&&o instanceof dc?$o(s.elements,o.elements,Os):s instanceof _f&&o instanceof _f?Os(s.Ae,o.Ae):s instanceof vf&&o instanceof vf})(r.transform,e.transform)}class Z4{constructor(e,i){this.version=e,this.transformResults=i}}class cr{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class zf{}function bv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new _v(r.key,cr.none()):new Sc(r.key,r.data,cr.none());{const i=r.data,s=Bi.empty();let o=new yn(Mn.comparator);for(let c of e.fields)if(!o.has(c)){let h=i.field(c);h===null&&c.length>1&&(c=c.popLast(),h=i.field(c)),h===null?s.delete(c):s.set(c,h),o=o.add(c)}return new Xa(r.key,s,new os(o.toArray()),cr.none())}}function J4(r,e,i){r instanceof Sc?(function(o,c,h){const y=o.value.clone(),p=ax(o.fieldTransforms,c,h.transformResults);y.setAll(p),c.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(r,e,i):r instanceof Xa?(function(o,c,h){if(!tf(o.precondition,c))return void c.convertToUnknownDocument(h.version);const y=ax(o.fieldTransforms,c,h.transformResults),p=c.data;p.setAll(vv(o)),p.setAll(y),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,i):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,i)}function sc(r,e,i,s){return r instanceof Sc?(function(c,h,y,p){if(!tf(c.precondition,h))return y;const x=c.value.clone(),E=ox(c.fieldTransforms,p,h);return x.setAll(E),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),null})(r,e,i,s):r instanceof Xa?(function(c,h,y,p){if(!tf(c.precondition,h))return y;const x=ox(c.fieldTransforms,p,h),E=h.data;return E.setAll(vv(c)),E.setAll(x),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),y===null?null:y.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(r,e,i,s):(function(c,h,y){return tf(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):y})(r,e,i)}function W4(r,e){let i=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=gv(s.transform,o||null);c!=null&&(i===null&&(i=Bi.empty()),i.set(s.field,c))}return i||null}function rx(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&$o(s,o,((c,h)=>X4(c,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Sc extends zf{constructor(e,i,s,o=[]){super(),this.key=e,this.value=i,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Xa extends zf{constructor(e,i,s,o,c=[]){super(),this.key=e,this.data=i,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function vv(r){const e=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const s=r.data.field(i);e.set(i,s)}})),e}function ax(r,e,i){const s=new Map;mt(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let o=0;o<i.length;o++){const c=r[o],h=c.transform,y=e.data.field(c.field);s.set(c.field,$4(h,y,i[o]))}return s}function ox(r,e,i){const s=new Map;for(const o of r){const c=o.transform,h=i.data.field(o.field);s.set(o.field,K4(c,h,e))}return s}class _v extends zf{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e6 extends zf{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class t6{constructor(e,i,s,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,i){const s=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&J4(c,e,s[o])}}applyToLocalView(e,i){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(i=sc(s,e,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(i=sc(s,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const s=dv();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let y=this.applyToLocalView(h,c.mutatedFields);y=i.has(o.key)?null:y;const p=bv(h,y);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(ke.min())})),s}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),We())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,((i,s)=>rx(i,s)))&&$o(this.baseMutations,e.baseMutations,((i,s)=>rx(i,s)))}}class s0{constructor(e,i,s,o){this.batch=e,this.commitVersion=i,this.mutationResults=s,this.docVersions=o}static from(e,i,s){mt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return H4})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,s[h].version);return new s0(e,i,s,o)}}class n6{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class i6{constructor(e,i){this.count=e,this.unchangedNames=i}}var cn,tt;function s6(r){switch(r){case ie.OK:return De(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return De(15467,{code:r})}}function Ev(r){if(r===void 0)return mr("GRPC error has no .code"),ie.UNKNOWN;switch(r){case cn.OK:return ie.OK;case cn.CANCELLED:return ie.CANCELLED;case cn.UNKNOWN:return ie.UNKNOWN;case cn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case cn.INTERNAL:return ie.INTERNAL;case cn.UNAVAILABLE:return ie.UNAVAILABLE;case cn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case cn.NOT_FOUND:return ie.NOT_FOUND;case cn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case cn.ABORTED:return ie.ABORTED;case cn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case cn.DATA_LOSS:return ie.DATA_LOSS;default:return De(39323,{code:r})}}(tt=cn||(cn={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";function r6(){return new TextEncoder}const a6=new ra([4294967295,4294967295],0);function lx(r){const e=r6().encode(r),i=new Ub;return i.update(e),new Uint8Array(i.digest())}function cx(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ra([i,s],0),new ra([o,c],0)]}class r0{constructor(e,i,s){if(this.bitmap=e,this.padding=i,this.hashCount=s,i<0||i>=8)throw new Kl(`Invalid padding: ${i}`);if(s<0)throw new Kl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Kl(`Invalid hash count: ${s}`);if(e.length===0&&i!==0)throw new Kl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=ra.fromNumber(this.ge)}ye(e,i,s){let o=e.add(i.multiply(ra.fromNumber(s)));return o.compare(a6)===1&&(o=new ra([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=lx(e),[s,o]=cx(i);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);if(!this.we(h))return!1}return!0}static create(e,i,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new r0(c,o,i);return s.forEach((y=>h.insert(y))),h}insert(e){if(this.ge===0)return;const i=lx(e),[s,o]=cx(i);for(let c=0;c<this.hashCount;c++){const h=this.ye(s,o,c);this.Se(h)}}Se(e){const i=Math.floor(e/8),s=e%8;this.bitmap[i]|=1<<s}}class Kl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bf{constructor(e,i,s,o,c){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,i,s){const o=new Map;return o.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,i,s)),new Bf(ke.min(),o,new Bt(Je),gr(),We())}}class Ac{constructor(e,i,s,o,c){this.resumeToken=e,this.current=i,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,i,s){return new Ac(s,i,We(),We(),We())}}class nf{constructor(e,i,s,o){this.be=e,this.removedTargetIds=i,this.key=s,this.De=o}}class Tv{constructor(e,i){this.targetId=e,this.Ce=i}}class wv{constructor(e,i,s=On.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=s,this.cause=o}}class ux{constructor(){this.ve=0,this.Fe=fx(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),i=We(),s=We();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:s=s.add(o);break;default:De(38017,{changeType:c})}})),new Ac(this.Me,this.xe,e,i,s)}qe(){this.Oe=!1,this.Fe=fx()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class o6{constructor(e){this.Ge=e,this.ze=new Map,this.je=gr(),this.Je=Fu(),this.He=Fu(),this.Ye=new Bt(Je)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const s=this.nt(i);switch(e.state){case 0:this.rt(i)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),s.Le(e.resumeToken));break;default:De(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((s,o)=>{this.rt(o)&&i(o)}))}st(e){const i=e.targetId,s=e.Ce.count,o=this.ot(i);if(o){const c=o.target;if(Tm(c))if(s===0){const h=new Re(c.path);this.et(i,h,Gn.newNoDocument(h,ke.min()))}else mt(s===1,20013,{expectedCount:s});else{const h=this._t(i);if(h!==s){const y=this.ut(e),p=y?this.ct(y,e,h):1;if(p!==0){this.it(i);const x=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,x)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=i;let h,y;try{h=ua(s).toUint8Array()}catch(p){if(p instanceof $b)return Ko("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{y=new r0(h,o,c)}catch(p){return Ko(p instanceof Kl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return y.ge===0?null:y}ct(e,i,s){return i.Ce.count===s-this.Pt(e,i.targetId)?0:2}Pt(e,i){const s=this.Ge.getRemoteKeysForTarget(i);let o=0;return s.forEach((c=>{const h=this.Ge.ht(),y=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(y)||(this.et(i,c,null),o++)})),o}Tt(e){const i=new Map;this.ze.forEach(((c,h)=>{const y=this.ot(h);if(y){if(c.current&&Tm(y.target)){const p=new Re(y.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Gn.newNoDocument(p,e))}c.Be&&(i.set(h,c.ke()),c.qe())}}));let s=We();this.He.forEach(((c,h)=>{let y=!0;h.forEachWhile((p=>{const x=this.ot(p);return!x||x.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new Bf(e,i,this.Ye,this.je,s);return this.je=gr(),this.Je=Fu(),this.He=Fu(),this.Ye=new Bt(Je),o}Xe(e,i){if(!this.rt(e))return;const s=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,s),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,i)?o.Qe(i,1):o.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),s&&(this.je=this.je.insert(i,s))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new ux,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new yn(Je),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new yn(Je),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||be("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ux),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function Fu(){return new Bt(Re.comparator)}function fx(){return new Bt(Re.comparator)}const l6={asc:"ASCENDING",desc:"DESCENDING"},c6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u6={and:"AND",or:"OR"};class f6{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Sm(r,e){return r.useProto3Json||kf(e)?e:{value:e}}function Ef(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function h6(r,e){return Ef(r,e.toTimestamp())}function Is(r){return mt(!!r,49232),ke.fromTimestamp((function(i){const s=ca(i);return new It(s.seconds,s.nanos)})(r))}function a0(r,e){return Am(r,e).canonicalString()}function Am(r,e){const i=(function(o){return new zt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?i:i.child(e)}function Av(r){const e=zt.fromString(r);return mt(Dv(e),10190,{key:e.toString()}),e}function Nm(r,e){return a0(r.databaseId,e.path)}function tm(r,e){const i=Av(e);if(i.get(1)!==r.databaseId.projectId)throw new Te(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new Te(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new Re(Rv(i))}function Nv(r,e){return a0(r.databaseId,e)}function d6(r){const e=Av(r);return e.length===4?zt.emptyPath():Rv(e)}function Rm(r){return new zt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Rv(r){return mt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function hx(r,e,i){return{name:Nm(r,e),fields:i.value.mapValue.fields}}function m6(r,e){let i;if("targetChange"in e){e.targetChange;const s=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:De(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(x,E){return x.useProto3Json?(mt(E===void 0||typeof E=="string",58123),On.fromBase64String(E||"")):(mt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),On.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,y=h&&(function(x){const E=x.code===void 0?ie.UNKNOWN:Ev(x.code);return new Te(E,x.message||"")})(h);i=new wv(s,o,c,y||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=tm(r,s.document.name),c=Is(s.document.updateTime),h=s.document.createTime?Is(s.document.createTime):ke.min(),y=new Bi({mapValue:{fields:s.document.fields}}),p=Gn.newFoundDocument(o,c,h,y),x=s.targetIds||[],E=s.removedTargetIds||[];i=new nf(x,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=tm(r,s.document),c=s.readTime?Is(s.readTime):ke.min(),h=Gn.newNoDocument(o,c),y=s.removedTargetIds||[];i=new nf([],y,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=tm(r,s.document),c=s.removedTargetIds||[];i=new nf([],c,o,null)}else{if(!("filter"in e))return De(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,h=new i6(o,c),y=s.targetId;i=new Tv(y,h)}}return i}function g6(r,e){let i;if(e instanceof Sc)i={update:hx(r,e.key,e.value)};else if(e instanceof _v)i={delete:Nm(r,e.key)};else if(e instanceof Xa)i={update:hx(r,e.key,e.data),updateMask:w6(e.fieldMask)};else{if(!(e instanceof e6))return De(16599,{Vt:e.type});i={verify:Nm(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((s=>(function(c,h){const y=h.transform;if(y instanceof vf)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof hc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof dc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof _f)return{fieldPath:h.field.canonicalString(),increment:y.Ae};throw De(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(i.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:h6(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:De(27497)})(r,e.precondition)),i}function p6(r,e){return r&&r.length>0?(mt(e!==void 0,14353),r.map((i=>(function(o,c){let h=o.updateTime?Is(o.updateTime):Is(c);return h.isEqual(ke.min())&&(h=Is(c)),new Z4(h,o.transformResults||[])})(i,e)))):[]}function y6(r,e){return{documents:[Nv(r,e.path)]}}function x6(r,e){const i={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=Nv(r,o);const c=(function(x){if(x.length!==0)return Iv(ks.create(x,"and"))})(e.filters);c&&(i.structuredQuery.where=c);const h=(function(x){if(x.length!==0)return x.map((E=>(function(C){return{field:Vo(C.field),direction:_6(C.dir)}})(E)))})(e.orderBy);h&&(i.structuredQuery.orderBy=h);const y=Sm(r,e.limit);return y!==null&&(i.structuredQuery.limit=y),e.startAt&&(i.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:i,parent:o}}function b6(r){let e=d6(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let o=null;if(s>0){mt(s===1,65062);const E=i.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let c=[];i.where&&(c=(function(w){const C=Cv(w);return C instanceof ks&&rv(C)?C.getFilters():[C]})(i.where));let h=[];i.orderBy&&(h=(function(w){return w.map((C=>(function(W){return new bf(Lo(W.field),(function(oe){switch(oe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(C)))})(i.orderBy));let y=null;i.limit&&(y=(function(w){let C;return C=typeof w=="object"?w.value:w,kf(C)?null:C})(i.limit));let p=null;i.startAt&&(p=(function(w){const C=!!w.before,U=w.values||[];return new xf(U,C)})(i.startAt));let x=null;return i.endAt&&(x=(function(w){const C=!w.before,U=w.values||[];return new xf(U,C)})(i.endAt)),L4(e,o,h,c,y,"F",p,x)}function v6(r,e){const i=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:o})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function Cv(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=Lo(i.unaryFilter.field);return pn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Lo(i.unaryFilter.field);return pn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Lo(i.unaryFilter.field);return pn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Lo(i.unaryFilter.field);return pn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}})(r):r.fieldFilter!==void 0?(function(i){return pn.create(Lo(i.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return ks.create(i.compositeFilter.filters.map((s=>Cv(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return De(1026)}})(i.compositeFilter.op))})(r):De(30097,{filter:r})}function _6(r){return l6[r]}function E6(r){return c6[r]}function T6(r){return u6[r]}function Vo(r){return{fieldPath:r.canonicalString()}}function Lo(r){return Mn.fromServerFormat(r.fieldPath)}function Iv(r){return r instanceof pn?(function(i){if(i.op==="=="){if(W1(i.value))return{unaryFilter:{field:Vo(i.field),op:"IS_NAN"}};if(J1(i.value))return{unaryFilter:{field:Vo(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(W1(i.value))return{unaryFilter:{field:Vo(i.field),op:"IS_NOT_NAN"}};if(J1(i.value))return{unaryFilter:{field:Vo(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(i.field),op:E6(i.op),value:i.value}}})(r):r instanceof ks?(function(i){const s=i.getFilters().map((o=>Iv(o)));return s.length===1?s[0]:{compositeFilter:{op:T6(i.op),filters:s}}})(r):De(54877,{filter:r})}function w6(r){const e=[];return r.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function Dv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class ta{constructor(e,i,s,o,c=ke.min(),h=ke.min(),y=On.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=i,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=y,this.expectedCount=p}withSequenceNumber(e){return new ta(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class S6{constructor(e){this.yt=e}}function A6(r){const e=b6({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?wm(e,e.limit,"L"):e}class N6{constructor(){this.Cn=new R6}addToCollectionParentIndex(e,i){return this.Cn.add(i),te.resolve()}getCollectionParents(e,i){return te.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return te.resolve()}deleteFieldIndex(e,i){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,i){return te.resolve()}getDocumentsMatchingTarget(e,i){return te.resolve(null)}getIndexType(e,i){return te.resolve(0)}getFieldIndexes(e,i){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,i){return te.resolve(la.min())}getMinOffsetFromCollectionGroup(e,i){return te.resolve(la.min())}updateCollectionGroup(e,i,s){return te.resolve()}updateIndexEntries(e,i){return te.resolve()}}class R6{constructor(){this.index={}}add(e){const i=e.lastSegment(),s=e.popLast(),o=this.index[i]||new yn(zt.comparator),c=!o.has(s);return this.index[i]=o.add(s),c}has(e){const i=e.lastSegment(),s=e.popLast(),o=this.index[i];return o&&o.has(s)}getEntries(e){return(this.index[e]||new yn(zt.comparator)).toArray()}}const dx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mv=41943040;class pi{static withCacheSize(e){return new pi(e,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}pi.DEFAULT_COLLECTION_PERCENTILE=10,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pi.DEFAULT=new pi(Mv,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pi.DISABLED=new pi(-1,0,0);class Jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Jo(0)}static cr(){return new Jo(-1)}}const mx="LruGarbageCollector",Ov=1048576;function gx([r,e],[i,s]){const o=Je(r,i);return o===0?Je(e,s):o}class C6{constructor(e){this.Ir=e,this.buffer=new yn(gx),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();gx(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class I6{constructor(e,i,s){this.garbageCollector=e,this.asyncQueue=i,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(mx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){sl(i)?be(mx,"Ignoring IndexedDB error during garbage collection: ",i):await il(i)}await this.Vr(3e5)}))}}class D6{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((s=>Math.floor(i/100*s)))}nthSequenceNumber(e,i){if(i===0)return te.resolve(Of.ce);const s=new C6(i);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,i,s){return this.mr.removeTargets(e,i,s)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(dx)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dx):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let s,o,c,h,y,p,x;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(s=w,y=Date.now(),this.removeTargets(e,s,i)))).next((w=>(c=w,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((w=>(x=Date.now(),ko()<=Ze.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(y-h)+`ms
	Removed ${c} targets in `+(p-y)+`ms
	Removed ${w} documents in `+(x-p)+`ms
Total Duration: ${x-E}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:w}))))}}function M6(r,e){return new D6(r,e)}class O6{constructor(){this.changes=new $a((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?te.resolve(s):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class k6{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}class j6{constructor(e,i,s,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,i){let s=null;return this.documentOverlayCache.getOverlay(e,i).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,i)))).next((o=>(s!==null&&sc(s.mutation,o,os.empty(),It.now()),o)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((s=>this.getLocalViewOfDocuments(e,s,We()).next((()=>s))))}getLocalViewOfDocuments(e,i,s=We()){const o=za();return this.populateOverlays(e,o,i).next((()=>this.computeViews(e,i,o,s).next((c=>{let h=Ql();return c.forEach(((y,p)=>{h=h.insert(y,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,i){const s=za();return this.populateOverlays(e,s,i).next((()=>this.computeViews(e,i,s,We())))}populateOverlays(e,i,s){const o=[];return s.forEach((c=>{i.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,y)=>{i.set(h,y)}))}))}computeViews(e,i,s,o){let c=gr();const h=ic(),y=(function(){return ic()})();return i.forEach(((p,x)=>{const E=s.get(x.key);o.has(x.key)&&(E===void 0||E.mutation instanceof Xa)?c=c.insert(x.key,x):E!==void 0?(h.set(x.key,E.mutation.getFieldMask()),sc(E.mutation,x,E.mutation.getFieldMask(),It.now())):h.set(x.key,os.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((x,E)=>h.set(x,E))),i.forEach(((x,E)=>y.set(x,new k6(E,h.get(x)??null)))),y)))}recalculateAndSaveOverlays(e,i){const s=ic();let o=new Bt(((h,y)=>h-y)),c=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((h=>{for(const y of h)y.keys().forEach((p=>{const x=i.get(p);if(x===null)return;let E=s.get(p)||os.empty();E=y.applyToLocalView(x,E),s.set(p,E);const w=(o.get(y.batchId)||We()).add(p);o=o.insert(y.batchId,w)}))})).next((()=>{const h=[],y=o.getReverseIterator();for(;y.hasNext();){const p=y.getNext(),x=p.key,E=p.value,w=dv();E.forEach((C=>{if(!c.has(C)){const U=bv(i.get(C),s.get(C));U!==null&&w.set(C,U),c=c.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,x,w))}return te.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,i,s,o){return(function(h){return Re.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):U4(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,s,o):this.getDocumentsMatchingCollectionQuery(e,i,s,o)}getNextDocuments(e,i,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,s,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,s.largestBatchId,o-c.size):te.resolve(za());let y=oc,p=c;return h.next((x=>te.forEach(x,((E,w)=>(y<w.largestBatchId&&(y=w.largestBatchId),c.get(E)?te.resolve():this.remoteDocumentCache.getEntry(e,E).next((C=>{p=p.insert(E,C)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,p,x,We()))).next((E=>({batchId:y,changes:hv(E)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Re(i)).next((s=>{let o=Ql();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,i,s,o){const c=i.collectionGroup;let h=Ql();return this.indexManager.getCollectionParents(e,c).next((y=>te.forEach(y,(p=>{const x=(function(w,C){return new Vf(C,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(i,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,s,o).next((E=>{E.forEach(((w,C)=>{h=h.insert(w,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,i,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,s.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,s,c,o)))).next((h=>{c.forEach(((p,x)=>{const E=x.getKey();h.get(E)===null&&(h=h.insert(E,Gn.newInvalidDocument(E)))}));let y=Ql();return h.forEach(((p,x)=>{const E=c.get(p);E!==void 0&&sc(E.mutation,x,os.empty(),It.now()),Uf(i,x)&&(y=y.insert(p,x))})),y}))}}class V6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return te.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(o){return{id:o.id,version:o.version,createTime:Is(o.createTime)}})(i)),te.resolve()}getNamedQuery(e,i){return te.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(o){return{name:o.name,query:A6(o.bundledQuery),readTime:Is(o.readTime)}})(i)),te.resolve()}}class L6{constructor(){this.overlays=new Bt(Re.comparator),this.qr=new Map}getOverlay(e,i){return te.resolve(this.overlays.get(i))}getOverlays(e,i){const s=za();return te.forEach(i,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,i,s){return s.forEach(((o,c)=>{this.St(e,i,c)})),te.resolve()}removeOverlaysForBatchId(e,i,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),te.resolve()}getOverlaysForCollection(e,i,s){const o=za(),c=i.length+1,h=new Re(i.child("")),y=this.overlays.getIteratorFrom(h);for(;y.hasNext();){const p=y.getNext().value,x=p.getKey();if(!i.isPrefixOf(x.path))break;x.path.length===c&&p.largestBatchId>s&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,i,s,o){let c=new Bt(((x,E)=>x-E));const h=this.overlays.getIterator();for(;h.hasNext();){const x=h.getNext().value;if(x.getKey().getCollectionGroup()===i&&x.largestBatchId>s){let E=c.get(x.largestBatchId);E===null&&(E=za(),c=c.insert(x.largestBatchId,E)),E.set(x.getKey(),x)}}const y=za(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((x,E)=>y.set(x,E))),!(y.size()>=o)););return te.resolve(y)}St(e,i,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new n6(i,s));let c=this.qr.get(i);c===void 0&&(c=We(),this.qr.set(i,c)),this.qr.set(i,c.add(s.key))}}class U6{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,te.resolve()}}class o0{constructor(){this.Qr=new yn(_n.$r),this.Ur=new yn(_n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const s=new _n(e,i);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,i){e.forEach((s=>this.addReference(s,i)))}removeReference(e,i){this.Gr(new _n(e,i))}zr(e,i){e.forEach((s=>this.removeReference(s,i)))}jr(e){const i=new Re(new zt([])),s=new _n(i,e),o=new _n(i,e+1),c=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new Re(new zt([])),s=new _n(i,e),o=new _n(i,e+1);let c=We();return this.Ur.forEachInRange([s,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const i=new _n(e,0),s=this.Qr.firstAfterOrEqual(i);return s!==null&&e.isEqual(s.key)}}class _n{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return Re.comparator(e.key,i.key)||Je(e.Yr,i.Yr)}static Kr(e,i){return Je(e.Yr,i.Yr)||Re.comparator(e.key,i.key)}}class P6{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new yn(_n.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new t6(c,i,s,o);this.mutationQueue.push(h);for(const y of o)this.Zr=this.Zr.add(new _n(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return te.resolve(h)}lookupMutationBatch(e,i){return te.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const s=i+1,o=this.ei(s),c=o<0?0:o;return te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Zm:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const s=new _n(i,0),o=new _n(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(h=>{const y=this.Xr(h.Yr);c.push(y)})),te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,i){let s=new yn(Je);return i.forEach((o=>{const c=new _n(o,0),h=new _n(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(y=>{s=s.add(y.Yr)}))})),te.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,i){const s=i.path,o=s.length+1;let c=s;Re.isDocumentKey(c)||(c=c.child(""));const h=new _n(new Re(c),0);let y=new yn(Je);return this.Zr.forEachWhile((p=>{const x=p.key.path;return!!s.isPrefixOf(x)&&(x.length===o&&(y=y.add(p.Yr)),!0)}),h),te.resolve(this.ti(y))}ti(e){const i=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&i.push(o)})),i}removeMutationBatch(e,i){mt(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return te.forEach(i.mutations,(o=>{const c=new _n(o.key,i.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,i){const s=new _n(i,0),o=this.Zr.firstAfterOrEqual(s);return te.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}class z6{constructor(e){this.ri=e,this.docs=(function(){return new Bt(Re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const s=i.key,o=this.docs.get(s),c=o?o.size:0,h=this.ri(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const s=this.docs.get(i);return te.resolve(s?s.document.mutableCopy():Gn.newInvalidDocument(i))}getEntries(e,i){let s=gr();return i.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():Gn.newInvalidDocument(o))})),te.resolve(s)}getDocumentsMatchingQuery(e,i,s,o){let c=gr();const h=i.path,y=new Re(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(y);for(;p.hasNext();){const{key:x,value:{document:E}}=p.getNext();if(!h.isPrefixOf(x.path))break;x.path.length>h.length+1||g4(m4(E),s)<=0||(o.has(E.key)||Uf(i,E))&&(c=c.insert(E.key,E.mutableCopy()))}return te.resolve(c)}getAllFromCollectionGroup(e,i,s,o){De(9500)}ii(e,i){return te.forEach(this.docs,(s=>i(s)))}newChangeBuffer(e){return new B6(this)}getSize(e){return te.resolve(this.size)}}class B6 extends O6{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?i.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),te.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}class q6{constructor(e){this.persistence=e,this.si=new $a((i=>e0(i)),t0),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new o0,this.targetCount=0,this.ai=Jo.ur()}forEachTarget(e,i){return this.si.forEach(((s,o)=>i(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.oi&&(this.oi=i),te.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new Jo(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,te.resolve()}updateTargetData(e,i){return this.Pr(i),te.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,i,s){let o=0;const c=[];return this.si.forEach(((h,y)=>{y.sequenceNumber<=i&&s.get(y.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),te.waitFor(c).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,i){const s=this.si.get(i)||null;return te.resolve(s)}addMatchingKeys(e,i,s){return this._i.Wr(i,s),te.resolve()}removeMatchingKeys(e,i,s){this._i.zr(i,s);const o=this.persistence.referenceDelegate,c=[];return o&&i.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),te.waitFor(c)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),te.resolve()}getMatchingKeysForTargetId(e,i){const s=this._i.Hr(i);return te.resolve(s)}containsKey(e,i){return te.resolve(this._i.containsKey(i))}}class kv{constructor(e,i){this.ui={},this.overlays={},this.ci=new Of(0),this.li=!1,this.li=!0,this.hi=new U6,this.referenceDelegate=e(this),this.Pi=new q6(this),this.indexManager=new N6,this.remoteDocumentCache=(function(o){return new z6(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new S6(i),this.Ii=new V6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new L6,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let s=this.ui[e.toKey()];return s||(s=new P6(i,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,s){be("MemoryPersistence","Starting transaction:",e);const o=new H6(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,i){return te.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,i))))}}class H6 extends y4{constructor(e){super(),this.currentSequenceNumber=e}}class l0{constructor(e){this.persistence=e,this.Ri=new o0,this.Vi=null}static mi(e){return new l0(e)}get fi(){if(this.Vi)return this.Vi;throw De(60996)}addReference(e,i,s){return this.Ri.addReference(s,i),this.fi.delete(s.toString()),te.resolve()}removeReference(e,i,s){return this.Ri.removeReference(s,i),this.fi.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),te.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,i.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(s=>{const o=Re.fromPath(s);return this.gi(e,o).next((c=>{c||i.removeEntry(o,ke.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((s=>{s?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return te.or([()=>te.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class Tf{constructor(e,i){this.persistence=e,this.pi=new $a((s=>v4(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=M6(this,i)}static mi(e,i){return new Tf(e,i)}Ei(){}di(e){return te.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>i.next((o=>s+o))))}wr(e){let i=0;return this.pr(e,(s=>{i++})).next((()=>i))}pr(e,i){return te.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?te.resolve():i(o)))))}removeTargets(e,i,s){return this.persistence.getTargetCache().removeTargets(e,i,s)}removeOrphanedDocuments(e,i){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,i).next((y=>{y||(s++,c.removeEntry(h,ke.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}removeTarget(e,i){const s=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,i,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,i,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Wu(e.data.value)),i}br(e,i,s){return te.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.pi.get(i);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class c0{constructor(e,i,s,o){this.targetId=e,this.fromCache=i,this.Es=s,this.ds=o}static As(e,i){let s=We(),o=We();for(const c of i.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new c0(e,i.fromCache,s,o)}}class F6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class G6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return jT()?8:x4(Yn())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,s,o){const c={result:null};return this.ys(e,i).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,i,o,s).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new F6;return this.Ss(e,i,h).next((y=>{if(c.result=y,this.Vs)return this.bs(e,i,h,y.size)}))})).next((()=>c.result))}bs(e,i,s,o){return s.documentReadCount<this.fs?(ko()<=Ze.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",jo(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(ko()<=Ze.DEBUG&&be("QueryEngine","Query:",jo(i),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ko()<=Ze.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",jo(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cs(i))):te.resolve())}ys(e,i){if(ix(i))return te.resolve(null);let s=Cs(i);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(i.limit!==null&&o===1&&(i=wm(i,null,"F"),s=Cs(i)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const h=We(...c);return this.ps.getDocuments(e,h).next((y=>this.indexManager.getMinOffset(e,s).next((p=>{const x=this.Ds(i,y);return this.Cs(i,x,h,p.readTime)?this.ys(e,wm(i,null,"F")):this.vs(e,x,i,p)}))))})))))}ws(e,i,s,o){return ix(i)||o.isEqual(ke.min())?te.resolve(null):this.ps.getDocuments(e,s).next((c=>{const h=this.Ds(i,c);return this.Cs(i,h,s,o)?te.resolve(null):(ko()<=Ze.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),jo(i)),this.vs(e,h,i,d4(o,oc)).next((y=>y)))}))}Ds(e,i){let s=new yn(uv(e));return i.forEach(((o,c)=>{Uf(e,c)&&(s=s.add(c))})),s}Cs(e,i,s,o){if(e.limit===null)return!1;if(s.size!==i.size)return!0;const c=e.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,i,s){return ko()<=Ze.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",jo(i)),this.ps.getDocumentsMatchingQuery(e,i,la.min(),s)}vs(e,i,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(i.forEach((h=>{c=c.insert(h.key,h)})),c)))}}const u0="LocalStore",Y6=3e8;class Q6{constructor(e,i,s,o){this.persistence=e,this.Fs=i,this.serializer=o,this.Ms=new Bt(Je),this.xs=new $a((c=>e0(c)),t0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function K6(r,e,i,s){return new Q6(r,e,i,s)}async function jv(r,e){const i=Le(r);return await i.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return i.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,i.Bs(e),i.mutationQueue.getAllMutationBatches(s)))).next((c=>{const h=[],y=[];let p=We();for(const x of o){h.push(x.batchId);for(const E of x.mutations)p=p.add(E.key)}for(const x of c){y.push(x.batchId);for(const E of x.mutations)p=p.add(E.key)}return i.localDocuments.getDocuments(s,p).next((x=>({Ls:x,removedBatchIds:h,addedBatchIds:y})))}))}))}function $6(r,e){const i=Le(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,p,x,E){const w=x.batch,C=w.keys();let U=te.resolve();return C.forEach((W=>{U=U.next((()=>E.getEntry(p,W))).next((X=>{const oe=x.docVersions.get(W);mt(oe!==null,48541),X.version.compareTo(oe)<0&&(w.applyToRemoteDocument(X,x),X.isValidDocument()&&(X.setReadTime(x.commitVersion),E.addEntry(X)))}))})),U.next((()=>y.mutationQueue.removeMutationBatch(p,w)))})(i,s,e,c).next((()=>c.apply(s))).next((()=>i.mutationQueue.performConsistencyCheck(s))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let p=We();for(let x=0;x<y.mutationResults.length;++x)y.mutationResults[x].transformResults.length>0&&(p=p.add(y.batch.mutations[x].key));return p})(e)))).next((()=>i.localDocuments.getDocuments(s,o)))}))}function Vv(r){const e=Le(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function X6(r,e){const i=Le(r),s=e.snapshotVersion;let o=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=i.Ns.newChangeBuffer({trackRemovals:!0});o=i.Ms;const y=[];e.targetChanges.forEach(((E,w)=>{const C=o.get(w);if(!C)return;y.push(i.Pi.removeMatchingKeys(c,E.removedDocuments,w).next((()=>i.Pi.addMatchingKeys(c,E.addedDocuments,w))));let U=C.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?U=U.withResumeToken(On.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,s)),o=o.insert(w,U),(function(X,oe,me){return X.resumeToken.approximateByteSize()===0||oe.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=Y6?!0:me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0})(C,U,E)&&y.push(i.Pi.updateTargetData(c,U))}));let p=gr(),x=We();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&y.push(i.persistence.referenceDelegate.updateLimboDocument(c,E))})),y.push(Z6(c,h,e.documentUpdates).next((E=>{p=E.ks,x=E.qs}))),!s.isEqual(ke.min())){const E=i.Pi.getLastRemoteSnapshotVersion(c).next((w=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));y.push(E)}return te.waitFor(y).next((()=>h.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,p,x))).next((()=>p))})).then((c=>(i.Ms=o,c)))}function Z6(r,e,i){let s=We(),o=We();return i.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let h=gr();return i.forEach(((y,p)=>{const x=c.get(y);p.isFoundDocument()!==x.isFoundDocument()&&(o=o.add(y)),p.isNoDocument()&&p.version.isEqual(ke.min())?(e.removeEntry(y,p.readTime),h=h.insert(y,p)):!x.isValidDocument()||p.version.compareTo(x.version)>0||p.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(p),h=h.insert(y,p)):be(u0,"Ignoring outdated watch update for ",y,". Current version:",x.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function J6(r,e){const i=Le(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Zm),i.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function W6(r,e){const i=Le(r);return i.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return i.Pi.getTargetData(s,e).next((c=>c?(o=c,te.resolve(o)):i.Pi.allocateTargetId(s).next((h=>(o=new ta(e,h,"TargetPurposeListen",s.currentSequenceNumber),i.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=i.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(s.targetId,s),i.xs.set(e,s.targetId)),s}))}async function Cm(r,e,i){const s=Le(r),o=s.Ms.get(e),c=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",c,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!sl(h))throw h;be(u0,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function px(r,e,i){const s=Le(r);let o=ke.min(),c=We();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,x,E){const w=Le(p),C=w.xs.get(E);return C!==void 0?te.resolve(w.Ms.get(C)):w.Pi.getTargetData(x,E)})(s,h,Cs(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,y.targetId).next((p=>{c=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,i?o:ke.min(),i?c:We()))).next((y=>(eN(s,z4(e),y),{documents:y,Qs:c})))))}function eN(r,e,i){let s=r.Os.get(e)||ke.min();i.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class yx{constructor(){this.activeTargetIds=Y4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tN{constructor(){this.Mo=new yx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,s){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,s){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yx,Promise.resolve()}handleUserChange(e,i,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nN{Oo(e){}shutdown(){}}const xx="ConnectivityMonitor";class bx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(xx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(xx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Gu=null;function Im(){return Gu===null?Gu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gu++,"0x"+Gu.toString(16)}const nm="RestConnection",iN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sN{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===cc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,i,s,o,c){const h=Im(),y=this.zo(e,i.toUriEncodedString());be(nm,`Sending RPC '${e}' ${h}:`,y,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,c);const{host:x}=new URL(y),E=Qa(x);return this.Jo(e,y,p,s,E).then((w=>(be(nm,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw Ko(nm,`RPC '${e}' ${h} failed with error: `,w,"url: ",y,"request:",s),w}))}Ho(e,i,s,o,c,h){return this.Go(e,i,s,o,c)}jo(e,i,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,i){const s=iN[e];return`${this.Uo}/v1/${i}:${s}`}terminate(){}}class rN{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Hn="WebChannelConnection";class aN extends sN{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,s,o,c){const h=Im();return new Promise(((y,p)=>{const x=new Pb;x.setWithCredentials(!0),x.listenOnce(zb.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case Ju.NO_ERROR:const w=x.getResponseJson();be(Hn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),y(w);break;case Ju.TIMEOUT:be(Hn,`RPC '${e}' ${h} timed out`),p(new Te(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:const C=x.getStatus();if(be(Hn,`RPC '${e}' ${h} failed with status:`,C,"response text:",x.getResponseText()),C>0){let U=x.getResponseJson();Array.isArray(U)&&(U=U[0]);const W=U?.error;if(W&&W.status&&W.message){const X=(function(me){const Ne=me.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(Ne)>=0?Ne:ie.UNKNOWN})(W.status);p(new Te(X,W.message))}else p(new Te(ie.UNKNOWN,"Server responded with status "+x.getStatus()))}else p(new Te(ie.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:h,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{be(Hn,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);be(Hn,`RPC '${e}' ${h} sending request:`,o),x.send(i,"POST",E,s,15)}))}T_(e,i,s){const o=Im(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Hb(),y=qb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(p.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,i,s),p.encodeInitMessageHeaders=!0;const E=c.join("");be(Hn,`Creating RPC '${e}' stream ${o}: ${E}`,p);const w=h.createWebChannel(E,p);this.I_(w);let C=!1,U=!1;const W=new rN({Yo:oe=>{U?be(Hn,`Not sending because RPC '${e}' stream ${o} is closed:`,oe):(C||(be(Hn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),C=!0),be(Hn,`RPC '${e}' stream ${o} sending:`,oe),w.send(oe))},Zo:()=>w.close()}),X=(oe,me,Ne)=>{oe.listen(me,(xe=>{try{Ne(xe)}catch(Fe){setTimeout((()=>{throw Fe}),0)}}))};return X(w,Yl.EventType.OPEN,(()=>{U||(be(Hn,`RPC '${e}' stream ${o} transport opened.`),W.o_())})),X(w,Yl.EventType.CLOSE,(()=>{U||(U=!0,be(Hn,`RPC '${e}' stream ${o} transport closed`),W.a_(),this.E_(w))})),X(w,Yl.EventType.ERROR,(oe=>{U||(U=!0,Ko(Hn,`RPC '${e}' stream ${o} transport errored. Name:`,oe.name,"Message:",oe.message),W.a_(new Te(ie.UNAVAILABLE,"The operation could not be completed")))})),X(w,Yl.EventType.MESSAGE,(oe=>{if(!U){const me=oe.data[0];mt(!!me,16349);const Ne=me,xe=Ne?.error||Ne[0]?.error;if(xe){be(Hn,`RPC '${e}' stream ${o} received error:`,xe);const Fe=xe.status;let Ae=(function(R){const A=cn[R];if(A!==void 0)return Ev(A)})(Fe),Ue=xe.message;Ae===void 0&&(Ae=ie.INTERNAL,Ue="Unknown error status: "+Fe+" with message "+xe.message),U=!0,W.a_(new Te(Ae,Ue)),w.close()}else be(Hn,`RPC '${e}' stream ${o} received:`,me),W.u_(me)}})),X(y,Bb.STAT_EVENT,(oe=>{oe.stat===xm.PROXY?be(Hn,`RPC '${e}' stream ${o} detected buffering proxy`):oe.stat===xm.NOPROXY&&be(Hn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function im(){return typeof document<"u"?document:null}function qf(r){return new f6(r,!0)}class Lv{constructor(e,i,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=i,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,i-s);o>0&&be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const vx="PersistentStream";class Uv{constructor(e,i,s,o,c,h,y,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=y,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Lv(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===ie.RESOURCE_EXHAUSTED?(mr(i.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===i&&this.G_(s,o)}),(s=>{e((()=>{const o=new Te(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,i){const s=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(vx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(be(vx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oN extends Uv{constructor(e,i,s,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,o,h),this.serializer=c}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=m6(this.serializer,e),s=(function(c){if(!("targetChange"in c))return ke.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?ke.min():h.readTime?Is(h.readTime):ke.min()})(e);return this.listener.H_(i,s)}Y_(e){const i={};i.database=Rm(this.serializer),i.addTarget=(function(c,h){let y;const p=h.target;if(y=Tm(p)?{documents:y6(c,p)}:{query:x6(c,p).ft},y.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){y.resumeToken=Sv(c,h.resumeToken);const x=Sm(c,h.expectedCount);x!==null&&(y.expectedCount=x)}else if(h.snapshotVersion.compareTo(ke.min())>0){y.readTime=Ef(c,h.snapshotVersion.toTimestamp());const x=Sm(c,h.expectedCount);x!==null&&(y.expectedCount=x)}return y})(this.serializer,e);const s=v6(this.serializer,e);s&&(i.labels=s),this.q_(i)}Z_(e){const i={};i.database=Rm(this.serializer),i.removeTarget=e,this.q_(i)}}class lN extends Uv{constructor(e,i,s,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=p6(e.writeResults,e.commitTime),s=Is(e.commitTime);return this.listener.na(s,i)}ra(){const e={};e.database=Rm(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((s=>g6(this.serializer,s)))};this.q_(i)}}class cN{}class uN extends cN{constructor(e,i,s,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Te(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,Am(i,s),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Te(ie.UNKNOWN,c.toString())}))}Ho(e,i,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,y])=>this.connection.Ho(e,Am(i,s),o,h,y,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Te(ie.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class fN{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mr(i),this.aa=!1):be("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ya="RemoteStore";class hN{constructor(e,i,s,o,c){this.localStore=e,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Za(this)&&(be(Ya,"Restarting streams for network reachability change."),await(async function(p){const x=Le(p);x.Ea.add(4),await Nc(x),x.Ra.set("Unknown"),x.Ea.delete(4),await Hf(x)})(this))}))})),this.Ra=new fN(s,o)}}async function Hf(r){if(Za(r))for(const e of r.da)await e(!0)}async function Nc(r){for(const e of r.da)await e(!1)}function Pv(r,e){const i=Le(r);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),m0(i)?d0(i):rl(i).O_()&&h0(i,e))}function f0(r,e){const i=Le(r),s=rl(i);i.Ia.delete(e),s.O_()&&zv(i,e),i.Ia.size===0&&(s.O_()?s.L_():Za(i)&&i.Ra.set("Unknown"))}function h0(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}rl(r).Y_(e)}function zv(r,e){r.Va.Ue(e),rl(r).Z_(e)}function d0(r){r.Va=new o6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),rl(r).start(),r.Ra.ua()}function m0(r){return Za(r)&&!rl(r).x_()&&r.Ia.size>0}function Za(r){return Le(r).Ea.size===0}function Bv(r){r.Va=void 0}async function dN(r){r.Ra.set("Online")}async function mN(r){r.Ia.forEach(((e,i)=>{h0(r,e)}))}async function gN(r,e){Bv(r),m0(r)?(r.Ra.ha(e),d0(r)):r.Ra.set("Unknown")}async function pN(r,e,i){if(r.Ra.set("Online"),e instanceof wv&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const y of c.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,h),o.Ia.delete(y),o.Va.removeTarget(y))})(r,e)}catch(s){be(Ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await wf(r,s)}else if(e instanceof nf?r.Va.Ze(e):e instanceof Tv?r.Va.st(e):r.Va.tt(e),!i.isEqual(ke.min()))try{const s=await Vv(r.localStore);i.compareTo(s)>=0&&await(function(c,h){const y=c.Va.Tt(h);return y.targetChanges.forEach(((p,x)=>{if(p.resumeToken.approximateByteSize()>0){const E=c.Ia.get(x);E&&c.Ia.set(x,E.withResumeToken(p.resumeToken,h))}})),y.targetMismatches.forEach(((p,x)=>{const E=c.Ia.get(p);if(!E)return;c.Ia.set(p,E.withResumeToken(On.EMPTY_BYTE_STRING,E.snapshotVersion)),zv(c,p);const w=new ta(E.target,p,x,E.sequenceNumber);h0(c,w)})),c.remoteSyncer.applyRemoteEvent(y)})(r,i)}catch(s){be(Ya,"Failed to raise snapshot:",s),await wf(r,s)}}async function wf(r,e,i){if(!sl(e))throw e;r.Ea.add(1),await Nc(r),r.Ra.set("Offline"),i||(i=()=>Vv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{be(Ya,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await Hf(r)}))}function qv(r,e){return e().catch((i=>wf(r,i,e)))}async function Ff(r){const e=Le(r),i=ha(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zm;for(;yN(e);)try{const o=await J6(e.localStore,s);if(o===null){e.Ta.length===0&&i.L_();break}s=o.batchId,xN(e,o)}catch(o){await wf(e,o)}Hv(e)&&Fv(e)}function yN(r){return Za(r)&&r.Ta.length<10}function xN(r,e){r.Ta.push(e);const i=ha(r);i.O_()&&i.X_&&i.ea(e.mutations)}function Hv(r){return Za(r)&&!ha(r).x_()&&r.Ta.length>0}function Fv(r){ha(r).start()}async function bN(r){ha(r).ra()}async function vN(r){const e=ha(r);for(const i of r.Ta)e.ea(i.mutations)}async function _N(r,e,i){const s=r.Ta.shift(),o=s0.from(s,e,i);await qv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Ff(r)}async function EN(r,e){e&&ha(r).X_&&await(async function(s,o){if((function(h){return s6(h)&&h!==ie.ABORTED})(o.code)){const c=s.Ta.shift();ha(s).B_(),await qv(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await Ff(s)}})(r,e),Hv(r)&&Fv(r)}async function _x(r,e){const i=Le(r);i.asyncQueue.verifyOperationInProgress(),be(Ya,"RemoteStore received new credentials");const s=Za(i);i.Ea.add(3),await Nc(i),s&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Hf(i)}async function TN(r,e){const i=Le(r);e?(i.Ea.delete(2),await Hf(i)):e||(i.Ea.add(2),await Nc(i),i.Ra.set("Unknown"))}function rl(r){return r.ma||(r.ma=(function(i,s,o){const c=Le(i);return c.sa(),new oN(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:dN.bind(null,r),t_:mN.bind(null,r),r_:gN.bind(null,r),H_:pN.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),m0(r)?d0(r):r.Ra.set("Unknown")):(await r.ma.stop(),Bv(r))}))),r.ma}function ha(r){return r.fa||(r.fa=(function(i,s,o){const c=Le(i);return c.sa(),new lN(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:bN.bind(null,r),r_:EN.bind(null,r),ta:vN.bind(null,r),na:_N.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Ff(r)):(await r.fa.stop(),r.Ta.length>0&&(be(Ya,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class g0{constructor(e,i,s,o,c){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,s,o,c){const h=Date.now()+s,y=new g0(e,i,h,o,c);return y.start(s),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function p0(r,e){if(mr("AsyncQueue",`${e}: ${r}`),sl(r))return new Te(ie.UNAVAILABLE,`${e}: ${r}`);throw r}class Fo{static emptySet(e){return new Fo(e.comparator)}constructor(e){this.comparator=e?(i,s)=>e(i,s)||Re.comparator(i.key,s.key):(i,s)=>Re.comparator(i.key,s.key),this.keyedMap=Ql(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,s)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Fo)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const s=new Fo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=i,s}}class Ex{constructor(){this.ga=new Bt(Re.comparator)}track(e){const i=e.doc.key,s=this.ga.get(i);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(i,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(i,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(i):e.type===1&&s.type===2?this.ga=this.ga.insert(i,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):De(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,s)=>{e.push(s)})),e}}class Wo{constructor(e,i,s,o,c,h,y,p,x){this.query=e,this.docs=i,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=y,this.excludesMetadataChanges=p,this.hasCachedResults=x}static fromInitialDocuments(e,i,s,o,c){const h=[];return i.forEach((y=>{h.push({type:0,doc:y})})),new Wo(e,i,Fo.emptySet(i),h,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,s=e.docChanges;if(i.length!==s.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==s[o].type||!i[o].doc.isEqual(s[o].doc))return!1;return!0}}class wN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class SN{constructor(){this.queries=Tx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,s){const o=Le(i),c=o.queries;o.queries=Tx(),c.forEach(((h,y)=>{for(const p of y.Sa)p.onError(s)}))})(this,new Te(ie.ABORTED,"Firestore shutting down"))}}function Tx(){return new $a((r=>cv(r)),Lf)}async function AN(r,e){const i=Le(r);let s=3;const o=e.query;let c=i.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new wN,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await i.onListen(o,!0);break;case 1:c.wa=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(h){const y=p0(h,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(y)}i.queries.set(o,c),c.Sa.push(e),e.va(i.onlineState),c.wa&&e.Fa(c.wa)&&y0(i)}async function NN(r,e){const i=Le(r),s=e.query;let o=3;const c=i.queries.get(s);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function RN(r,e){const i=Le(r);let s=!1;for(const o of e){const c=o.query,h=i.queries.get(c);if(h){for(const y of h.Sa)y.Fa(o)&&(s=!0);h.wa=o}}s&&y0(i)}function CN(r,e,i){const s=Le(r),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(i);s.queries.delete(e)}function y0(r){r.Ca.forEach((e=>{e.next()}))}var Dm,wx;(wx=Dm||(Dm={})).Ma="default",wx.Cache="cache";class IN{constructor(e,i,s){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Wo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const s=i!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dm.Cache}}class Gv{constructor(e){this.key=e}}class Yv{constructor(e){this.key=e}}class DN{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=uv(e),this.tu=new Fo(this.eu)}get nu(){return this.Ya}ru(e,i){const s=i?i.iu:new Ex,o=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,h=o,y=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,x=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,w)=>{const C=o.get(E),U=Uf(this.query,w)?w:null,W=!!C&&this.mutatedKeys.has(C.key),X=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let oe=!1;C&&U?C.data.isEqual(U.data)?W!==X&&(s.track({type:3,doc:U}),oe=!0):this.su(C,U)||(s.track({type:2,doc:U}),oe=!0,(p&&this.eu(U,p)>0||x&&this.eu(U,x)<0)&&(y=!0)):!C&&U?(s.track({type:0,doc:U}),oe=!0):C&&!U&&(s.track({type:1,doc:C}),oe=!0,(p||x)&&(y=!0)),oe&&(U?(h=h.add(U),c=X?c.add(E):c.delete(E)):(h=h.delete(E),c=c.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),c=c.delete(E.key),s.track({type:1,doc:E})}return{tu:h,iu:s,Cs:y,mutatedKeys:c}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,w)=>(function(U,W){const X=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Rt:oe})}};return X(U)-X(W)})(E.type,w.type)||this.eu(E.doc,w.doc))),this.ou(s),o=o??!1;const y=i&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,x=p!==this.Za;return this.Za=p,h.length!==0||x?{snapshot:new Wo(this.query,e.tu,c,h,e.mutatedKeys,p===0,x,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ex,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=We(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const i=[];return e.forEach((s=>{this.Xa.has(s)||i.push(new Yv(s))})),this.Xa.forEach((s=>{e.has(s)||i.push(new Gv(s))})),i}cu(e){this.Ya=e.Qs,this.Xa=We();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return Wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const x0="SyncEngine";class MN{constructor(e,i,s){this.query=e,this.targetId=i,this.view=s}}class ON{constructor(e){this.key=e,this.hu=!1}}class kN{constructor(e,i,s,o,c,h){this.localStore=e,this.remoteStore=i,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new $a((y=>cv(y)),Lf),this.Iu=new Map,this.Eu=new Set,this.du=new Bt(Re.comparator),this.Au=new Map,this.Ru=new o0,this.Vu={},this.mu=new Map,this.fu=Jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jN(r,e,i=!0){const s=Jv(r);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Qv(s,e,i,!0),o}async function VN(r,e){const i=Jv(r);await Qv(i,e,!0,!1)}async function Qv(r,e,i,s){const o=await W6(r.localStore,Cs(e)),c=o.targetId,h=r.sharedClientState.addLocalQueryTarget(c,i);let y;return s&&(y=await LN(r,e,c,h==="current",o.resumeToken)),r.isPrimaryClient&&i&&Pv(r.remoteStore,o),y}async function LN(r,e,i,s,o){r.pu=(w,C,U)=>(async function(X,oe,me,Ne){let xe=oe.view.ru(me);xe.Cs&&(xe=await px(X.localStore,oe.query,!1).then((({documents:D})=>oe.view.ru(D,xe))));const Fe=Ne&&Ne.targetChanges.get(oe.targetId),Ae=Ne&&Ne.targetMismatches.get(oe.targetId)!=null,Ue=oe.view.applyChanges(xe,X.isPrimaryClient,Fe,Ae);return Ax(X,oe.targetId,Ue.au),Ue.snapshot})(r,w,C,U);const c=await px(r.localStore,e,!0),h=new DN(e,c.Qs),y=h.ru(c.documents),p=Ac.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",o),x=h.applyChanges(y,r.isPrimaryClient,p);Ax(r,i,x.au);const E=new MN(e,i,h);return r.Tu.set(e,E),r.Iu.has(i)?r.Iu.get(i).push(e):r.Iu.set(i,[e]),x.snapshot}async function UN(r,e,i){const s=Le(r),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((h=>!Lf(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Cm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),i&&f0(s.remoteStore,o.targetId),Mm(s,o.targetId)})).catch(il)):(Mm(s,o.targetId),await Cm(s.localStore,o.targetId,!0))}async function PN(r,e){const i=Le(r),s=i.Tu.get(e),o=i.Iu.get(s.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),f0(i.remoteStore,s.targetId))}async function zN(r,e,i){const s=QN(r);try{const o=await(function(h,y){const p=Le(h),x=It.now(),E=y.reduce(((U,W)=>U.add(W.key)),We());let w,C;return p.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let W=gr(),X=We();return p.Ns.getEntries(U,E).next((oe=>{W=oe,W.forEach(((me,Ne)=>{Ne.isValidDocument()||(X=X.add(me))}))})).next((()=>p.localDocuments.getOverlayedDocuments(U,W))).next((oe=>{w=oe;const me=[];for(const Ne of y){const xe=W4(Ne,w.get(Ne.key).overlayedDocument);xe!=null&&me.push(new Xa(Ne.key,xe,nv(xe.value.mapValue),cr.exists(!0)))}return p.mutationQueue.addMutationBatch(U,x,me,y)})).next((oe=>{C=oe;const me=oe.applyToLocalDocumentSet(w,X);return p.documentOverlayCache.saveOverlays(U,oe.batchId,me)}))})).then((()=>({batchId:C.batchId,changes:hv(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,y,p){let x=h.Vu[h.currentUser.toKey()];x||(x=new Bt(Je)),x=x.insert(y,p),h.Vu[h.currentUser.toKey()]=x})(s,o.batchId,i),await Rc(s,o.changes),await Ff(s.remoteStore)}catch(o){const c=p0(o,"Failed to persist write");i.reject(c)}}async function Kv(r,e){const i=Le(r);try{const s=await X6(i.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=i.Au.get(c);h&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?mt(h.hu,14607):o.removedDocuments.size>0&&(mt(h.hu,42227),h.hu=!1))})),await Rc(i,s,e)}catch(s){await il(s)}}function Sx(r,e,i){const s=Le(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const o=[];s.Tu.forEach(((c,h)=>{const y=h.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(h,y){const p=Le(h);p.onlineState=y;let x=!1;p.queries.forEach(((E,w)=>{for(const C of w.Sa)C.va(y)&&(x=!0)})),x&&y0(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function BN(r,e,i){const s=Le(r);s.sharedClientState.updateQueryState(e,"rejected",i);const o=s.Au.get(e),c=o&&o.key;if(c){let h=new Bt(Re.comparator);h=h.insert(c,Gn.newNoDocument(c,ke.min()));const y=We().add(c),p=new Bf(ke.min(),new Map,new Bt(Je),h,y);await Kv(s,p),s.du=s.du.remove(c),s.Au.delete(e),b0(s)}else await Cm(s.localStore,e,!1).then((()=>Mm(s,e,i))).catch(il)}async function qN(r,e){const i=Le(r),s=e.batch.batchId;try{const o=await $6(i.localStore,e);Xv(i,s,null),$v(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await Rc(i,o)}catch(o){await il(o)}}async function HN(r,e,i){const s=Le(r);try{const o=await(function(h,y){const p=Le(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let E;return p.mutationQueue.lookupMutationBatch(x,y).next((w=>(mt(w!==null,37113),E=w.keys(),p.mutationQueue.removeMutationBatch(x,w)))).next((()=>p.mutationQueue.performConsistencyCheck(x))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(x,E,y))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,E))).next((()=>p.localDocuments.getDocuments(x,E)))}))})(s.localStore,e);Xv(s,e,i),$v(s,e),s.sharedClientState.updateMutationState(e,"rejected",i),await Rc(s,o)}catch(o){await il(o)}}function $v(r,e){(r.mu.get(e)||[]).forEach((i=>{i.resolve()})),r.mu.delete(e)}function Xv(r,e,i){const s=Le(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(i?c.reject(i):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Mm(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),i&&r.Pu.yu(s,i);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Zv(r,s)}))}function Zv(r,e){r.Eu.delete(e.path.canonicalString());const i=r.du.get(e);i!==null&&(f0(r.remoteStore,i),r.du=r.du.remove(e),r.Au.delete(i),b0(r))}function Ax(r,e,i){for(const s of i)s instanceof Gv?(r.Ru.addReference(s.key,e),FN(r,s)):s instanceof Yv?(be(x0,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Zv(r,s.key)):De(19791,{wu:s})}function FN(r,e){const i=e.key,s=i.path.canonicalString();r.du.get(i)||r.Eu.has(s)||(be(x0,"New document in limbo: "+i),r.Eu.add(s),b0(r))}function b0(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const i=new Re(zt.fromString(e)),s=r.fu.next();r.Au.set(s,new ON(i)),r.du=r.du.insert(i,s),Pv(r.remoteStore,new ta(Cs(n0(i.path)),s,"TargetPurposeLimboResolution",Of.ce))}}async function Rc(r,e,i){const s=Le(r),o=[],c=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,p)=>{h.push(s.pu(p,e,i).then((x=>{if((x||i)&&s.isPrimaryClient){const E=x?!x.fromCache:i?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(x){o.push(x);const E=c0.As(p.targetId,x);c.push(E)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(p,x){const E=Le(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>te.forEach(x,(C=>te.forEach(C.Es,(U=>E.persistence.referenceDelegate.addReference(w,C.targetId,U))).next((()=>te.forEach(C.ds,(U=>E.persistence.referenceDelegate.removeReference(w,C.targetId,U)))))))))}catch(w){if(!sl(w))throw w;be(u0,"Failed to update sequence numbers: "+w)}for(const w of x){const C=w.targetId;if(!w.fromCache){const U=E.Ms.get(C),W=U.snapshotVersion,X=U.withLastLimboFreeSnapshotVersion(W);E.Ms=E.Ms.insert(C,X)}}})(s.localStore,c))}async function GN(r,e){const i=Le(r);if(!i.currentUser.isEqual(e)){be(x0,"User change. New user:",e.toKey());const s=await jv(i.localStore,e);i.currentUser=e,(function(c,h){c.mu.forEach((y=>{y.forEach((p=>{p.reject(new Te(ie.CANCELLED,h))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Rc(i,s.Ls)}}function YN(r,e){const i=Le(r),s=i.Au.get(e);if(s&&s.hu)return We().add(s.key);{let o=We();const c=i.Iu.get(e);if(!c)return o;for(const h of c){const y=i.Tu.get(h);o=o.unionWith(y.view.nu)}return o}}function Jv(r){const e=Le(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BN.bind(null,e),e.Pu.H_=RN.bind(null,e.eventManager),e.Pu.yu=CN.bind(null,e.eventManager),e}function QN(r){const e=Le(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HN.bind(null,e),e}class Sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return K6(this.persistence,new G6,e.initialUser,this.serializer)}Cu(e){return new kv(l0.mi,this.serializer)}Du(e){return new tN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Sf.provider={build:()=>new Sf};class KN extends Sf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){mt(this.persistence.referenceDelegate instanceof Tf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new I6(s,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?pi.withCacheSize(this.cacheSizeBytes):pi.DEFAULT;return new kv((s=>Tf.mi(s,i)),this.serializer)}}class Om{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Sx(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=GN.bind(null,this.syncEngine),await TN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new SN})()}createDatastore(e){const i=qf(e.databaseInfo.databaseId),s=(function(c){return new aN(c)})(e.databaseInfo);return(function(c,h,y,p){return new uN(c,h,y,p)})(e.authCredentials,e.appCheckCredentials,s,i)}createRemoteStore(e){return(function(s,o,c,h,y){return new hN(s,o,c,h,y)})(this.localStore,this.datastore,e.asyncQueue,(i=>Sx(this.syncEngine,i,0)),(function(){return bx.v()?new bx:new nN})())}createSyncEngine(e,i){return(function(o,c,h,y,p,x,E){const w=new kN(o,c,h,y,p,x);return E&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const s=Le(i);be(Ya,"RemoteStore shutting down."),s.Ea.add(5),await Nc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Om.provider={build:()=>new Om};class $N{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}const da="FirestoreClient";class XN{constructor(e,i,s,o,c){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=o,this.user=Fn.UNAUTHENTICATED,this.clientId=$m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async h=>{be(da,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(be(da,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const s=p0(i,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function sm(r,e){r.asyncQueue.verifyOperationInProgress(),be(da,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let s=i.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await jv(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Nx(r,e){r.asyncQueue.verifyOperationInProgress();const i=await ZN(r);be(da,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener((s=>_x(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>_x(e.remoteStore,o))),r._onlineComponents=e}async function ZN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){be(da,"Using user provided OfflineComponentProvider");try{await sm(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(i))throw i;Ko("Error using user provided cache. Falling back to memory cache: "+i),await sm(r,new Sf)}}else be(da,"Using default OfflineComponentProvider"),await sm(r,new KN(void 0));return r._offlineComponents}async function Wv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(be(da,"Using user provided OnlineComponentProvider"),await Nx(r,r._uninitializedComponentsProvider._online)):(be(da,"Using default OnlineComponentProvider"),await Nx(r,new Om))),r._onlineComponents}function JN(r){return Wv(r).then((e=>e.syncEngine))}async function Rx(r){const e=await Wv(r),i=e.eventManager;return i.onListen=jN.bind(null,e.syncEngine),i.onUnlisten=UN.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=VN.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=PN.bind(null,e.syncEngine),i}function e_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Cx=new Map;const t_="firestore.googleapis.com",Ix=!0;class Dx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=t_,this.ssl=Ix}else this.host=e.host,this.ssl=e.ssl??Ix;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ov)throw new Te(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e_(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Te(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v0{constructor(e,i,s,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new t4;switch(s.type){case"firstParty":return new r4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Te(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const s=Cx.get(i);s&&(be("ComponentProvider","Removing Datastore"),Cx.delete(i),s.terminate())})(this),Promise.resolve()}}function WN(r,e,i,s={}){r=Ho(r,v0);const o=Qa(e),c=r._getSettings(),h={...c,emulatorOptions:r._getEmulatorOptions()},y=`${e}:${i}`;o&&(Lm(`https://${y}`),nb("Firestore",!0)),c.host!==t_&&c.host!==y&&Ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:y,ssl:o,emulatorOptions:s};if(!oa(p,h)&&(r._setSettings(p),s.mockUserToken)){let x,E;if(typeof s.mockUserToken=="string")x=s.mockUserToken,E=Fn.MOCK_USER;else{x=AT(s.mockUserToken,r._app?.options.projectId);const w=s.mockUserToken.sub||s.mockUserToken.user_id;if(!w)throw new Te(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Fn(w)}r._authCredentials=new n4(new Gb(x,E))}}class Gf{constructor(e,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Gf(this.firestore,e,this._query)}}class En{constructor(e,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}toJSON(){return{type:En._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,s){if(wc(i,En._jsonSchema))return new En(e,s||null,new Re(zt.fromString(i.referencePath)))}}En._jsonSchemaVersion="firestore/documentReference/1.0",En._jsonSchema={type:un("string",En._jsonSchemaVersion),referencePath:un("string")};class mc extends Gf{constructor(e,i,s){super(e,i,n0(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new Re(e))}withConverter(e){return new mc(this.firestore,e,this._path)}}function rm(r,e,...i){if(r=Hi(r),arguments.length===1&&(e=$m.newId()),f4("doc","path",e),r instanceof v0){const s=zt.fromString(e,...i);return F1(s),new En(r,null,new Re(s))}{if(!(r instanceof En||r instanceof mc))throw new Te(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(zt.fromString(e,...i));return F1(s),new En(r.firestore,r instanceof mc?r.converter:null,new Re(s))}}const Mx="AsyncQueue";class Ox{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Lv(this,"async_queue_retry"),this._c=()=>{const s=im();s&&be(Mx,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const i=im();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=im();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Ba;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;be(Mx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,mr("INTERNAL UNHANDLED ERROR: ",kx(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=i,i}enqueueAfterDelay(e,i,s){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const o=g0.createAndSchedule(this,e,i,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&De(47125,{Pc:kx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,s)=>i.targetTimeMs-s.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function kx(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function jx(r){return(function(i,s){if(typeof i!="object"||i===null)return!1;const o=i;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Af extends v0{constructor(e,i,s,o){super(e,i,s,o),this.type="firestore",this._queue=new Ox,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ox(e),this._firestoreClient=void 0,await e}}}function e3(r,e,i){i||(i=cc);const s=If(r,"firestore");if(s.isInitialized(i)){const o=s.getImmediate({identifier:i}),c=s.getOptions(i);if(oa(c,e))return o;throw new Te(ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Te(ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ov)throw new Te(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Qa(e.host)&&Lm(e.host),s.initialize({options:e,instanceIdentifier:i})}function Vx(r,e){const i=typeof r=="object"?r:cf(),s=typeof r=="string"?r:cc,o=If(i,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=wT("firestore");c&&WN(o,...c)}return o}function n_(r){if(r._terminated)throw new Te(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||t3(r),r._firestoreClient}function t3(r){const e=r._freezeSettings(),i=(function(o,c,h,y){return new T4(o,c,h,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,e_(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new XN(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class qi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qi(On.fromBase64String(e))}catch(i){throw new Te(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new qi(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wc(e,qi._jsonSchema))return qi.fromBase64String(e.bytes)}}qi._jsonSchemaVersion="firestore/bytes/1.0",qi._jsonSchema={type:un("string",qi._jsonSchemaVersion),bytes:un("string")};class _0{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new Te(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class i_{constructor(e){this._methodName=e}}class Ds{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new Te(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new Te(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ds._jsonSchemaVersion}}static fromJSON(e){if(wc(e,Ds._jsonSchema))return new Ds(e.latitude,e.longitude)}}Ds._jsonSchemaVersion="firestore/geoPoint/1.0",Ds._jsonSchema={type:un("string",Ds._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};class Ms{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ms._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wc(e,Ms._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new Ms(e.vectorValues);throw new Te(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ms._jsonSchemaVersion="firestore/vectorValue/1.0",Ms._jsonSchema={type:un("string",Ms._jsonSchemaVersion),vectorValues:un("object")};const n3=/^__.*__$/;class i3{constructor(e,i,s){this.data=e,this.fieldMask=i,this.fieldTransforms=s}toMutation(e,i){return this.fieldMask!==null?new Xa(e,this.data,this.fieldMask,i,this.fieldTransforms):new Sc(e,this.data,i,this.fieldTransforms)}}function s_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{Ac:r})}}class E0{constructor(e,i,s,o,c,h){this.settings=e,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new E0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),s=this.Vc({path:i,fc:!1});return s.gc(e),s}yc(e){const i=this.path?.child(e),s=this.Vc({path:i,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(s_(this.Ac)&&n3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class s3{constructor(e,i,s){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=s||qf(e)}Cc(e,i,s,o=!1){return new E0({Ac:e,methodName:i,Dc:s,path:Mn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function r3(r){const e=r._freezeSettings(),i=qf(r._databaseId);return new s3(r._databaseId,!!e.ignoreUndefinedProperties,i)}function a3(r,e,i,s,o,c={}){const h=r.Cc(c.merge||c.mergeFields?2:0,e,i,o);l_("Data must be an object, but it was:",h,s);const y=a_(s,h);let p,x;if(c.merge)p=new os(h.fieldMask),x=h.fieldTransforms;else if(c.mergeFields){const E=[];for(const w of c.mergeFields){const C=o3(e,w,i);if(!h.contains(C))throw new Te(ie.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);c3(E,C)||E.push(C)}p=new os(E),x=h.fieldTransforms.filter((w=>p.covers(w.field)))}else p=null,x=h.fieldTransforms;return new i3(new Bi(y),p,x)}function r_(r,e){if(o_(r=Hi(r)))return l_("Unsupported field value:",e,r),a_(r,e);if(r instanceof i_)return(function(s,o){if(!s_(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let h=0;for(const y of s){let p=r_(y,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),h++}return{arrayValue:{values:c}}})(r,e)}return(function(s,o){if((s=Hi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Q4(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=It.fromDate(s);return{timestampValue:Ef(o.serializer,c)}}if(s instanceof It){const c=new It(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ef(o.serializer,c)}}if(s instanceof Ds)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof qi)return{bytesValue:Sv(o.serializer,s._byteString)};if(s instanceof En){const c=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:a0(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ms)return(function(h,y){return{mapValue:{fields:{[ev]:{stringValue:tv},[yf]:{arrayValue:{values:h.toArray().map((x=>{if(typeof x!="number")throw y.Sc("VectorValues must only contain numeric values.");return i0(y.serializer,x)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Xm(s)}`)})(r,e)}function a_(r,e){const i={};return Kb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(r,((s,o)=>{const c=r_(o,e.mc(s));c!=null&&(i[s]=c)})),{mapValue:{fields:i}}}function o_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof It||r instanceof Ds||r instanceof qi||r instanceof En||r instanceof i_||r instanceof Ms)}function l_(r,e,i){if(!o_(i)||!Yb(i)){const s=Xm(i);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function o3(r,e,i){if((e=Hi(e))instanceof _0)return e._internalPath;if(typeof e=="string")return c_(r,e);throw Nf("Field path arguments must be of type string or ",r,!1,void 0,i)}const l3=new RegExp("[~\\*/\\[\\]]");function c_(r,e,i){if(e.search(l3)>=0)throw Nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new _0(...e.split("."))._internalPath}catch{throw Nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function Nf(r,e,i,s,o){const c=s&&!s.isEmpty(),h=o!==void 0;let y=`Function ${e}() called with invalid data`;i&&(y+=" (via `toFirestore()`)"),y+=". ";let p="";return(c||h)&&(p+=" (found",c&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new Te(ie.INVALID_ARGUMENT,y+r+p)}function c3(r,e){return r.some((i=>i.isEqual(e)))}class u_{constructor(e,i,s,o,c){this._firestore=e,this._userDataWriter=i,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new u3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(f_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class u3 extends u_{data(){return super.data()}}function f_(r,e){return typeof e=="string"?c_(r,e):e instanceof _0?e._internalPath:e._delegate._internalPath}function f3(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Te(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h3{convertValue(e,i="none"){switch(fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const s={};return Ka(e,((o,c)=>{s[o]=this.convertValue(c,i)})),s}convertVectorValue(e){const i=e.fields?.[yf].arrayValue?.values?.map((s=>tn(s.doubleValue)));return new Ms(i)}convertGeoPoint(e){return new Ds(tn(e.latitude),tn(e.longitude))}convertArray(e,i){return(e.values||[]).map((s=>this.convertValue(s,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const s=jf(e);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const i=ca(e);return new It(i.seconds,i.nanos)}convertDocumentKey(e,i){const s=zt.fromString(e);mt(Dv(s),9688,{name:e});const o=new uc(s.get(1),s.get(3)),c=new Re(s.popFirst(5));return o.isEqual(i)||mr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}function d3(r,e,i){let s;return s=r?r.toFirestore(e):e,s}class $l{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qa extends u_{constructor(e,i,s,o,c,h){super(e,i,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new sf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const s=this._document.data.field(f_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=qa._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}qa._jsonSchemaVersion="firestore/documentSnapshot/1.0",qa._jsonSchema={type:un("string",qa._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class sf extends qa{data(e={}){return super.data(e)}}class Go{constructor(e,i,s,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new $l(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((s=>{e.call(i,new sf(this._firestore,this._userDataWriter,s.key,s,new $l(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new Te(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((y=>{const p=new sf(o._firestore,o._userDataWriter,y.doc.key,y.doc,new $l(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>c||y.type!==3)).map((y=>{const p=new sf(o._firestore,o._userDataWriter,y.doc.key,y.doc,new $l(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,E=-1;return y.type!==0&&(x=h.indexOf(y.doc.key),h=h.delete(y.doc.key)),y.type!==1&&(h=h.add(y.doc),E=h.indexOf(y.doc.key)),{type:m3(y.type),doc:p,oldIndex:x,newIndex:E}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function m3(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:r})}}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:un("string",Go._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};class h_ extends h3{constructor(e){super(),this.firestore=e}convertBytes(e){return new qi(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,i)}}function Lx(r,e,i){r=Ho(r,En);const s=Ho(r.firestore,Af),o=d3(r.converter,e);return p3(s,[a3(r3(s),"setDoc",r._key,o,r.converter!==null,i).toMutation(r._key,cr.none())])}function g3(r,...e){r=Hi(r);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||jx(e[s])||(i=e[s++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(jx(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let c,h,y;if(r instanceof En)h=Ho(r.firestore,Af),y=n0(r._key.path),c={next:p=>{e[s]&&e[s](y3(h,r,p))},error:e[s+1],complete:e[s+2]};else{const p=Ho(r,Gf);h=Ho(p.firestore,Af),y=p._query;const x=new h_(h);c={next:E=>{e[s]&&e[s](new Go(h,x,p,E))},error:e[s+1],complete:e[s+2]},f3(r._query)}return(function(x,E,w,C){const U=new $N(C),W=new IN(E,U,w);return x.asyncQueue.enqueueAndForget((async()=>AN(await Rx(x),W))),()=>{U.Nu(),x.asyncQueue.enqueueAndForget((async()=>NN(await Rx(x),W)))}})(n_(h),y,o,c)}function p3(r,e){return(function(s,o){const c=new Ba;return s.asyncQueue.enqueueAndForget((async()=>zN(await JN(s),o,c))),c.promise})(n_(r),e)}function y3(r,e,i){const s=i.docs.get(e._key),o=new h_(r);return new qa(r,o,e._key,s,new $l(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(o){nl=o})(el),Qo(new Ha("firestore",((s,{instanceIdentifier:o,options:c})=>{const h=s.getProvider("app").getImmediate(),y=new Af(new i4(s.getProvider("auth-internal")),new a4(h,s.getProvider("app-check-internal")),(function(x,E){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new Te(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uc(x.options.projectId,E)})(h,o),h);return c={useFetchStreams:i,...c},y._setSettings(c),y}),"PUBLIC").setMultipleInstances(!0)),sa(z1,B1,e),sa(z1,B1,"esm2020")})();const x3={};var km=null;function b3(r){try{return crypto.getRandomValues(new Uint8Array(r))}catch{}try{return x3.randomBytes(r)}catch{}if(!km)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return km(r)}function v3(r){km=r}function T0(r,e){if(r=r||w0,typeof r!="number")throw Error("Illegal arguments: "+typeof r+", "+typeof e);r<4?r=4:r>31&&(r=31);var i=[];return i.push("$2b$"),r<10&&i.push("0"),i.push(r.toString()),i.push("$"),i.push(Rf(b3(gc),gc)),i.join("")}function d_(r,e,i){if(typeof e=="function"&&(i=e,e=void 0),typeof r=="function"&&(i=r,r=void 0),typeof r>"u")r=w0;else if(typeof r!="number")throw Error("illegal arguments: "+typeof r);function s(o){ls(function(){try{o(null,T0(r))}catch(c){o(c)}})}if(i){if(typeof i!="function")throw Error("Illegal callback: "+typeof i);s(i)}else return new Promise(function(o,c){s(function(h,y){if(h){c(h);return}o(y)})})}function m_(r,e){if(typeof e>"u"&&(e=w0),typeof e=="number"&&(e=T0(e)),typeof r!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof r+", "+typeof e);return jm(r,e)}function g_(r,e,i,s){function o(c){typeof r=="string"&&typeof e=="number"?d_(e,function(h,y){jm(r,y,c,s)}):typeof r=="string"&&typeof e=="string"?jm(r,e,c,s):ls(c.bind(this,Error("Illegal arguments: "+typeof r+", "+typeof e)))}if(i){if(typeof i!="function")throw Error("Illegal callback: "+typeof i);o(i)}else return new Promise(function(c,h){o(function(y,p){if(y){h(y);return}c(p)})})}function p_(r,e){for(var i=r.length^e.length,s=0;s<r.length;++s)i|=r.charCodeAt(s)^e.charCodeAt(s);return i===0}function _3(r,e){if(typeof r!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof r+", "+typeof e);return e.length!==60?!1:p_(m_(r,e.substring(0,e.length-31)),e)}function E3(r,e,i,s){function o(c){if(typeof r!="string"||typeof e!="string"){ls(c.bind(this,Error("Illegal arguments: "+typeof r+", "+typeof e)));return}if(e.length!==60){ls(c.bind(this,null,!1));return}g_(r,e.substring(0,29),function(h,y){h?c(h):c(null,p_(y,e))},s)}if(i){if(typeof i!="function")throw Error("Illegal callback: "+typeof i);o(i)}else return new Promise(function(c,h){o(function(y,p){if(y){h(y);return}c(p)})})}function T3(r){if(typeof r!="string")throw Error("Illegal arguments: "+typeof r);return parseInt(r.split("$")[2],10)}function w3(r){if(typeof r!="string")throw Error("Illegal arguments: "+typeof r);if(r.length!==60)throw Error("Illegal hash length: "+r.length+" != 60");return r.substring(0,29)}function S3(r){if(typeof r!="string")throw Error("Illegal arguments: "+typeof r);return y_(r)>72}var ls=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;function y_(r){for(var e=0,i=0,s=0;s<r.length;++s)i=r.charCodeAt(s),i<128?e+=1:i<2048?e+=2:(i&64512)===55296&&(r.charCodeAt(s+1)&64512)===56320?(++s,e+=4):e+=3;return e}function A3(r){for(var e=0,i,s,o=new Array(y_(r)),c=0,h=r.length;c<h;++c)i=r.charCodeAt(c),i<128?o[e++]=i:i<2048?(o[e++]=i>>6|192,o[e++]=i&63|128):(i&64512)===55296&&((s=r.charCodeAt(c+1))&64512)===56320?(i=65536+((i&1023)<<10)+(s&1023),++c,o[e++]=i>>18|240,o[e++]=i>>12&63|128,o[e++]=i>>6&63|128,o[e++]=i&63|128):(o[e++]=i>>12|224,o[e++]=i>>6&63|128,o[e++]=i&63|128);return o}var Oo="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Kr=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Rf(r,e){var i=0,s=[],o,c;if(e<=0||e>r.length)throw Error("Illegal len: "+e);for(;i<e;){if(o=r[i++]&255,s.push(Oo[o>>2&63]),o=(o&3)<<4,i>=e){s.push(Oo[o&63]);break}if(c=r[i++]&255,o|=c>>4&15,s.push(Oo[o&63]),o=(c&15)<<2,i>=e){s.push(Oo[o&63]);break}c=r[i++]&255,o|=c>>6&3,s.push(Oo[o&63]),s.push(Oo[c&63])}return s.join("")}function x_(r,e){var i=0,s=r.length,o=0,c=[],h,y,p,x,E,w;if(e<=0)throw Error("Illegal len: "+e);for(;i<s-1&&o<e&&(w=r.charCodeAt(i++),h=w<Kr.length?Kr[w]:-1,w=r.charCodeAt(i++),y=w<Kr.length?Kr[w]:-1,!(h==-1||y==-1||(E=h<<2>>>0,E|=(y&48)>>4,c.push(String.fromCharCode(E)),++o>=e||i>=s)||(w=r.charCodeAt(i++),p=w<Kr.length?Kr[w]:-1,p==-1)||(E=(y&15)<<4>>>0,E|=(p&60)>>2,c.push(String.fromCharCode(E)),++o>=e||i>=s)));)w=r.charCodeAt(i++),x=w<Kr.length?Kr[w]:-1,E=(p&3)<<6>>>0,E|=x,c.push(String.fromCharCode(E)),++o;var C=[];for(i=0;i<o;i++)C.push(c[i].charCodeAt(0));return C}var gc=16,w0=10,N3=16,R3=100,Ux=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Px=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],b_=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function pc(r,e,i,s){var o,c=r[e],h=r[e+1];return c^=i[0],o=s[c>>>24],o+=s[256|c>>16&255],o^=s[512|c>>8&255],o+=s[768|c&255],h^=o^i[1],o=s[h>>>24],o+=s[256|h>>16&255],o^=s[512|h>>8&255],o+=s[768|h&255],c^=o^i[2],o=s[c>>>24],o+=s[256|c>>16&255],o^=s[512|c>>8&255],o+=s[768|c&255],h^=o^i[3],o=s[h>>>24],o+=s[256|h>>16&255],o^=s[512|h>>8&255],o+=s[768|h&255],c^=o^i[4],o=s[c>>>24],o+=s[256|c>>16&255],o^=s[512|c>>8&255],o+=s[768|c&255],h^=o^i[5],o=s[h>>>24],o+=s[256|h>>16&255],o^=s[512|h>>8&255],o+=s[768|h&255],c^=o^i[6],o=s[c>>>24],o+=s[256|c>>16&255],o^=s[512|c>>8&255],o+=s[768|c&255],h^=o^i[7],o=s[h>>>24],o+=s[256|h>>16&255],o^=s[512|h>>8&255],o+=s[768|h&255],c^=o^i[8],o=s[c>>>24],o+=s[256|c>>16&255],o^=s[512|c>>8&255],o+=s[768|c&255],h^=o^i[9],o=s[h>>>24],o+=s[256|h>>16&255],o^=s[512|h>>8&255],o+=s[768|h&255],c^=o^i[10],o=s[c>>>24],o+=s[256|c>>16&255],o^=s[512|c>>8&255],o+=s[768|c&255],h^=o^i[11],o=s[h>>>24],o+=s[256|h>>16&255],o^=s[512|h>>8&255],o+=s[768|h&255],c^=o^i[12],o=s[c>>>24],o+=s[256|c>>16&255],o^=s[512|c>>8&255],o+=s[768|c&255],h^=o^i[13],o=s[h>>>24],o+=s[256|h>>16&255],o^=s[512|h>>8&255],o+=s[768|h&255],c^=o^i[14],o=s[c>>>24],o+=s[256|c>>16&255],o^=s[512|c>>8&255],o+=s[768|c&255],h^=o^i[15],o=s[h>>>24],o+=s[256|h>>16&255],o^=s[512|h>>8&255],o+=s[768|h&255],c^=o^i[16],r[e]=h^i[N3+1],r[e+1]=c,r}function Uo(r,e){for(var i=0,s=0;i<4;++i)s=s<<8|r[e]&255,e=(e+1)%r.length;return{key:s,offp:e}}function zx(r,e,i){for(var s=0,o=[0,0],c=e.length,h=i.length,y,p=0;p<c;p++)y=Uo(r,s),s=y.offp,e[p]=e[p]^y.key;for(p=0;p<c;p+=2)o=pc(o,0,e,i),e[p]=o[0],e[p+1]=o[1];for(p=0;p<h;p+=2)o=pc(o,0,e,i),i[p]=o[0],i[p+1]=o[1]}function C3(r,e,i,s){for(var o=0,c=[0,0],h=i.length,y=s.length,p,x=0;x<h;x++)p=Uo(e,o),o=p.offp,i[x]=i[x]^p.key;for(o=0,x=0;x<h;x+=2)p=Uo(r,o),o=p.offp,c[0]^=p.key,p=Uo(r,o),o=p.offp,c[1]^=p.key,c=pc(c,0,i,s),i[x]=c[0],i[x+1]=c[1];for(x=0;x<y;x+=2)p=Uo(r,o),o=p.offp,c[0]^=p.key,p=Uo(r,o),o=p.offp,c[1]^=p.key,c=pc(c,0,i,s),s[x]=c[0],s[x+1]=c[1]}function Bx(r,e,i,s,o){var c=b_.slice(),h=c.length,y;if(i<4||i>31)if(y=Error("Illegal number of rounds (4-31): "+i),s){ls(s.bind(this,y));return}else throw y;if(e.length!==gc)if(y=Error("Illegal salt length: "+e.length+" != "+gc),s){ls(s.bind(this,y));return}else throw y;i=1<<i>>>0;var p,x,E=0,w;typeof Int32Array=="function"?(p=new Int32Array(Ux),x=new Int32Array(Px)):(p=Ux.slice(),x=Px.slice()),C3(e,r,p,x);function C(){if(o&&o(E/i),E<i)for(var W=Date.now();E<i&&(E=E+1,zx(r,p,x),zx(e,p,x),!(Date.now()-W>R3)););else{for(E=0;E<64;E++)for(w=0;w<h>>1;w++)pc(c,w<<1,p,x);var X=[];for(E=0;E<h;E++)X.push((c[E]>>24&255)>>>0),X.push((c[E]>>16&255)>>>0),X.push((c[E]>>8&255)>>>0),X.push((c[E]&255)>>>0);if(s){s(null,X);return}else return X}s&&ls(C)}if(typeof s<"u")C();else for(var U;;)if(typeof(U=C())<"u")return U||[]}function jm(r,e,i,s){var o;if(typeof r!="string"||typeof e!="string")if(o=Error("Invalid string / salt: Not a string"),i){ls(i.bind(this,o));return}else throw o;var c,h;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(o=Error("Invalid salt version: "+e.substring(0,2)),i){ls(i.bind(this,o));return}else throw o;if(e.charAt(2)==="$")c="\0",h=3;else{if(c=e.charAt(2),c!=="a"&&c!=="b"&&c!=="y"||e.charAt(3)!=="$")if(o=Error("Invalid salt revision: "+e.substring(2,4)),i){ls(i.bind(this,o));return}else throw o;h=4}if(e.charAt(h+2)>"$")if(o=Error("Missing salt rounds"),i){ls(i.bind(this,o));return}else throw o;var y=parseInt(e.substring(h,h+1),10)*10,p=parseInt(e.substring(h+1,h+2),10),x=y+p,E=e.substring(h+3,h+25);r+=c>="a"?"\0":"";var w=A3(r),C=x_(E,gc);function U(W){var X=[];return X.push("$2"),c>="a"&&X.push(c),X.push("$"),x<10&&X.push("0"),X.push(x.toString()),X.push("$"),X.push(Rf(C,C.length)),X.push(Rf(W,b_.length*4-1)),X.join("")}if(typeof i>"u")return U(Bx(w,C,x));Bx(w,C,x,function(W,X){W?i(W,null):i(null,U(X))},s)}function I3(r,e){return Rf(r,e)}function D3(r,e){return x_(r,e)}const Yo={setRandomFallback:v3,genSaltSync:T0,genSalt:d_,hashSync:m_,hash:g_,compareSync:_3,compare:E3,getRounds:T3,getSalt:w3,truncates:S3,encodeBase64:I3,decodeBase64:D3},M3=({isOpen:r,onClose:e,targetRole:i,team:s,onLoginSuccess:o,onTeamUpdate:c,t:h,tokenExpiredMsg:y=""})=>{const[p,x]=ne.useState(""),[E,w]=ne.useState(""),[C,U]=ne.useState(""),[W,X]=ne.useState(""),[oe,me]=ne.useState(!1),[Ne,xe]=ne.useState(""),[Fe,Ae]=ne.useState(""),Ue=ne.useMemo(()=>{const A=s.reduce((V,N)=>{const Be=N.role||"Other";return V[Be]||(V[Be]=[]),V[Be].push(N),V},{}),O=["GCC","Field Dispatch","Remote Ops","TL"],M=V=>{const N=O.indexOf(V);return N===-1?O.length:N};return Object.entries(A).sort(([V],[N])=>M(V)-M(N)).map(([V,N])=>({role:V,members:N.slice().sort((Be,nt)=>Be.name.localeCompare(nt.name))}))},[s]);if(ne.useEffect(()=>{r&&(x(""),w(""),U(""),X(""),me(!1),xe(""),Ae(""))},[r,i]),!r)return null;const D=async A=>{if(A.preventDefault(),U(""),i==="manager"||i==="admin")try{if(!p||p.length<1||p.length>500){U("Invalid password format");return}const O="https://us-central1-gcc-scheduler-3ef7f.cloudfunctions.net/roleLogin",M=await fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify({role:i,password:p})});if(!M.ok){const Y=await M.json().catch(()=>({}));M.status===429?U("Too many login attempts. Try again later."):M.status===401?U(h.invalidPass):U(Y.error||h.invalidPass);return}const N=(await M.json())?.token;if(!N||typeof N!="string"){U("Invalid server response");return}const Be=Gl();try{await Be.signOut()}catch{}await pm(Be,N),sessionStorage.setItem("firebaseToken",N),sessionStorage.setItem("firebaseTokenRole",i),o(i,i==="admin"?"Admin":"Diretor",0),e()}catch(O){U(O?.code==="auth/invalid-custom-token"?"Session expired. Try again.":h.invalidPass)}else if(i==="editor"){if(!E){U(h.selectUser);return}const O=s.find(Be=>Be.id===+E);if(!O)return;const M=O.password||"1234",V=M.startsWith("$2");let N=!1;if(V?N=await Yo.compare(p,M):N=p===M,N){if(O.requirePasswordChange||!O.password||O.password==="1234"){me(!0),U(""),X("");return}o("editor",O.name,O.id),e()}else U(h.invalidPass)}},R=async A=>{if(A.preventDefault(),!E){U(h.selectUser);return}const O=s.find(nt=>nt.id===+E);if(!O)return;const M=O.password||"1234",V=M.startsWith("$2");let N=!1;if(V?N=await Yo.compare(p,M):N=p===M,!N){U(h.invalidPass);return}if(Ne!==Fe){U(h.passMismatch);return}if(Ne.length<3){U("Password too short");return}const Be=await Yo.hash(Ne,10);c(nt=>nt.map(Y=>Y.id===+E?{...Y,password:Be,requirePasswordChange:!1}:Y)),X(h.passChanged),setTimeout(()=>{o("editor",O.name,O.id),e()},800)};return m.jsx("div",{className:"fixed inset-0 bg-black/60 z-[60] flex items-center justify-center p-4 animate-in fade-in duration-200 backdrop-blur-sm",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden flex flex-col transform transition-all",children:[m.jsxs("div",{className:"bg-indigo-600 p-6 text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4 text-white",children:i==="manager"?m.jsx(o1,{size:32}):m.jsx(mT,{size:32})}),m.jsx("h3",{className:"text-xl font-bold text-white",children:oe?h.changePass:h.loginRequired}),m.jsx("p",{className:"text-indigo-200 text-sm mt-1",children:i==="manager"?h.managerLoginDesc:h.userLoginDesc})]}),m.jsxs("div",{className:"p-8",children:[y&&m.jsxs("div",{className:"bg-orange-50 text-orange-700 p-3 rounded-lg text-sm flex items-center gap-2 border border-orange-200 mb-4",children:[m.jsx(Jl,{size:16})," ",y]}),C&&m.jsxs("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm flex items-center gap-2 border border-red-100 animate-shake mb-4",children:[m.jsx(Jl,{size:16})," ",C]}),W&&m.jsxs("div",{className:"bg-green-50 text-green-600 p-3 rounded-lg text-sm flex items-center gap-2 border border-green-100 mb-4",children:[m.jsx(Xr,{size:16})," ",W]}),!oe&&m.jsxs("form",{onSubmit:D,className:"space-y-6",children:[i==="editor"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:h.selectUser}),m.jsxs("select",{value:E,onChange:A=>w(A.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition",required:!0,children:[m.jsx("option",{value:"",children:h.selectUser}),Ue.map(({role:A,members:O})=>m.jsx("optgroup",{label:A,children:O.map(M=>m.jsx("option",{value:M.id,children:M.name},M.id))},A))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:h.password}),m.jsx("input",{type:"password",value:p,onChange:A=>x(A.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition",placeholder:"",required:!0})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 text-sm font-semibold text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:h.cancel}),m.jsxs("button",{type:"submit",className:"flex-1 py-3 text-sm font-semibold text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition flex items-center justify-center gap-2",children:[m.jsx(o1,{size:16}),h.login]})]}),i==="editor"&&m.jsx("button",{type:"button",onClick:()=>{if(!E){U(h.selectUser);return}me(!0),U(""),X("")},className:`w-full text-sm font-medium rounded-lg px-3 py-2 border transition ${E?"text-indigo-600 bg-indigo-50 border-indigo-100 hover:text-indigo-700 hover:bg-indigo-100 hover:border-indigo-300 active:translate-y-[1px]":"text-gray-400 cursor-not-allowed bg-gray-50 border-gray-200"}`,disabled:!E,children:h.changePass})]}),oe&&m.jsxs("form",{onSubmit:R,className:"space-y-6",children:[m.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 text-amber-800 text-sm rounded mb-4 flex items-start gap-2",children:[m.jsx(Jl,{size:18,className:"flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("div",{className:"font-semibold mb-1",children:"Password Change Required"}),m.jsxs("div",{className:"text-xs",children:["You must change your password before continuing. Updating password for:"," ",m.jsx("strong",{children:s.find(A=>A.id===+E)?.name})]})]})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:[h.password," (Current)"]}),m.jsx("input",{type:"password",value:p,onChange:A=>x(A.target.value),className:"w-full p-2 border rounded"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:h.newPass}),m.jsx("input",{type:"password",value:Ne,onChange:A=>xe(A.target.value),className:"w-full p-2 border rounded"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:h.confirmPass}),m.jsx("input",{type:"password",value:Fe,onChange:A=>Ae(A.target.value),className:"w-full p-2 border rounded"})]}),m.jsxs("div",{className:"flex gap-3 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>me(!1),className:"flex-1 py-2 text-sm text-gray-600 bg-gray-100 rounded",children:h.backToLogin}),m.jsx("button",{type:"submit",className:"flex-1 py-2 text-sm font-bold text-white bg-green-600 rounded",children:h.changePass})]})]})]})]})})},O3=({show:r,team:e,setTeam:i})=>{const[s,o]=ne.useState(null),[c,h]=ne.useState(""),[y,p]=ne.useState("");if(!r)return null;const x=async(C,U)=>{if(!window.confirm(`Reset password for this user to: ${U}?`))return;const W=await Yo.hash(U,10);i(X=>X.map(oe=>oe.id===C?{...oe,password:W,requirePasswordChange:!0}:oe)),p(`Password reset for ${e.find(X=>X.id===C)?.name}`),setTimeout(()=>p(""),3e3),o(null)},E=async C=>{if(!c){p("Please enter a password");return}const U=await Yo.hash(c,10);i(W=>W.map(X=>X.id===C?{...X,password:U,requirePasswordChange:!0}:X)),p(`Password set for ${e.find(W=>W.id===C)?.name}`),setTimeout(()=>p(""),3e3),h(""),o(null)},w=async()=>{const C=e.filter(W=>W.password&&!W.password.startsWith("$2")).length;if(C===0){p("All passwords are already encrypted!"),setTimeout(()=>p(""),3e3);return}if(!window.confirm(`This will encrypt ${C} plain-text password(s). All users will need to change their password on next login. Continue?`))return;p("Encrypting passwords...");const U=await Promise.all(e.map(async W=>{if(!W.password||W.password.startsWith("$2"))return W;const X=await Yo.hash(W.password,10);return{...W,password:X,requirePasswordChange:!0}}));i(U),p(`Successfully encrypted ${C} password(s)!`),setTimeout(()=>p(""),5e3)};return m.jsxs("div",{className:"w-80 bg-white border-l shadow-lg overflow-y-auto flex flex-col h-full",children:[m.jsx("div",{className:"sticky top-0 bg-gradient-to-r from-red-600 to-red-700 text-white p-4 flex items-center justify-between border-b shadow-md",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Pa,{size:20}),m.jsx("h2",{className:"font-bold text-lg",children:"Admin Panel"})]})}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[y&&m.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 p-3 rounded text-sm",children:y}),m.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[m.jsxs("h3",{className:"font-bold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(Pa,{size:16,className:"text-yellow-600"}),"Security Actions"]}),m.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Encrypt all plain-text passwords in the database. This is a one-time operation."}),m.jsx("button",{onClick:w,className:"w-full px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition font-medium text-sm shadow-sm",children:" Encrypt All Passwords"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:"User Management"}),m.jsx("div",{className:"space-y-2",children:e.map(C=>m.jsxs("div",{className:"bg-gray-50 border rounded p-3 cursor-pointer hover:bg-gray-100",onClick:()=>o(s===C.id?null:C.id),children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold text-gray-800",children:C.name}),m.jsx("p",{className:"text-xs text-gray-500",children:C.role})]}),s===C.id&&m.jsx(af,{size:16,className:"text-gray-400"})]}),s===C.id&&m.jsxs("div",{className:"mt-3 pt-3 border-t space-y-2",children:[m.jsx("button",{onClick:U=>{U.stopPropagation(),x(C.id,"1234")},className:"w-full px-3 py-2 bg-orange-100 text-orange-700 rounded hover:bg-orange-200 transition text-sm font-medium",children:"Reset to Default (1234)"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"password",placeholder:"New password",value:c,onChange:U=>h(U.target.value),onClick:U=>U.stopPropagation(),className:"flex-1 px-2 py-1 border rounded text-xs"}),m.jsx("button",{onClick:U=>{U.stopPropagation(),E(C.id)},className:"px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition text-xs font-medium",children:"Set"})]}),m.jsx("div",{className:"text-[11px] text-gray-500 bg-gray-100 p-2 rounded",children:m.jsxs("p",{children:[m.jsx("strong",{children:"Requires Password Change:"})," ",C.requirePasswordChange?"Yes":"No"]})})]})]},C.id))})]})]})]})},k3=({isOpen:r,onClose:e,requests:i,onApprove:s,onReject:o,t:c})=>{if(!r)return null;const h=i.filter(y=>y.status==="PENDING").sort((y,p)=>p.timestamp-y.timestamp);return m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg flex flex-col max-h-[80vh]",children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50 rounded-t-lg",children:[m.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[m.jsx(Yx,{size:20,className:"text-indigo-600"})," ",c.pendingRequests]}),m.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-200 rounded",children:m.jsx(aa,{size:20})})]}),m.jsx("div",{className:"overflow-y-auto p-4 flex-1",children:h.length===0?m.jsxs("div",{className:"text-center text-gray-500 py-8 flex flex-col items-center gap-2",children:[m.jsx(Xr,{size:48,className:"text-gray-200"}),c.noRequests]}):m.jsx("div",{className:"space-y-3",children:h.map(y=>m.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm flex items-start gap-3",children:[m.jsx("div",{className:"bg-yellow-100 text-yellow-700 p-2 rounded-full",children:m.jsx(Gx,{size:20})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("span",{className:"font-bold text-gray-800",children:y.empName}),m.jsx("span",{className:"text-xs text-gray-400",children:new Date(y.timestamp).toLocaleTimeString()})]}),m.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[c.reqDesc," ",m.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:y.date})," ",c.to," ",m.jsx("strong",{children:y.newShift||"Auto"})]})]}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx("button",{onClick:()=>s(y),className:"p-1.5 bg-green-100 text-green-700 rounded hover:bg-green-200",title:c.approve,children:m.jsx(TE,{size:18})}),m.jsx("button",{onClick:()=>o(y),className:"p-1.5 bg-red-100 text-red-700 rounded hover:bg-red-200",title:c.reject,children:m.jsx(aa,{size:18})})]})]},y.id))})})]})})},j3=({isOpen:r,onClose:e,data:i,t:s,hoursConfig:o})=>r?m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[m.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[m.jsx(Fx,{size:20})," ",s.statsTitle]}),m.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-200 rounded",children:m.jsx(aa,{size:20})})]}),m.jsx("div",{className:"overflow-auto flex-1 p-4",children:m.jsxs("table",{className:"w-full text-sm border-collapse",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-100 text-left",children:[m.jsx("th",{className:"p-2 border",children:s.statName}),m.jsx("th",{className:"p-2 border text-center bg-green-50",children:s.statM}),m.jsx("th",{className:"p-2 border text-center bg-orange-50",children:s.statT}),m.jsx("th",{className:"p-2 border text-center bg-blue-50",children:s.statN}),m.jsx("th",{className:"p-2 border text-center bg-purple-50",children:s.statWE}),m.jsx("th",{className:"p-2 border text-center bg-pink-50",children:s.statV}),m.jsx("th",{className:"p-2 border text-center font-bold",children:s.statTotal}),m.jsx("th",{className:"p-2 border text-center bg-yellow-50 font-bold",children:s.statHours}),m.jsx("th",{className:"p-2 border text-center bg-gray-200 font-bold",children:s.statBalance})]})}),m.jsx("tbody",{children:i.map(c=>{const h=c.Hours-o.target;return m.jsxs("tr",{className:"hover:bg-gray-50 border-b",children:[m.jsx("td",{className:"p-2 border font-medium",children:c.name}),m.jsx("td",{className:"p-2 border text-center",children:c.M}),m.jsx("td",{className:"p-2 border text-center",children:c.T}),m.jsx("td",{className:"p-2 border text-center",children:c.N}),m.jsx("td",{className:"p-2 border text-center font-bold text-purple-700",children:c.WE}),m.jsx("td",{className:"p-2 border text-center text-pink-600",children:c.V}),m.jsx("td",{className:"p-2 border text-center font-bold",children:c.Total}),m.jsxs("td",{className:"p-2 border text-center bg-yellow-50 font-mono",children:[c.Hours,"h"]}),m.jsxs("td",{className:`p-2 border text-center font-bold font-mono ${h>=0?"text-green-600":"text-red-600"}`,children:[h>0?"+":"",h,"h"]})]},c.name)})})]})}),m.jsxs("div",{className:"p-3 border-t bg-gray-50 flex justify-between items-center text-xs text-gray-500",children:[m.jsxs("span",{children:["Target: ",o.target,"h/month | Values: M=",o.M,"h, T=",o.T,"h, N=",o.N,"h"]}),m.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-800 text-white rounded hover:bg-gray-700",children:s.close})]})]})}):null,Fl={apiKey:"AIzaSyCtPbNvCgzbNy7jOZl-up0PUEhzaT8lUbg",authDomain:"gcc-scheduler-3ef7f.firebaseapp.com",projectId:"gcc-scheduler-3ef7f",storageBucket:"gcc-scheduler-3ef7f.firebasestorage.app",messagingSenderId:"712007349828",appId:"1:712007349828:web:a8c931a6784a68b0beae11"},Yu="gcc-scheduler",In={VIEWER:{id:"viewer",label:"Reader",role:"viewer",permissions:["read"],description:"Ready-only access to view the schedule."},EDITOR:{id:"editor",label:"Escalador",role:"editor",permissions:["read","write","self_only"],description:"Can edit own schedule only."},MANAGER:{id:"manager",label:"Manager",role:"manager",permissions:["read","write","admin","approve"],description:"Full access to manage team schedules and approve requests."},ADMIN:{id:"admin",label:"Admin",role:"admin",permissions:["read","write","admin","approve","system"],description:"Administrative access to manage users and system settings."}},rf=["EN","DE","IT","FR","PT","TR","ES"],V3=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],L3=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],qx=["2025-12-25","2026-01-01","2026-03-29","2026-04-25","2026-05-01","2026-06-10","2026-06-11","2026-08-15","2026-10-05","2026-11-01","2026-12-01","2026-12-08","2026-12-25"],U3=[{id:4,name:"Huyesin Gozcu",role:"GCC",languages:["EN","TR","PT"],offset:0,password:"1234"},{id:6,name:"Lourdes Gutierrez",role:"GCC",languages:["EN","ES","PT"],offset:2,password:"1234"},{id:11,name:"Sergio Ribeiro",role:"TL",languages:["EN","FR","PT"],offset:4,password:"1234"},{id:2,name:"Filipe Cardoso",role:"TL",languages:["EN","FR","PT"],offset:6,password:"1234"},{id:8,name:"Joao Monteiro",role:"GCC",languages:["EN","PT"],offset:8,password:"1234"},{id:14,name:"Juliana Andrade",role:"GCC",languages:["EN","PT"],offset:10,password:"1234"},{id:10,name:"Rita Quaresma",role:"GCC",languages:["EN","PT","ES"],offset:12,password:"1234"},{id:5,name:"Hugo Rodrigues",role:"GCC",languages:["EN","PT"],offset:14,password:"1234"},{id:9,name:"Miguel Geada",role:"GCC",languages:["EN","PT"],offset:16,password:"1234"},{id:7,name:"Lucas Alves",role:"GCC",languages:["EN","PT"],offset:18,password:"1234"}],v_={en:{title:"Shift Scheduler - GCC Team",start:"Start",pattern:"Pattern",colaborador:"Employee",cargo:"Role",linguas:"Languages",analise:"Coverage Analysis",analiseDesc:"Missing languages or low staff",faltas:"Issues",manha:"Morning",tarde:"Afternoon",noite:"Night",folga:"Off",ferias:"Vacation",baixa:"Sick",exportCsv:"Excel",print:"Print",stats:"Stats",annual:"Annual View",config:"Settings",adjustOffsets:"Adjust Offsets",configPanelTitle:"Schedule Settings",generalParams:"General Parameters",startDate:"Rotation Start Date",rotationPattern:"Rotation Pattern",daysM:"Days Morning",offsM:"Offs (Auto)",daysT:"Days Afternoon",offsT:"Offs (Auto)",daysN:"Days Night",offsN:"Offs (Manual)",teamOffsets:"Team & Offsets",langsLabel:"Languages (comma separated)",name:"Name",offset:"Offset",printTitle:"Monthly Schedule",generatedOn:"Generated on",legend:"Legend",legendDesc:"Shift Codes",legM:"Morning",legT:"Afternoon",legN:"Night",legF:"Day Off",legV:"Vacation",legS:"Sick Leave",altActive:"* Alternating 2/3 days active",fixed2:"* Fixed 2 days",autoCalcInfo:"Auto M/T Offs: < 5 days = 1 Off;  5 days = 2 Offs.",sortTeam:"Sort by Shift",holidaysSection:"Holidays Management",addHoliday:"Add Date",minStaffSection:"Minimum Staff Level",minStaffWarn:"Alert if count below:",langsSection:"Mandatory Languages",legendsSection:"Shift Legends & Hours",colorsSection:"Shift Colors",weekendSection:"Weekend Definition",lowStaff:"Low Staff",missing:"Missing",restWarn:"Short Rest (<11h)",statsTitle:"Team Statistics & Hour Bank",statName:"Name",statM:"M",statT:"T",statN:"N",statWE:"W.End",statV:"Vac",statTotal:"Shifts",statHours:"Hours",statBalance:"Balance",hoursTarget:"Target Hours/Month",hoursPerShift:"Hours per Shift",annualTitle:"Annual Planner",selectEmp:"Select Employee:",rotationMode:"Rotation Mode",modeStandard:"Standard Rotation",modeFixedM:"Fixed Morning",modeFixedT:"Fixed Afternoon",modeFixedN:"Fixed Night",saveFile:"Save File",loadFile:"Load File",resetData:"Reset Data",filters:"Filters",roleFilter:"Role",langFilter:"Language",shiftFilter:"Shift",sort:"Sort",sortDefault:"Default",sortAZ:"Name (A-Z)",sortZA:"Name (Z-A)",sortLang:"Languages",sortRole:"Role",all:"All",bulkActions:"Actions",planVacation:"Plan Vacation",startDateVac:"Start Date",endDateVac:"End Date",apply:"Apply",days:"days",close:"Close",readOnly:"Read Only Mode",permissionDenied:"You do not have permission to edit.",loginRequired:"Authentication Required",selectUser:"Select Your Name",password:"Password",enterPass:"Enter Password",login:"Login",cancel:"Cancel",accessGranted:"Access Granted",invalidPass:"Invalid Password",userLoginDesc:"Please identify yourself to access Editor mode.",managerLoginDesc:"Please enter the administrative password.",loggedInAs:"Logged in as",changePass:"Change Password",newPass:"New Password",confirmPass:"Confirm Password",passChanged:"Password changed successfully!",defaultPassInfo:"Default password: '1234'",backToLogin:"Back to Login",passMismatch:"Passwords do not match",requests:"Requests",pendingRequests:"Pending Requests",noRequests:"No pending requests.",reqDesc:"wants to change",to:"to",approve:"Approve",reject:"Reject",requestSent:"Request sent for approval!",cantEditOthers:"You can only edit your own schedule!",pending:"Pending Approval",bulkTitle:"Bulk Actions",bulkDesc:"Apply changes to date ranges",target:"Target",targetAll:"All Employees (Manager Only)",shiftType:"Shift Type",clearShifts:"Reset (Auto)",applyToAll:"Apply to Entire Team",warningBulk:"This will overwrite existing overrides!",bulkSuccess:"Bulk action applied successfully!",saving:"Saving...",saved:"Saved to Cloud",offline:"Offline",loading:"Loading Data...",undo:"Undo",redo:"Redo",selectMultiple:"Hold Ctrl or Shift to select multiple dates",clearSelection:"Clear Selection",selectedDays:"Selected Days",applyToSelection:"Apply to Selection"}},Xl=r=>{const e=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0");return`${e}-${i}-${s}`},am=(r,e)=>new Date(r,e+1,0).getDate(),P3=(r,e)=>r==="T"&&e==="M"||r==="N"&&e==="M"||r==="N"&&e==="T",z3=(r,e)=>{let i=e;for(;i>0;){const c=r[i-1];if(c==="F"||c==="V"||c==="S")break;i--}let s=0;for(let c=i;c<r.length;c++){const h=r[c];if(h==="F"||h==="V"||h==="S")break;s++}return{hasShiftOverflow:s>=6&&e>=i&&e<i+s,startIdx:i}},B3=({isOpen:r,onClose:e,t:i,onApply:s,team:o,currentUser:c,preSelectedId:h})=>{const[y,p]=ne.useState(""),[x,E]=ne.useState(""),[w,C]=ne.useState("V"),[U,W]=ne.useState("");if(ne.useEffect(()=>{r&&(h?W(h):c.role==="editor"?W(String(c.id)):W(""),p(""),E(""),C("V"))},[r,c,h]),!r)return null;const X=()=>{y&&x&&U&&(s(U,y,x,w==="CLEAR"?void 0:w),e())},oe=c.role==="manager";return m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[m.jsxs("h3",{className:"font-bold text-xl mb-2 flex items-center gap-2 text-indigo-900",children:[m.jsx(Qx,{size:24,className:"text-indigo-600"})," ",i.bulkTitle]}),m.jsx("p",{className:"text-sm text-gray-500 mb-6",children:i.bulkDesc}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:i.target}),m.jsxs("select",{value:U,onChange:me=>W(me.target.value),disabled:!oe,className:"w-full p-2 border rounded text-sm bg-white",children:[m.jsx("option",{value:"",disabled:!0,children:"-- Select Target --"}),oe&&m.jsx("option",{value:"ALL",className:"font-bold text-indigo-700",children:i.targetAll}),o.map(me=>m.jsx("option",{value:me.id,children:me.name},me.id))]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:i.startDateVac}),m.jsx("input",{type:"date",value:y,onChange:me=>p(me.target.value),className:"w-full p-2 border rounded text-sm"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:i.endDateVac}),m.jsx("input",{type:"date",value:x,onChange:me=>E(me.target.value),className:"w-full p-2 border rounded text-sm"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:i.shiftType}),m.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[["M","T","N","F"].map(me=>m.jsx("button",{onClick:()=>C(me),className:`p-2 rounded border text-sm font-bold ${w===me?"bg-indigo-100 border-indigo-500 text-indigo-800":"bg-white text-gray-600 hover:bg-gray-50"}`,children:me},me)),m.jsx("button",{onClick:()=>C("V"),className:`p-2 rounded border text-sm font-bold ${w==="V"?"bg-pink-100 border-pink-500 text-pink-800":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Vac"}),m.jsx("button",{onClick:()=>C("S"),className:`p-2 rounded border text-sm font-bold ${w==="S"?"bg-gray-200 border-gray-500 text-gray-800":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Sick"}),m.jsxs("button",{onClick:()=>C("CLEAR"),className:`col-span-2 p-2 rounded border text-sm font-bold flex items-center justify-center gap-1 ${w==="CLEAR"?"bg-red-100 border-red-500 text-red-800":"bg-white text-red-500 hover:bg-red-50"}`,children:[m.jsx(jE,{size:14})," ",i.clearShifts]})]})]}),U==="ALL"&&m.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800 flex items-center gap-2",children:[m.jsx($x,{size:16})," ",i.warningBulk]})]}),m.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[m.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded hover:bg-gray-200",children:i.close}),m.jsx("button",{onClick:X,disabled:!y||!x||!U,className:"px-4 py-2 text-sm font-bold text-white bg-indigo-600 rounded hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:i.apply})]})]})})},q3=({isOpen:r,onClose:e,team:i,overrides:s,colors:o,t:c})=>{const[h,y]=ne.useState(i[0]?.id||0),[p,x]=ne.useState(2026);if(!r)return null;const E=i.find(C=>C.id===+h),w=C=>{const U=new Date(p,C+1,0).getDate(),W=[];for(let X=1;X<=U;X++){const oe=new Date(p,C,X),me=Xl(oe);let xe=s[`${E.id}_${me}`]||"F";W.push(m.jsx("div",{className:"w-6 h-6 flex items-center justify-center text-[9px] border rounded-sm",style:{backgroundColor:o[xe]||"#fff"},title:`${me}: ${xe}`,children:xe!=="F"?xe:""},X))}return W};return m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[m.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[m.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[m.jsx(Zl,{size:20})," ",c.annualTitle]}),m.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-200 rounded",children:m.jsx(aa,{size:20})})]}),m.jsxs("div",{className:"p-4 border-b flex gap-4 items-center bg-white",children:[m.jsx("label",{className:"text-sm font-bold",children:c.selectEmp}),m.jsx("select",{value:h,onChange:C=>y(+C.target.value),className:"border p-2 rounded text-sm w-64",children:i.map(C=>m.jsx("option",{value:C.id,children:C.name},C.id))}),m.jsxs("div",{className:"flex gap-2 items-center ml-4",children:[m.jsx("button",{onClick:()=>x(p-1),className:"p-1 border rounded hover:bg-gray-50",children:m.jsx(af,{size:16})}),m.jsx("span",{className:"font-bold",children:p}),m.jsx("button",{onClick:()=>x(p+1),className:"p-1 border rounded hover:bg-gray-50",children:m.jsx($r,{size:16})})]})]}),m.jsx("div",{className:"overflow-auto flex-1 p-6",children:m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L3.map((C,U)=>m.jsxs("div",{className:"border rounded p-2",children:[m.jsx("h4",{className:"font-bold text-sm mb-2 text-center bg-gray-50 rounded py-1",children:C}),m.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:w(U)})]},C))})})]})})},H3=({cell:r,onClose:e,onUpdate:i,legends:s,customColors:o})=>{const c=[{id:"M",label:`Morning (${s.M})`,color:o.M},{id:"T",label:`Afternoon (${s.T})`,color:o.T},{id:"N",label:`Night (${s.N})`,color:o.N},{id:"F",label:"Day Off",color:o.F},{id:"V",label:"Vacation",icon:m.jsx(ZE,{size:14}),color:o.V},{id:"S",label:"Sick Leave",icon:m.jsx(lT,{size:14}),color:o.S}],h=r.y>window.innerHeight-350,y=window.innerHeight-r.y+40;return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:e}),m.jsxs("div",{className:"absolute z-50 bg-white rounded-lg shadow-xl border p-2 w-48 flex flex-col gap-1 animate-in fade-in zoom-in duration-200",style:{top:h?void 0:r.y+10,bottom:h?y:void 0,left:Math.min(r.x,window.innerWidth-200)},children:[m.jsxs("div",{className:"text-xs font-bold text-gray-500 mb-1 px-1 border-b pb-1",children:["Edit: ",r.empName," ",m.jsx("br",{})," ",r.date]}),c.map(p=>m.jsxs("button",{onClick:()=>{i(r.key,p.id),e()},className:"flex items-center gap-2 p-2 text-xs rounded hover:bg-gray-100 text-left border transition-colors",style:{borderLeftColor:p.color,borderLeftWidth:4},children:[p.icon||m.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p.color}})," ",p.label]},p.id))]})]})},F3=({show:r,config:e,setConfig:i,team:s,setTeam:o,holidays:c,setHolidays:h,minStaff:y,setMinStaff:p,requiredLangs:x,setRequiredLangs:E,legends:w,setLegends:C,colors:U,setColors:W,weekendDays:X,setWeekendDays:oe,lang:me,onReset:Ne,hoursConfig:xe,setHoursConfig:Fe})=>{if(!r)return null;const Ae=v_[me],[Ue,D]=ne.useState(""),R=()=>{Ue&&!c.includes(Ue)&&(h([...c,Ue].sort()),D(""))},A=B=>{h(c.filter(ce=>ce!==B))},O=B=>{x.includes(B)?E(x.filter(ce=>ce!==B)):E([...x,B])},M=B=>{X.includes(B)?oe(X.filter(ce=>ce!==B)):oe([...X,B])},V=(B,ce,qe)=>{o(s.map(je=>je.id===B?{...je,[ce]:qe}:je))},N=(B,ce)=>{const qe=ce.toUpperCase().split(",").map(je=>je.trim()).filter(je=>je);o(s.map(je=>je.id===B?{...je,languages:qe}:je))},Be=()=>{const ce={id:s.length>0?Math.max(...s.map(qe=>qe.id))+1:1,name:"Novo Colaborador",role:"GCC",languages:["EN"],offset:0,password:"1234",rotationMode:"STANDARD"};o([...s,ce])},nt=B=>{window.confirm("Tem a certeza que quer remover este colaborador?")&&o(s.filter(ce=>ce.id!==B))},Y=B=>B<5?1:2;return m.jsxs("div",{className:"w-96 bg-white border-r overflow-y-auto p-4 shadow-inner z-10 animate-slide-in flex flex-col h-full print:hidden",children:[m.jsxs("h3",{className:"font-bold mb-4 text-indigo-900 flex items-center gap-2",children:[m.jsx(Kx,{size:18})," ",Ae.configPanelTitle]}),m.jsx("div",{className:"bg-gray-50 p-3 rounded mb-4 border space-y-3",children:m.jsxs("div",{className:"border-t pt-1.5 mt-0",children:[m.jsxs("label",{className:"block text-xs font-bold text-gray-600 mb-1 flex items-center gap-1",children:[m.jsx(Zl,{size:12})," ",Ae.holidaysSection]}),m.jsxs("div",{className:"flex gap-1.5 mb-1.5",children:[m.jsx("input",{type:"date",value:Ue,onChange:B=>D(B.target.value),className:"flex-1 p-0.5 border rounded text-[10px]"}),m.jsx("button",{onClick:R,className:"bg-indigo-100 text-indigo-700 px-2 py-1 rounded hover:bg-indigo-200",children:m.jsx(c1,{size:14})})]}),m.jsx("div",{className:"max-h-20 overflow-y-auto space-y-0.5",children:c.map(B=>m.jsxs("div",{className:"flex justify-between items-center bg-white border px-2 py-1 rounded text-xs",children:[m.jsx("span",{children:B}),m.jsx("button",{onClick:()=>A(B),className:"text-red-400 hover:text-red-600",children:m.jsx(aa,{size:12})})]},B))})]})}),m.jsxs("div",{className:"bg-gray-50 p-3 rounded mb-4 border space-y-3",children:[m.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase",children:Ae.rotationPattern}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] text-gray-600",children:Ae.daysM}),m.jsx("input",{type:"number",value:e.morningDays,onChange:B=>i({...e,morningDays:+B.target.value}),className:"w-full p-1 border rounded"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] text-gray-600",children:Ae.offsM}),m.jsx("input",{type:"text",value:Y(e.morningDays),disabled:!0,className:"w-full p-1 border rounded bg-gray-100 text-gray-500 text-center font-bold"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] text-gray-600",children:Ae.daysT}),m.jsx("input",{type:"number",value:e.afternoonDays,onChange:B=>i({...e,afternoonDays:+B.target.value}),className:"w-full p-1 border rounded"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] text-gray-600",children:Ae.offsT}),m.jsx("input",{type:"text",value:Y(e.afternoonDays),disabled:!0,className:"w-full p-1 border rounded bg-gray-100 text-gray-500 text-center font-bold"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] text-gray-600",children:Ae.daysN}),m.jsx("input",{type:"number",value:e.nightDays,onChange:B=>i({...e,nightDays:+B.target.value}),className:"w-full p-1 border rounded"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-[10px] text-gray-600 font-bold text-indigo-700",children:Ae.offsN}),m.jsx("input",{type:"number",value:e.nightOffs,onChange:B=>i({...e,nightOffs:+B.target.value}),className:"w-full p-1 border rounded bg-white"})]})]})]}),m.jsxs("div",{className:"bg-gray-50 p-3 rounded mb-4 border space-y-3",children:[m.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase flex items-center gap-1",children:[m.jsx(om,{size:12})," Coverage, Weekend & Hours"]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:Ae.minStaffWarn}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("div",{className:"grid grid-cols-3 gap-2 min-w-[300px]",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-[9px] block text-center",children:"M"}),m.jsx("input",{type:"number",value:y.M,onChange:B=>p({...y,M:+B.target.value}),className:"w-full p-1 border rounded text-center"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[9px] block text-center",children:"T"}),m.jsx("input",{type:"number",value:y.T,onChange:B=>p({...y,T:+B.target.value}),className:"w-full p-1 border rounded text-center"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[9px] block text-center",children:"N"}),m.jsx("input",{type:"number",value:y.N,onChange:B=>p({...y,N:+B.target.value}),className:"w-full p-1 border rounded text-center"})]})]})})]}),m.jsxs("div",{className:"border-t pt-2",children:[m.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:Ae.weekendSection}),m.jsx("div",{className:"flex gap-1",children:V3.map((B,ce)=>m.jsx("button",{onClick:()=>M(ce),className:`text-xs px-2 py-1 rounded border ${X.includes(ce)?"bg-indigo-600 text-white":"bg-white text-gray-500"}`,children:B.charAt(0)},B))})]}),m.jsxs("div",{className:"border-t pt-2",children:[m.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:Ae.hoursPerShift}),m.jsx("div",{className:"overflow-x-auto mb-2",children:m.jsxs("div",{className:"grid grid-cols-3 gap-2 min-w-[300px]",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-[9px] block text-center",children:"M"}),m.jsx("input",{type:"number",value:xe.M,onChange:B=>Fe({...xe,M:+B.target.value}),className:"w-full p-1 border rounded text-center"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[9px] block text-center",children:"T"}),m.jsx("input",{type:"number",value:xe.T,onChange:B=>Fe({...xe,T:+B.target.value}),className:"w-full p-1 border rounded text-center"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[9px] block text-center",children:"N"}),m.jsx("input",{type:"number",value:xe.N,onChange:B=>Fe({...xe,N:+B.target.value}),className:"w-full p-1 border rounded text-center"})]})]})}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-xs font-bold text-gray-600",children:Ae.hoursTarget}),m.jsx("input",{type:"number",value:xe.target,onChange:B=>Fe({...xe,target:+B.target.value}),className:"w-16 p-1 border rounded text-center"})]})]}),m.jsxs("div",{className:"border-t pt-2",children:[m.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-1",children:Ae.langsSection}),m.jsx("div",{className:"flex flex-wrap gap-1",children:rf.map(B=>m.jsxs("label",{className:`flex items-center gap-1 text-xs px-2 py-1 rounded cursor-pointer border ${x.includes(B)?"bg-indigo-100 border-indigo-300 text-indigo-800":"bg-white border-gray-200 text-gray-400"}`,children:[m.jsx("input",{type:"checkbox",checked:x.includes(B),onChange:()=>O(B),className:"hidden"}),B]},B))})]})]}),m.jsxs("div",{className:"bg-gray-50 p-3 rounded mb-4 border space-y-3",children:[m.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase flex items-center gap-1 mb-2",children:[m.jsx(KE,{size:12})," Shift Legends, Hours & Colors"]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsx("div",{className:"space-y-2",children:["M","T","N","F","V","S"].map(B=>m.jsxs("div",{className:"flex items-center gap-1 min-w-[400px]",children:[m.jsx("input",{type:"color",value:U[B],onChange:ce=>W({...U,[B]:ce.target.value}),className:"w-5 h-5 p-0 border-0 rounded cursor-pointer flex-shrink-0"}),m.jsx("span",{className:"text-[10px] font-bold w-4 flex-shrink-0",children:B}),m.jsx("input",{value:w[B]||"",onChange:ce=>C({...w,[B]:ce.target.value}),className:"flex-1 p-1 border rounded text-xs"}),["F","V","S"].includes(B)&&m.jsx("span",{className:"text-xs text-gray-500 flex-1",children:Ae[`leg${B}`]})]},B))})})]}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase",children:Ae.teamOffsets}),m.jsxs("button",{onClick:Be,className:"flex items-center gap-1 bg-green-50 text-green-700 px-2 py-1 rounded text-[10px] font-bold border border-green-200 hover:bg-green-100",children:[m.jsx(c1,{size:12})," Add"]})]}),m.jsxs("div",{className:"space-y-3 pb-10",children:[s.length===0&&m.jsx("div",{className:"text-center text-xs text-gray-400 py-8 italic",children:"No employees yet"}),s.map(B=>m.jsxs("div",{className:"p-3 border rounded bg-white shadow-sm text-xs relative group",children:[m.jsx("button",{onClick:()=>nt(B.id),className:"absolute top-2 right-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove",children:m.jsx(aa,{size:14})}),m.jsxs("div",{className:"flex gap-2 mb-2 pr-4",children:[m.jsx("input",{className:"font-bold flex-1 border-b focus:border-indigo-500 outline-none",value:B.name,onChange:ce=>V(B.id,"name",ce.target.value),placeholder:"Nome"}),m.jsx("input",{className:"w-10 text-center border rounded bg-gray-50",title:Ae.offset,type:"number",value:B.offset,onChange:ce=>V(B.id,"offset",+ce.target.value)})]}),m.jsxs("div",{className:"mb-2 space-y-2",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx("input",{className:"w-full border p-1 rounded",value:B.role,onChange:ce=>V(B.id,"role",ce.target.value),placeholder:"Cargo (ex: GCC)"}),m.jsx("input",{className:"w-full border p-1 rounded",value:B.languages.join(", "),onChange:ce=>N(B.id,ce.target.value),placeholder:"Lnguas (ex: EN, PT)"})]}),m.jsxs("select",{value:B.rotationMode||"STANDARD",onChange:ce=>V(B.id,"rotationMode",ce.target.value),className:"w-full border p-1 rounded bg-gray-50",children:[m.jsx("option",{value:"STANDARD",children:Ae.modeStandard}),m.jsx("option",{value:"FIXED_M",children:Ae.modeFixedM}),m.jsx("option",{value:"FIXED_T",children:Ae.modeFixedT}),m.jsx("option",{value:"FIXED_N",children:Ae.modeFixedN})]})]})]},B.id))]})]}),m.jsx("div",{className:"p-4 border-t sticky bottom-0 bg-white",children:m.jsxs("button",{onClick:Ne,className:"w-full py-2 bg-red-50 text-red-600 border border-red-200 rounded flex items-center justify-center gap-2 hover:bg-red-100",children:[m.jsx(Qu,{size:14})," ",Ae.resetData]})})]})},G3=()=>{const[r,e]=ne.useState(!0),[i,s]=ne.useState(!1),[o,c]=ne.useState("offline"),[h,y]=ne.useState(()=>{const S=new Date;return new Date(S.getFullYear(),S.getMonth(),1)}),[p,x]=ne.useState(()=>{const S=new Date;return new Date(S.getFullYear(),S.getMonth(),1)}),[E,w]=ne.useState(!1),[C,U]=ne.useState(!1),[W,X]=ne.useState(!1),[oe,me]=ne.useState(!1),[Ne,xe]=ne.useState(!1),[Fe,Ae]=ne.useState(!1),[Ue]=ne.useState("en"),[D,R]=ne.useState(null),[A,O]=ne.useState(In.VIEWER),[M,V]=ne.useState(!1),[N,Be]=ne.useState(null),[nt,Y]=ne.useState(""),[B,ce]=ne.useState(0),[qe,je]=ne.useState(""),[j,Z]=ne.useState(""),de=ne.useRef(!1),pe=ne.useRef(!1),Ie=ne.useRef(!0),Oe=ne.useRef(null),Ge=ne.useRef("viewer"),Tt=ne.useRef(Date.now()),ft=ne.useRef(Date.now()),Fi=ne.useRef(!1),Gi=ne.useRef(null),Qn=ne.useRef(null),[Tn,kn]=ne.useState(0),cs=ne.useRef(0),yi=ne.useRef(!1),js=ne.useRef(0),xi=A.permissions.includes("write"),Vt=A.role==="manager",it=A.role==="manager";pe.current=xi,Ie.current=r;const[Xt,ma]=ne.useState("All"),[wn,fn]=ne.useState("All"),[Dt,Yi]=ne.useState("All"),[Lt,Qi]=ne.useState("AZ"),[ii,yr]=ne.useState(null),[xr,br]=ne.useState(!1),[Kn,Zt]=ne.useState(!1),[jn,wt]=ne.useState(!1),[vr,us]=ne.useState(!1),[_r,si]=ne.useState(!1),[Vs,ht]=ne.useState(null),[Vn,Ln]=ne.useState({}),[$n,Ja]=ne.useState(null),[Ls,bi]=ne.useState(!1),[vi,ga]=ne.useState("2025-12-15"),[Un,fs]=ne.useState(qx),[xn,Ki]=ne.useState({M:4,T:4,N:3}),[qt,Er]=ne.useState(["EN","TR","ES","FR","IT","PT","DE"]),[nn,Xn]=ne.useState([0,6]),[st,Ht]=ne.useState({M:"07:00 - 16:00",T:"15:00 - 00:00",N:"23:00 - 08:00"}),[hn,hs]=ne.useState({M:"#d1fae5",T:"#ffedd5",N:"#1e3a8a",F:"#f3f4f6",V:"#fbcfe8",S:"#e5e7eb"}),[dn,ri]=ne.useState({}),[Us,Zn]=ne.useState([]),[$i,ai]=ne.useState([]),[Ft,Gt]=ne.useState([]),[_i,St]=ne.useState(null);ne.useEffect(()=>{if(!it)return;const S=JSON.stringify(dn)!==JSON.stringify(Vn);bi(S)},[dn,Vn,it]);const[Xi,Ps]=ne.useState({morningDays:5,afternoonDays:5,nightDays:4,nightOffs:2,autoAdjustOffs:!0}),[Mt,oi]=ne.useState({M:8,T:8,N:8,target:160}),[At,Zi]=ne.useState(U3),[Jn,Ji]=ne.useState([]),Ei=ne.useRef(0),Wn=5,Yt=1800*1e3,sn=2700*1e3,ds=60*1e3;ne.useEffect(()=>{let S=null,P=null,$=!0;const re=()=>{if(!Fl.apiKey){$&&(e(!1),c("offline"));return}try{const ae=dm(Fl),se=Gl(ae),ge=e3(ae,{experimentalForceLongPolling:!0});Oe.current=ge,(async()=>{try{if(se.currentUser)return;const ye=sessionStorage.getItem("firebaseToken");if(ye)try{await pm(se,ye);return}catch{sessionStorage.removeItem("firebaseToken"),sessionStorage.removeItem("firebaseTokenRole")}await VS(se),Ei.current=0}catch(ye){console.error("[Firebase] Auth Error - Please check console:",{code:ye?.code,message:ye?.message,fullError:ye}),["auth/operation-not-allowed","auth/invalid-api-key","auth/app-deleted","auth/invalid-user-token"].includes(ye?.code)?(e(!1),c("offline")):ue()}})();const we=rm(ge,"artifacts",Yu,"public","data","shift_scheduler","global_state");S=g3(we,ye=>{if($)if(ye.exists()){const he=ye.data();if(!Ie.current&&pe.current)return;de.current=!0,he.startDateStr&&ga(he.startDateStr),he.holidays&&fs(he.holidays),he.minStaff&&Ki(he.minStaff),he.requiredLangs&&Er(he.requiredLangs),he.weekendDays&&Xn(he.weekendDays),he.legends&&Ht(he.legends),he.colors&&hs(he.colors),he.config&&Ps(he.config),he.hoursConfig&&oi(he.hoursConfig),he.team&&Zi(he.team),he.requests&&Ji(he.requests),he.overrides&&ri(he.overrides),he.publishedOverrides?Ln(he.publishedOverrides):he.overrides&&Ln(he.overrides),he.lastPublished&&Ja(he.lastPublished),s(!1),e(!1),c("saved"),Ei.current=0}else s(!1),e(!1),c("saved"),Ei.current=0},ye=>{$&&(Ie.current&&(s(!1),e(!1),c("offline")),ue())})}catch{if(!$)return;s(!1),e(!1),c("offline"),ue()}},ue=()=>{if(Ei.current>=Wn)return;const ae=Math.min(1e3*Math.pow(2,Ei.current),3e4);Ei.current++,P=setTimeout(()=>{$&&(S&&S(),re())},ae)};return re(),()=>{$=!1,S&&S(),P&&clearTimeout(P)}},[]),ne.useEffect(()=>{const S=()=>{Tt.current=Date.now()};return Fi.current||(window.addEventListener("mousemove",S),window.addEventListener("keydown",S),window.addEventListener("click",S),window.addEventListener("touchstart",S),Fi.current=!0),()=>{window.removeEventListener("mousemove",S),window.removeEventListener("keydown",S),window.removeEventListener("click",S),window.removeEventListener("touchstart",S),Fi.current=!1}},[]),ne.useEffect(()=>{const S=Gl(),P=()=>{Gi.current&&(clearInterval(Gi.current),Gi.current=null)},$=async()=>{sessionStorage.removeItem("firebaseToken"),sessionStorage.removeItem("firebaseTokenRole");try{await HS(S)}catch{}Ge.current="viewer",O(In.VIEWER),Y(""),ce(0),Z("Session expired due to inactivity. Please log in again."),V(!0),P()};if(A.role==="viewer"||A.role==="editor"){P();return}return Tt.current=Date.now(),ft.current=Date.now(),P(),Gi.current=setInterval(async()=>{const re=Date.now();if(re-Tt.current>=Yt){await $();return}if(re-ft.current>=sn&&S.currentUser)try{await S.currentUser.getIdToken(!0),ft.current=re}catch{await $()}},ds),()=>{P()}},[A.role]),ne.useEffect(()=>{const S=Ge.current==="manager"||Ge.current==="admin",P=A.role==="viewer";S&&P&&nt&&(sessionStorage.removeItem("firebaseToken"),sessionStorage.removeItem("firebaseTokenRole"),Z("Your session expired. Please log in again to continue as manager/admin."),V(!0),Y(""),ce(0))},[A.role,nt]),ne.useEffect(()=>{if(r||i||!Fl.apiKey||!Yu)return;if(de.current){de.current=!1;return}if(!xi)return;c("saving");const P=setTimeout(async()=>{try{let $;try{$=cf()}catch{$=dm(Fl)}const re=Vx($),ue=rm(re,"artifacts",Yu,"public","data","shift_scheduler","global_state");await Lx(ue,{startDateStr:vi,holidays:Un,minStaff:xn,requiredLangs:qt,weekendDays:nn,legends:st,colors:hn,overrides:dn,publishedOverrides:Vn,lastPublished:$n||null,config:Xi,hoursConfig:Mt,team:At,requests:Jn,lastUpdated:Date.now()}),c("saved")}catch{c("error")}},2e3);return()=>clearTimeout(P)},[vi,Un,xn,qt,nn,st,hn,dn,Xi,Mt,At,Jn,r,i]);const pa=()=>{confirm("Are you sure you want to reset all data to defaults?")&&(ga("2025-12-15"),fs(qx),ri({}),Ln({}),Ji([]),window.location.reload())},lt=async()=>{const S={...dn},P=Date.now();if(Ln(S),Ja(P),bi(!1),Fl.apiKey)try{await Gl().currentUser?.getIdToken(!0);const re=cf(),ue=Oe.current||Vx(re);Oe.current||(Oe.current=ue);const ae=rm(ue,"artifacts",Yu,"public","data","shift_scheduler","global_state"),se={startDateStr:vi,holidays:Un,minStaff:xn,requiredLangs:qt,weekendDays:nn,legends:st,colors:hn,overrides:dn,publishedOverrides:S,lastPublished:P,config:Xi,hoursConfig:Mt,team:At,requests:Jn,lastUpdated:Date.now()};console.log("[Publish] Writing data with keys:",Object.keys(se)),await Lx(ae,se),c("saved")}catch($){console.error("Publish Error:",{code:$?.code,message:$?.message}),c("error")}else c("offline")},ms=async S=>{if(S==="VIEWER"){O(In.VIEWER),Y(""),ce(0),w(!1),Ae(!1),ht(null),Gt([]);return}let P;S==="ADMIN"?P="admin":S==="MANAGER"?P="manager":P="editor";const $=sessionStorage.getItem("firebaseToken"),re=sessionStorage.getItem("firebaseTokenRole");if($&&re===P)try{const ue=Gl();await pm(ue,$),Tt.current=Date.now(),ft.current=Date.now(),P==="manager"?(O(In.MANAGER),Y("Diretor"),ce(0),ht(null)):P==="admin"?(O(In.ADMIN),Y("Admin"),ce(0),ht(null)):P==="editor"&&(O(In.EDITOR),ht(B)),Ge.current=P,Z("");return}catch{sessionStorage.removeItem("firebaseToken"),sessionStorage.removeItem("firebaseTokenRole")}Be(P),V(!0)},Ii=(S,P,$)=>{Gt([]),Z(""),Tt.current=Date.now(),ft.current=Date.now(),S==="manager"?(O(In.MANAGER),ht(null)):S==="admin"?(O(In.ADMIN),ht(null)):S==="editor"?(O(In.EDITOR),ht($)):(O(In.VIEWER),ht(null)),Ge.current=S,Y(P),ce($)},zs=S=>{ri(P=>{const $={...P},re=`${S.empId}_${S.date}`;return S.newShift?$[re]=S.newShift:delete $[re],$}),Ji(P=>P.map($=>$.id===S.id?{...$,status:"APPROVED"}:$))},Pn=S=>{Ji(P=>P.map($=>$.id===S.id?{...$,status:"REJECTED"}:$))},gs=ne.useRef(null),Wa=()=>{const S={version:1,date:new Date().toISOString(),state:{startDateStr:vi,holidays:Un,minStaff:xn,requiredLangs:qt,weekendDays:nn,legends:st,colors:hn,overrides:dn,config:Xi,hoursConfig:Mt,team:At,requests:Jn}},P=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),$=URL.createObjectURL(P),re=document.createElement("a");re.href=$,re.download=`shift_scheduler_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(re),re.click(),document.body.removeChild(re)},ya=S=>{const P=S.target.files?.[0];if(!P)return;const $=new FileReader;$.onload=re=>{try{const ue=JSON.parse(re.target?.result);if(ue.state){const ae=ue.state;if(ae.startDateStr&&ga(ae.startDateStr),ae.holidays&&fs(ae.holidays),ae.minStaff&&Ki(ae.minStaff),ae.requiredLangs&&Er(ae.requiredLangs),ae.weekendDays&&Xn(ae.weekendDays),ae.legends&&Ht(ae.legends),ae.colors&&hs(ae.colors),ae.overrides){const se={};Object.entries(ae.overrides).forEach(([ge,Ee])=>{const[we,ye]=ge.split("_"),he=ye.includes("T")?ye.split("T")[0]:ye;se[`${we}_${he}`]=Ee}),ri(se)}if(ae.publishedOverrides){const se={};Object.entries(ae.publishedOverrides).forEach(([ge,Ee])=>{const[we,ye]=ge.split("_"),he=ye.includes("T")?ye.split("T")[0]:ye;se[`${we}_${he}`]=Ee}),Ln(se)}ae.config&&Ps(ae.config),ae.hoursConfig&&oi(ae.hoursConfig),ae.team&&Zi(ae.team),ae.requests&&Ji(ae.requests),alert("Configuration loaded successfully!")}}catch{alert("Error loading file. Invalid JSON.")}gs.current&&(gs.current.value="")},$.readAsText(P)},le=v_[Ue],Wi=it?dn:Vn,bn=ne.useMemo(()=>{let S=At.filter(P=>{const $=Xt==="All"||P.role===Xt,re=wn==="All"||P.languages.includes(wn);let ue=!0;return Dt!=="All"&&(Ft.length>0?ue=Ft.some(ae=>{const se=`${P.id}_${ae}`;return(Wi[se]||"F")===Dt}):ue=!0),$&&re&&ue});return Lt==="AZ"?S.sort((P,$)=>P.name.localeCompare($.name)):Lt==="ZA"?S.sort((P,$)=>$.name.localeCompare(P.name)):Lt==="LANG"?S.sort((P,$)=>P.languages.join("").localeCompare($.languages.join(""))):Lt==="ROLE"?S.sort((P,$)=>P.role.localeCompare($.role)):S.sort((P,$)=>P.offset-$.offset),S},[At,Xt,wn,Dt,Lt,vi,Wi,Ft]),Sn=(S,P,$,re)=>{if(!xi||A.role==="editor"&&P!==B)return;const ue=S.target.getBoundingClientRect();R({key:`${P}_${$}`,x:ue.left,y:ue.bottom,empName:re,date:$})},eo=(S,P)=>{if(!xi)return;if(it){Zn(ge=>[...ge,{...dn}]),ai([]),ri(ge=>{const Ee={...ge};return P?Ee[S]=P:delete Ee[S],Ee});return}const[$,re]=S.split("_"),ue=parseInt($);if(ue!==B)return;const ae=At.find(ge=>ge.id===ue)?.name||"Unknown",se={id:crypto.randomUUID(),empId:ue,empName:ae,date:re,newShift:P,status:"PENDING",timestamp:Date.now()};Ji(ge=>[...ge,se]),alert(le.requestSent)},xa=()=>{if(Us.length===0)return;const S=Us[Us.length-1];ai(P=>[...P,{...dn}]),ri(S),Zn(P=>P.slice(0,-1))},ba=()=>{if($i.length===0)return;const S=$i[$i.length-1];Zn(P=>[...P,{...dn}]),ri(S)},Tr=(S,P,$,re)=>{if(!xi)return;Zn(ae=>[...ae,{...dn}]),ai([]);const ue=ae=>{const se=new Date(P),ge=new Date($),Ee={...dn},we=new Date(se);for(;we<=ge;){const ye=Xl(we),he=`${ae}_${ye}`;re?Ee[he]=re:delete Ee[he],we.setDate(we.getDate()+1)}return Ee};if(typeof S=="number"||!isNaN(Number(S))){const ae=Number(S);if(!it&&ae!==B){alert(le.cantEditOthers);return}ri(ue(ae))}else if(S==="ALL"){if(!it){alert(le.permissionDenied);return}let ae={...dn};At.forEach(se=>{const ge=new Date(P),Ee=new Date($),we=new Date(ge);for(;we<=Ee;){const ye=Xl(we),he=`${se.id}_${ye}`;re?ae[he]=re:delete ae[he],we.setDate(we.getDate()+1)}}),ri(ae)}},Et=ne.useMemo(()=>{const S=h.getFullYear(),P=h.getMonth(),$=am(S,P),re=[],ue="en-GB",ae=new Map;Jn.forEach(se=>{se.status==="PENDING"&&ae.set(`${se.empId}_${se.date}`,!0)});for(let se=1;se<=$;se++){const ge=new Date(S,P,se),Ee=Xl(ge),we=nn.includes(ge.getDay()),ye=Un.includes(Ee),he={},dt={},rt={M:new Set,T:new Set,N:new Set},Pt={M:0,T:0,N:0};At.forEach(vt=>{const Nt=`${vt.id}_${Ee}`;dt[vt.id]=ae.get(Nt)||!1;const mn=Wi[Nt]||"F";he[vt.id]=mn,["M","T","N"].includes(mn)&&(vt.languages.forEach(ci=>rt[mn].add(ci)),Pt[mn]++)});const Qt={M:qt.filter(vt=>!rt.M.has(vt)),T:qt.filter(vt=>!rt.T.has(vt)),N:qt.filter(vt=>!rt.N.has(vt))},Ot={M:Pt.M<xn.M,T:Pt.T<xn.T,N:Pt.N<xn.N};re.push({date:se,fullDate:Ee,weekDay:ge.toLocaleDateString(ue,{weekday:"short"}).slice(0,3),isWeekend:we,isPtHoliday:ye,shifts:he,missing:Qt,lowStaff:Ot,counts:Pt,pendingReqs:dt,hasIssues:Qt.M.length>0||Qt.T.length>0||Qt.N.length>0||Ot.M||Ot.T||Ot.N})}if(Tn&&Tn>0){const se=new Date(S,P+1,1),ge=se.getFullYear(),Ee=se.getMonth(),we=am(ge,Ee),ye=Math.min(Tn,we);for(let he=1;he<=ye;he++){const dt=new Date(ge,Ee,he),rt=Xl(dt),Pt=nn.includes(dt.getDay()),Qt=Un.includes(rt),Ot={},vt={},Nt={M:new Set,T:new Set,N:new Set},mn={M:0,T:0,N:0};At.forEach(Bn=>{const va=`${Bn.id}_${rt}`;let ui;const _a=Jn.some(bs=>bs.empId===Bn.id&&bs.date===rt&&bs.status==="PENDING");vt[Bn.id]=_a,Wi[va]?ui=Wi[va]:ui="F",Ot[Bn.id]=ui,["M","T","N"].includes(ui)&&(Bn.languages.forEach(bs=>Nt[ui].add(bs)),mn[ui]++)});const ci={M:qt.filter(Bn=>!Nt.M.has(Bn)),T:qt.filter(Bn=>!Nt.T.has(Bn)),N:qt.filter(Bn=>!Nt.N.has(Bn))},zn={M:mn.M<xn.M,T:mn.T<xn.T,N:mn.N<xn.N};re.push({date:he,fullDate:rt,weekDay:dt.toLocaleDateString(ue,{weekday:"short"}).slice(0,3),isWeekend:Pt,isPtHoliday:Qt,shifts:Ot,missing:ci,lowStaff:zn,counts:mn,pendingReqs:vt,hasIssues:ci.M.length>0||ci.T.length>0||ci.N.length>0||zn.M||zn.T||zn.N})}}return re},[h,At,Un,xn,qt,nn,Wi,Jn,Tn]);ne.useEffect(()=>{const S=Qn.current;if(!S)return;const P=new Date;if(h.getFullYear()!==P.getFullYear()||h.getMonth()!==P.getMonth())return;const $=`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}-${String(P.getDate()).padStart(2,"0")}`,re=Et.findIndex(ue=>ue.fullDate===$);re>=0&&setTimeout(()=>{const ue=S.querySelectorAll("table thead th"),se=Array.from(ue).slice(1)[re];if(se){const ge=ue[0]?.offsetWidth||0;S.scrollLeft=se.offsetLeft-ge-100}},100)},[h]),ne.useEffect(()=>{const S=Qn.current;if(!S)return;let P=!1,$=S.scrollLeft,re=S.scrollTop;const ue=()=>{P||(P=!0,requestAnimationFrame(()=>{try{const ae=S.scrollLeft,se=S.scrollTop,ge=Math.abs(ae-$),Ee=Math.abs(se-re);if(ge>5&&ge>Ee&&S.scrollLeft+S.clientWidth>=S.scrollWidth-40&&Tn===0){const ye=Date.now();ye-cs.current>900&&(cs.current=ye,kn(7))}$=ae,re=se}finally{P=!1}}))};return S.addEventListener("scroll",ue,{passive:!0}),()=>S.removeEventListener("scroll",ue)},[Qn,h,At,Tn]),ne.useEffect(()=>{const S=Qn.current;if(!S)return;let P=null;const $=()=>{const ue=S.querySelectorAll("table thead th");if(!ue||ue.length<=1)return;const ae=Array.from(ue).slice(1),se=ue[0],ge=se?se.offsetWidth:0;let Ee=-1;ae.forEach((dt,rt)=>{const Pt=dt.offsetLeft,Qt=Pt+dt.offsetWidth,Ot=S.scrollLeft+ge,vt=S.scrollLeft+S.clientWidth;Pt<vt&&Qt>Ot&&(Ee=rt)});const ye=am(h.getFullYear(),h.getMonth())-1;if(Ee>=ye-3&&Tn===0&&S.scrollLeft>100&&(js.current=S.scrollLeft,yi.current=!0,kn(7)),Ee>=ye&&Tn>0){const dt=new Date(h.getFullYear(),h.getMonth()+1,1);x(dt)}else x(new Date(h.getFullYear(),h.getMonth(),1))},re=()=>{P&&window.clearTimeout(P),P=window.setTimeout(()=>{$()},220)};return S.addEventListener("scroll",re,{passive:!0}),()=>{S.removeEventListener("scroll",re),P&&window.clearTimeout(P)}},[Qn,h,Tn]),ne.useEffect(()=>{const S=Qn.current;!S||!yi.current||js.current===0||requestAnimationFrame(()=>{S.scrollLeft=js.current})},[Tn]);const ps=ne.useMemo(()=>bn.map(S=>{let P=0,$=0,re=0,ue=0,ae=0,se=0,ge=0;return Et.forEach(Ee=>{const we=Ee.shifts[S.id];we==="M"&&(P++,ge+=Mt.M),we==="T"&&($++,ge+=Mt.T),we==="N"&&(re++,ge+=Mt.N),we==="V"&&ae++,["M","T","N"].includes(we)&&(se++,Ee.isWeekend&&ue++)}),{name:S.name,M:P,T:$,N:re,WE:ue,V:ae,Total:se,Hours:ge}}),[Et,bn,Mt]),Bs=()=>{kn(0),yi.current=!1,cs.current=0;const S=new Date(h.getFullYear(),h.getMonth()-1,1);y(S),x(S)},li=()=>{kn(0),yi.current=!1,cs.current=0;const S=new Date(h.getFullYear(),h.getMonth()+1,1);y(S),x(S)};ne.useEffect(()=>{x(S=>S.getFullYear()!==h.getFullYear()||S.getMonth()!==h.getMonth()?new Date(h.getFullYear(),h.getMonth(),1):S)},[h]);const qs=p.toLocaleDateString("en-GB",{month:"long",year:"numeric"}),ei=ne.useMemo(()=>{const S=new Set;return Et.forEach((P,$)=>{if(bn.some(ue=>{const ae=P.shifts[ue.id];return["M","T","N"].includes(ae)})){const ue=$-$%7;S.add(ue)}}),S},[Et,bn]),ys=()=>{const S=[le.colaborador,le.cargo,le.linguas,...Et.map(se=>`${se.date}/${se.weekDay}`)],P=bn.map(se=>[se.name,se.role,se.languages.join(" "),...Et.map(ge=>ge.shifts[se.id]==="F"?"F":ge.shifts[se.id])]);P.push([]),P.push([le.analise.toUpperCase(),le.analiseDesc]),["M","T","N"].forEach(se=>{const ge=se==="M"?le.manha:se==="T"?le.tarde:le.noite,Ee=`${le.faltas}: ${ge}`,we=Et.map(ye=>{const he=ye.missing[se],dt=ye.lowStaff[se],rt=[];return he.length>0&&rt.push(`Missing: ${he.join(",")}`),dt&&rt.push(le.lowStaff),rt.length>0?rt.join(" | "):"OK"});P.push([Ee,"","",...we])}),P.push([]),P.push([le.legend]),P.push(["M",`${le.legM} (${st.M})`]),P.push(["T",`${le.legT} (${st.T})`]),P.push(["N",`${le.legN} (${st.N})`]),P.push(["F",le.legF]),P.push(["V",le.legV]),P.push(["S",le.legS]);let $="\uFEFF"+S.join(";")+`
`;P.forEach(se=>$+=se.join(";")+`
`);const re=new Blob([$],{type:"text/csv;charset=utf-8;"}),ue=URL.createObjectURL(re),ae=document.createElement("a");ae.setAttribute("href",ue),ae.setAttribute("download",`Schedule_${h.getMonth()+1}_${h.getFullYear()}.csv`),document.body.appendChild(ae),ae.click(),document.body.removeChild(ae)},Ut=S=>({backgroundColor:hn[S]||"#fff",color:S==="N"?"#fff":"#000",borderColor:S==="N"?"transparent":"rgba(0,0,0,0.1)"}),xs=async S=>{try{const P=(await cE(async()=>{const{default:se}=await import("./html2canvas.esm-Ge7aVWlp.js");return{default:se}},[])).default,$=document.querySelector("table");if(!$){alert("Could not find table to export");return}const re=$.cloneNode(!0),ue=se=>{const ge=[/text-\w+-\d+/,/bg-\w+-\d+/,/border-\w+-\d+/,/ring-\w+-\d+/,/divide-\w+-\d+/,/from-\w+-\d+/,/to-\w+-\d+/,/via-\w+-\d+/];Array.from(se.classList).forEach(Ee=>{ge.some(we=>we.test(Ee))&&se.classList.remove(Ee)}),Array.from(se.children).forEach(Ee=>{ue(Ee)})};ue(re);const ae=document.createElement("div");ae.style.position="fixed",ae.style.left="-9999px",ae.style.top="-9999px",ae.appendChild(re),document.body.appendChild(ae),setTimeout(async()=>{try{const se=await P(re,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff",allowTaint:!0}),ge=document.createElement("a");ge.href=se.toDataURL(`image/${S==="jpeg"?"jpeg":"png"}`),ge.download=`schedule_${h.getMonth()+1}_${h.getFullYear()}.${S}`,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge)}catch{alert("Error exporting image. Please try again.")}finally{document.body.removeChild(ae)}},100)}catch{alert("Error with export library. Please try again.")}},Hs=ne.useMemo(()=>Array.from(new Set(At.map(S=>S.role))),[At]),es=Jn.filter(S=>S.status==="PENDING").length;return i?m.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-red-50 text-red-900 p-4 text-center",children:[m.jsx(om,{className:"w-16 h-16 text-red-600 mb-4"}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Erro Crtico"}),m.jsx("p",{className:"max-w-md mb-2 text-sm",children:"Houve um erro ao inicializar a aplicao."}),m.jsx("p",{className:"max-w-md mb-6 text-sm text-red-800",children:"Por favor, verifique a sua conexo de internet e as credenciais do Firebase no arquivo .env"}),m.jsxs("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 shadow-lg flex items-center justify-center gap-2",children:[m.jsx(Qu,{size:20})," Tentar Novamente"]})]}):r?m.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-gray-50",children:[m.jsx(Yd,{className:"w-12 h-12 text-indigo-600 animate-spin mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-gray-700",children:le.loading})]}):m.jsxs("div",{className:"flex flex-col min-h-screen h-screen w-full overflow-x-hidden bg-gray-50 text-xs sm:text-sm md:text-sm font-sans relative print:overflow-visible print:bg-white print:h-auto",children:[m.jsx("style",{children:`
        @media print { 
          @page { size: landscape; margin: 10mm; } 
          .print\\:hidden { display: none !important; } 
          body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
          .no-shift-week { display: none !important; }
        }
      `}),r&&m.jsxs("div",{className:"bg-blue-50 border-b-2 border-blue-400 text-blue-800 p-3 flex items-center gap-3 z-40 print:hidden",children:[m.jsx(Yd,{size:18,className:"animate-spin flex-shrink-0"}),m.jsx("span",{className:"text-sm font-medium",children:"Loading schedule data. Please wait before making edits..."})]}),m.jsxs("div",{className:"bg-slate-900 text-white p-2 shadow-lg z-30 print:hidden flex flex-col md:flex-row justify-between items-start md:items-center px-4 md:px-6 gap-2",children:[m.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-4 w-full md:w-auto",children:[m.jsxs("div",{className:"flex items-center gap-2 md:gap-4 w-full md:w-auto justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Pa,{className:"w-4 h-4 text-emerald-400"}),m.jsx("span",{className:"text-xs uppercase tracking-wide",children:"Access Mode:"})]}),m.jsxs("div",{className:"md:hidden relative",children:[m.jsxs("button",{onClick:()=>br(!xr),className:"flex items-center gap-1 bg-gradient-to-br from-emerald-600 to-emerald-700 text-white border border-emerald-500 rounded px-2 py-0.5 text-[11px] font-normal shadow-sm hover:shadow-md transition-all min-w-[90px] justify-between",children:[m.jsx("span",{className:"truncate",children:In[Object.keys(In).find(S=>In[S].id===A.id)]?.label}),m.jsx($r,{size:10,className:`transition-transform flex-shrink-0 ${xr?"rotate-90":""}`})]}),xr&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>br(!1)}),m.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-xl border border-gray-200 py-1 z-50 min-w-[140px]",children:Object.keys(In).map(S=>{const P=In[S],$=A.id===P.id;return m.jsxs("button",{onClick:()=>{$||ms(S),br(!1)},className:`w-full text-left px-3 py-2 text-xs font-medium transition-colors flex items-center gap-2 ${$?"bg-emerald-50 text-emerald-700":"text-gray-700 hover:bg-gray-50"}`,children:[P.id==="viewer"&&m.jsx(a1,{size:12}),P.id==="editor"&&m.jsx(l1,{size:12}),P.id==="manager"&&m.jsx(Pa,{size:12}),P.id==="admin"&&m.jsx(om,{size:12}),P.label,$&&m.jsx(Xr,{size:12,className:"ml-auto"})]},P.id)})})]})]})]}),m.jsx("div",{className:"md:hidden",children:m.jsxs("div",{className:`flex items-center gap-2 text-xs px-3 py-1 rounded-full border transition-colors ${o==="saved"?"bg-green-900/30 border-green-700 text-green-300":o==="saving"?"bg-yellow-900/30 border-yellow-700 text-yellow-300":o==="offline"?"bg-orange-900/30 border-orange-700 text-orange-300 hover:bg-orange-900/50 cursor-help":"bg-red-900/30 border-red-700 text-red-300"}`,title:o==="offline"?"Clique para tentar reconectar":void 0,onClick:o==="offline"?()=>{window.location.reload()}:void 0,children:[o==="saved"&&m.jsx(r1,{size:14}),o==="saving"&&m.jsx(Qu,{size:14,className:"animate-spin"}),(o==="error"||o==="offline")&&m.jsx(s1,{size:14})]})})]}),m.jsx("div",{className:"hidden md:flex bg-slate-800 rounded-lg p-0.5 gap-1",children:Object.keys(In).map(S=>{const P=In[S],$=A.id===P.id;return m.jsxs("button",{onClick:()=>!$&&ms(S),disabled:$,className:`px-3 py-1 text-xs font-medium rounded transition-all flex items-center gap-1.5 ${$?"bg-emerald-600 text-white shadow-sm cursor-default":"text-slate-400 hover:text-white hover:bg-slate-700"}`,children:[P.id==="viewer"&&m.jsx(a1,{size:12}),P.id==="editor"&&m.jsx(l1,{size:12}),P.id==="manager"&&m.jsx(Pa,{size:12}),P.id==="admin"&&m.jsx(Pa,{size:12,className:"text-red-400"}),P.label]},P.id)})})]}),m.jsxs("div",{className:"hidden md:flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-4 w-full md:w-auto",children:[m.jsxs("div",{className:`flex items-center gap-2 text-xs px-3 py-1 rounded-full border transition-colors ${o==="saved"?"bg-green-900/30 border-green-700 text-green-300":o==="saving"?"bg-yellow-900/30 border-yellow-700 text-yellow-300":o==="offline"?"bg-orange-900/30 border-orange-700 text-orange-300 hover:bg-orange-900/50 cursor-help":"bg-red-900/30 border-red-700 text-red-300"}`,title:o==="offline"?"Clique para tentar reconectar":void 0,onClick:o==="offline"?()=>{window.location.reload()}:void 0,children:[o==="saved"&&m.jsx(r1,{size:14}),o==="saving"&&m.jsx(Qu,{size:14,className:"animate-spin"}),(o==="error"||o==="offline")&&m.jsx(s1,{size:14}),m.jsx("span",{className:"font-medium",children:o==="saved"?le.saved:o==="saving"?le.saving:o==="offline"?"Offline":le.offline})]}),nt&&m.jsxs("div",{className:"text-xs text-emerald-300 flex items-center gap-2 bg-slate-800 px-3 py-1 rounded-full border border-slate-700",children:[m.jsxs("span",{className:"text-slate-400",children:[le.loggedInAs,":"]}),m.jsx("span",{className:"font-bold text-white",children:nt})]})]})]}),m.jsx(M3,{isOpen:M,onClose:()=>V(!1),targetRole:N,team:At,onLoginSuccess:Ii,onTeamUpdate:Zi,t:le,tokenExpiredMsg:j}),m.jsx(k3,{isOpen:oe,onClose:()=>me(!1),requests:Jn,onApprove:zs,onReject:Pn,t:le}),m.jsx(B3,{isOpen:Ne,onClose:()=>xe(!1),t:le,team:At,currentUser:A,preSelectedId:qe,onApply:Tr}),D&&m.jsx(H3,{cell:D,onClose:()=>R(null),onUpdate:eo,legends:st,customColors:hn}),m.jsx(j3,{isOpen:C,onClose:()=>U(!1),data:ps,t:le,hoursConfig:Mt}),m.jsx(q3,{isOpen:W,onClose:()=>X(!1),team:At,overrides:dn,colors:hn,t:le}),m.jsxs("div",{className:"bg-white flex flex-col shadow-sm z-20 print:hidden flex-shrink-0",children:[m.jsxs("div",{className:"px-2 sm:px-3 md:px-4 py-0.5 md:py-1 md:border-b flex flex-col sm:flex-row items-start sm:items-center justify-between gap-1 md:gap-0",children:[m.jsx("div",{children:m.jsx("h1",{className:"text-sm sm:text-base md:text-lg font-bold text-gray-800 leading-tight",children:le.title})}),m.jsxs("div",{className:"flex items-center space-x-0.5 sm:space-x-1 md:space-x-1 flex-wrap gap-0.5 md:gap-0 w-full sm:w-auto",children:[it&&m.jsxs("button",{onClick:()=>me(!0),className:"flex items-center px-1.5 sm:px-2 py-1 sm:py-1.5 bg-orange-50 text-orange-700 rounded hover:bg-orange-100 transition border border-orange-200 relative text-xs sm:text-sm",title:le.requests,children:[m.jsx(Yx,{size:14,className:"sm:w-4 sm:h-4 mr-1 sm:mr-2"}),m.jsx("span",{className:"hidden sm:inline",children:"Requests"}),m.jsx("span",{className:"sm:hidden",children:"Req"}),es>0&&m.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-[10px] font-bold border-2 border-white animate-pulse",children:es})]}),xi&&m.jsxs("button",{onClick:()=>{je(A.role==="editor"?String(B):""),xe(!0)},className:"flex items-center px-2 sm:px-3 py-1.5 sm:py-2 bg-purple-50 text-purple-700 rounded hover:bg-purple-100 transition border border-purple-200 text-xs sm:text-sm",title:le.bulkTitle,children:[m.jsx(Qx,{size:14,className:"sm:w-4 sm:h-4 mr-1 sm:mr-2"}),m.jsx("span",{className:"hidden sm:inline",children:le.bulkActions}),m.jsx("span",{className:"sm:hidden",children:"Bulk"})]}),it&&m.jsxs("div",{className:"flex items-center bg-gray-100 rounded p-1 mr-2",children:[m.jsx("button",{onClick:Wa,className:"p-2 hover:bg-white rounded text-gray-600",title:le.saveFile,children:m.jsx(UE,{size:16})}),m.jsxs("label",{className:"p-2 hover:bg-white rounded text-gray-600 cursor-pointer",title:le.loadFile,children:[m.jsx(u1,{size:16}),m.jsx("input",{type:"file",ref:gs,onChange:ya,className:"hidden",accept:".json"})]})]}),m.jsxs("button",{onClick:()=>X(!0),className:"hidden md:flex items-center px-3 py-2 bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition border border-blue-200",children:[m.jsx(Zl,{size:16,className:"mr-2"})," ",le.annual]}),m.jsxs("button",{onClick:()=>U(!0),className:"hidden md:flex items-center px-3 py-2 bg-indigo-50 text-indigo-700 rounded hover:bg-indigo-100 transition border border-indigo-200",children:[m.jsx(Fx,{size:16,className:"mr-2"})," ",le.stats]}),m.jsxs("button",{onClick:ys,className:"hidden md:flex items-center px-3 py-2 bg-green-50 text-green-700 rounded hover:bg-green-100 transition border border-green-200",children:[m.jsx(Gd,{size:16,className:"mr-2"})," ",le.exportCsv]}),m.jsxs("button",{onClick:()=>window.print(),className:"hidden md:flex items-center px-3 py-2 bg-gray-50 text-gray-700 rounded hover:bg-gray-100 transition border border-gray-200",children:[m.jsx(eT,{size:16,className:"mr-2"})," ",le.print]}),m.jsxs("button",{onClick:()=>xs("png"),className:"hidden md:flex items-center px-3 py-2 bg-sky-50 text-sky-700 rounded hover:bg-sky-100 transition border border-sky-200",title:"Export as PNG",children:[m.jsx(Gd,{size:16,className:"mr-2"})," PNG"]}),m.jsxs("button",{onClick:()=>xs("jpeg"),className:"hidden md:flex items-center px-3 py-2 bg-rose-50 text-rose-700 rounded hover:bg-rose-100 transition border border-rose-200",title:"Export as JPEG",children:[m.jsx(Gd,{size:16,className:"mr-2"})," JPEG"]}),it&&m.jsxs("div",{className:"flex flex-col gap-0.5",children:[m.jsxs("button",{onClick:lt,disabled:!Ls||r,className:`flex items-center px-3 py-2 rounded transition border ${Ls&&!r?"bg-orange-50 text-orange-700 border-orange-200 hover:bg-orange-100 cursor-pointer":"bg-gray-50 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:r?"Loading schedule data...":Ls?"Publish schedule to viewers":"No unpublished changes",children:[r&&m.jsx(Yd,{size:16,className:"mr-2 animate-spin"}),!r&&m.jsx(u1,{size:16,className:"mr-2"}),r?"Loading...":"Publish"," ",Ls&&!r&&m.jsx("span",{className:"ml-1 font-bold",children:"*"})]}),$n&&m.jsxs("div",{className:"text-[9px] text-gray-500 px-1 text-center",children:["Last: ",new Date($n).toLocaleString()]})]}),it&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{onClick:xa,disabled:Us.length===0,className:"flex items-center px-3 py-2 bg-gray-50 text-gray-700 rounded hover:bg-gray-100 transition border border-gray-200 disabled:opacity-40 disabled:cursor-not-allowed",title:le.undo,children:[m.jsx(fT,{size:16,className:"mr-2"}),le.undo]}),m.jsxs("button",{onClick:ba,disabled:$i.length===0,className:"flex items-center px-3 py-2 bg-gray-50 text-gray-700 rounded hover:bg-gray-100 transition border border-gray-200 disabled:opacity-40 disabled:cursor-not-allowed",title:le.redo,children:[m.jsx(nT,{size:16,className:"mr-2"}),le.redo]})]}),Vt&&m.jsxs("button",{onClick:()=>w(!E),className:`hidden md:flex items-center px-3 py-2 rounded transition ${E?"bg-indigo-100 text-indigo-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[m.jsx(Kx,{size:16,className:"mr-2"})," ",le.config]}),A.permissions.includes("system")?m.jsxs("button",{onClick:()=>Ae(!Fe),className:`flex items-center px-3 py-2 rounded transition ${Fe?"bg-red-100 text-red-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[m.jsx(Pa,{size:16,className:"mr-2"})," Admin"]}):null]})]}),!it&&Object.keys(Vn).length===0&&m.jsx("div",{className:"px-2 sm:px-3 md:px-4 py-1 bg-amber-50 text-amber-800 border-t border-b border-amber-200 text-xs",children:"No published schedule yet. Please contact a manager to publish."}),m.jsxs("div",{className:"md:hidden px-2 py-2 bg-gray-50 border-t flex flex-col gap-2 relative z-50 filter-container",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsxs("button",{onClick:()=>Zt(!Kn),className:"w-full flex items-center justify-between gap-1 bg-white border border-gray-300 rounded px-2 py-1 text-xs font-normal shadow-sm hover:shadow-md transition-all",style:{color:"#374151"},children:[m.jsx("span",{className:"truncate",children:Xt==="All"?"All Roles":Xt}),m.jsx($r,{size:10,className:`flex-shrink-0 transition-transform ${Kn?"rotate-90":""}`})]}),Kn&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>Zt(!1)}),m.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 py-1 z-[9999] min-w-[110px] w-56",children:["All Roles",...Hs].map(S=>m.jsxs("button",{onClick:()=>{ma(S==="All Roles"?"All":S),Zt(!1)},className:`w-full text-left px-3 py-1.5 text-xs font-normal transition-colors flex items-center gap-2 ${Xt==="All"&&S==="All Roles"||Xt===S?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[S,Xt===S&&m.jsx(Xr,{size:10,className:"ml-auto"})]},S))})]})]}),m.jsxs("div",{className:"relative flex-1",children:[m.jsxs("button",{onClick:()=>wt(!jn),className:"w-full flex items-center justify-between gap-1 bg-white border border-gray-300 rounded px-2 py-1 text-xs font-normal shadow-sm hover:shadow-md transition-all",style:{color:"#374151"},children:[m.jsx("span",{className:"truncate",children:wn==="All"?"All Languages":wn}),m.jsx($r,{size:10,className:`flex-shrink-0 transition-transform ${jn?"rotate-90":""}`})]}),jn&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>wt(!1)}),m.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 py-1 z-[9999] min-w-[110px] w-56",children:["All Languages",...rf].map(S=>m.jsxs("button",{onClick:()=>{fn(S==="All Languages"?"All":S),wt(!1)},className:`w-full text-left px-3 py-1.5 text-xs font-normal transition-colors flex items-center gap-2 ${wn==="All"&&S==="All Languages"||wn===S?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[S,wn===S&&m.jsx(Xr,{size:10,className:"ml-auto"})]},S))})]})]})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsxs("button",{onClick:()=>us(!vr),className:"w-full flex items-center justify-between gap-1 bg-white border border-gray-300 rounded px-2 py-1 text-xs font-normal shadow-sm hover:shadow-md transition-all",style:{color:"#374151"},children:[m.jsx("span",{className:"truncate",children:Dt==="All"?"All Shifts":Dt==="M"?"Morning":Dt==="T"?"Afternoon":"Night"}),m.jsx($r,{size:10,className:`flex-shrink-0 transition-transform ${vr?"rotate-90":""}`})]}),vr&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>us(!1)}),m.jsx("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 py-1 z-[9999] min-w-[130px] w-56",children:[{val:"All",label:"All Shifts"},{val:"M",label:"Morning (M)"},{val:"T",label:"Afternoon (T)"},{val:"N",label:"Night (N)"}].map(S=>m.jsxs("button",{onClick:()=>{Yi(S.val),us(!1)},className:`w-full text-left px-3 py-1.5 text-xs font-normal transition-colors flex items-center gap-2 ${Dt===S.val?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[S.label,Dt===S.val&&m.jsx(Xr,{size:10,className:"ml-auto"})]},S.val))})]})]}),m.jsxs("div",{className:"relative flex-1",children:[m.jsxs("button",{onClick:()=>si(!_r),className:"w-full flex items-center justify-between gap-1 bg-white border border-gray-300 rounded px-2 py-1 text-xs font-normal shadow-sm hover:shadow-md transition-all",style:{color:"#374151"},children:[m.jsx("span",{className:"truncate",children:Lt==="OFFSET"?le.sortDefault:Lt==="AZ"?le.sortAZ:Lt==="ZA"?le.sortZA:Lt==="LANG"?le.sortLang:le.sortRole}),m.jsx($r,{size:10,className:`flex-shrink-0 transition-transform ${_r?"rotate-90":""}`})]}),_r&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>si(!1)}),m.jsx("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-xl border border-gray-200 py-1 z-50 min-w-[130px]",children:[{val:"OFFSET",label:le.sortDefault},{val:"AZ",label:le.sortAZ},{val:"ZA",label:le.sortZA},{val:"LANG",label:le.sortLang},{val:"ROLE",label:le.sortRole}].map(S=>m.jsxs("button",{onClick:()=>{Qi(S.val),si(!1)},className:`w-full text-left px-3 py-1.5 text-xs font-normal transition-colors flex items-center gap-2 ${Lt===S.val?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[S.label,Lt===S.val&&m.jsx(Xr,{size:10,className:"ml-auto"})]},S.val))})]})]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center bg-white border rounded-lg shadow-sm",children:[m.jsx("button",{onClick:Bs,className:"p-1.5 hover:bg-gray-100 rounded-l-lg",children:m.jsx(af,{size:16})}),m.jsxs("div",{className:"px-4 font-semibold text-xs flex items-center justify-center gap-2",children:[m.jsx(Zl,{size:14}),qs]}),m.jsx("button",{onClick:li,className:"p-1.5 hover:bg-gray-100 rounded-r-lg",children:m.jsx($r,{size:16})})]}),Ft.length>0&&m.jsxs("button",{onClick:()=>Gt([]),style:{background:"#92400e",color:"white",border:"1px solid #78350f",borderRadius:"0.375rem",padding:"0.375rem 0.75rem",fontSize:"0.75rem",fontWeight:"normal",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",display:"flex",alignItems:"center",gap:"0.25rem",cursor:"pointer",transition:"box-shadow 150ms ease-in-out"},children:[m.jsx(aa,{size:11}),"Clear (",Ft.length,")"]})]})]}),m.jsxs("div",{className:"hidden md:flex px-2 sm:px-3 md:px-4 py-0.5 bg-gray-50 border-t flex-col md:flex-row justify-between items-start md:items-center gap-0.5 md:gap-0 overflow-x-auto",children:[m.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-wrap text-[10px] md:text-xs",children:[m.jsxs("div",{className:"flex items-center gap-1 md:gap-2 hidden sm:flex",children:[m.jsx(zE,{size:12,className:"md:w-4 md:h-4"}),m.jsxs("span",{className:"font-bold hidden md:inline",children:[le.filters,":"]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"text-xs font-semibold text-gray-600 mr-2",children:[le.all,":"]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("label",{className:`inline-flex items-center gap-2 px-2 py-1 rounded text-xs border ${Xt==="All"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:[m.jsx("input",{type:"radio",name:"roleFilter",value:"All",checked:Xt==="All",onChange:()=>ma("All"),className:"sr-only"}),"All"]}),Hs.map(S=>m.jsxs("label",{className:`inline-flex items-center gap-2 px-2 py-1 rounded text-xs border ${Xt===S?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:[m.jsx("input",{type:"radio",name:"roleFilter",value:S,checked:Xt===S,onChange:()=>ma(S),className:"sr-only"}),S]},S))]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"text-xs font-semibold text-gray-600 mr-2",children:[le.linguas,":"]}),m.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[m.jsxs("label",{className:`inline-flex items-center gap-2 px-2 py-1 rounded text-xs border ${wn==="All"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:[m.jsx("input",{type:"radio",name:"langFilter",value:"All",checked:wn==="All",onChange:()=>fn("All"),className:"sr-only"}),le.all]}),rf.map(S=>m.jsxs("label",{className:`inline-flex items-center gap-2 px-2 py-1 rounded text-xs border ${wn===S?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:[m.jsx("input",{type:"radio",name:"langFilter",value:S,checked:wn===S,onChange:()=>fn(S),className:"sr-only"}),S]},S))]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"text-xs font-semibold text-gray-600 mr-2",children:"Shifts:"}),m.jsxs("label",{className:`inline-flex items-center gap-2 px-2 py-1 rounded text-xs border ${Dt==="All"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:[m.jsx("input",{type:"radio",name:"shiftFilter",value:"All",checked:Dt==="All",onChange:()=>Yi("All"),className:"sr-only"}),le.all]}),m.jsxs("label",{className:`inline-flex items-center gap-2 px-2 py-1 rounded text-xs border ${Dt==="M"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:[m.jsx("input",{type:"radio",name:"shiftFilter",value:"M",checked:Dt==="M",onChange:()=>Yi("M"),className:"sr-only"}),"M"]}),m.jsxs("label",{className:`inline-flex items-center gap-2 px-2 py-1 rounded text-xs border ${Dt==="T"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:[m.jsx("input",{type:"radio",name:"shiftFilter",value:"T",checked:Dt==="T",onChange:()=>Yi("T"),className:"sr-only"}),"T"]}),m.jsxs("label",{className:`inline-flex items-center gap-2 px-2 py-1 rounded text-xs border ${Dt==="N"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,children:[m.jsx("input",{type:"radio",name:"shiftFilter",value:"N",checked:Dt==="N",onChange:()=>Yi("N"),className:"sr-only"}),"N"]})]}),m.jsx("div",{className:"flex items-center gap-2 text-xs text-gray-600 ml-4 border-l pl-4",children:m.jsxs("span",{className:"font-bold",children:[le.sort,":"]})}),m.jsxs("select",{value:Lt,onChange:S=>Qi(S.target.value),className:"text-xs border rounded p-1",children:[m.jsx("option",{value:"OFFSET",children:le.sortDefault}),m.jsx("option",{value:"AZ",children:le.sortAZ}),m.jsx("option",{value:"ZA",children:le.sortZA}),m.jsx("option",{value:"LANG",children:le.sortLang}),m.jsx("option",{value:"ROLE",children:le.sortRole})]})]}),m.jsxs("div",{className:"flex items-center bg-white border rounded-lg shadow-sm",children:[m.jsx("button",{onClick:Bs,className:"p-1.5 hover:bg-gray-100 rounded-l-lg",children:m.jsx(af,{size:16})}),m.jsxs("div",{className:"px-4 font-semibold w-32 text-center text-xs flex items-center justify-center gap-2",children:[m.jsx(Zl,{size:14}),qs]}),m.jsx("button",{onClick:li,className:"p-1.5 hover:bg-gray-100 rounded-r-lg",children:m.jsx($r,{size:16})})]}),Ft.length>0&&m.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 border border-blue-200 rounded-lg shadow-sm px-3 py-1",children:[m.jsxs("span",{className:"text-xs font-semibold text-blue-800",children:[le.selectedDays,": ",Ft.length]}),m.jsx("button",{onClick:()=>Gt([]),className:"text-xs text-blue-600 hover:text-blue-800 underline",children:le.clearSelection})]}),m.jsxs("div",{className:"flex items-center gap-2 bg-white border rounded-lg shadow-sm px-3 py-1",children:[m.jsx("span",{className:"text-xs font-semibold text-gray-600",children:"Focus:"}),m.jsx("input",{type:"date",value:ii||"",onChange:S=>{const P=S.target.value;if(yr(P||null),P){const[$,re,ue]=P.split("-").map(Number),ae=new Date($,re-1,ue);(ae.getFullYear()!==h.getFullYear()||ae.getMonth()!==h.getMonth())&&(y(new Date($,re-1,1)),x(new Date($,re-1,1)),yi.current=!1,kn(0)),setTimeout(()=>{const se=Qn.current;if(se){const ge=se.querySelectorAll("table thead th"),Ee=Array.from(ge).slice(1),we=ae.getDate(),ye=Ee[we-1];if(ye){const he=ge[0]?.offsetWidth||0;se.scrollLeft=ye.offsetLeft-he-50}}},100)}},className:"text-xs border rounded px-2 py-1"}),ii&&m.jsxs("button",{onClick:()=>yr(null),style:{background:"linear-gradient(to bottom right, #ef4444, #dc2626)",color:"white",border:"1px solid #f87171",borderRadius:"0.5rem",padding:"0.5rem 0.75rem",fontSize:"0.75rem",fontWeight:"500",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",display:"flex",alignItems:"center",gap:"0.25rem",cursor:"pointer",transition:"box-shadow 150ms ease-in-out"},title:"Clear focus",children:[m.jsx(aa,{size:12}),"Clear"]})]})]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row flex-1 min-h-0 print:overflow-visible",children:[m.jsx(O3,{show:Fe,team:At,setTeam:Zi}),m.jsx(F3,{show:Vt&&E,config:Xi,setConfig:Ps,team:At,setTeam:Zi,holidays:Un,setHolidays:fs,minStaff:xn,setMinStaff:Ki,requiredLangs:qt,setRequiredLangs:Er,legends:st,setLegends:Ht,colors:hn,setColors:hs,weekendDays:nn,setWeekendDays:Xn,lang:Ue,onReset:pa,hoursConfig:Mt,setHoursConfig:oi}),m.jsxs("div",{ref:Qn,className:"calendar-container print:overflow-visible",children:[m.jsxs("div",{className:"hidden print:block mb-4",children:[m.jsxs("h1",{className:"text-2xl font-bold",children:[le.printTitle," - ",qs]}),m.jsxs("p",{className:"text-sm text-gray-500",children:[le.generatedOn," ",new Date().toLocaleDateString("en-GB")]})]}),m.jsxs("table",{className:"w-full h-full border-collapse text-base sm:text-sm print:text-[8px]",children:[m.jsx("thead",{className:"bg-gray-100 sticky top-0 z-10 shadow-sm print:static",children:m.jsxs("tr",{children:[m.jsx("th",{className:"p-1 md:p-1.5 text-left border-b border-r min-w-[140px] md:min-w-[200px] bg-gray-100 sticky left-0 z-20 shadow-sm print:static print:bg-white print:border-black",children:m.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[le.colaborador,Lt==="AZ"&&m.jsx(i1,{size:14,className:"text-indigo-600 ml-1 print:hidden"}),Lt==="ZA"&&m.jsx(yE,{size:14,className:"text-indigo-600 ml-1 print:hidden"}),Lt==="OFFSET"&&m.jsx(i1,{size:14,className:"text-gray-400 ml-1 print:hidden"}),Lt==="LANG"&&m.jsx(HE,{size:14,className:"text-indigo-600 ml-1 print:hidden"}),Lt==="ROLE"&&m.jsx(bE,{size:14,className:"text-indigo-600 ml-1 print:hidden"})]})}),Et.map((S,P)=>{const $=P-P%7,re=ei.has($),ue=ii===S.fullDate,ae=Ft.includes(S.fullDate),se=new Date,ge=`${se.getFullYear()}-${String(se.getMonth()+1).padStart(2,"0")}-${String(se.getDate()).padStart(2,"0")}`,Ee=S.fullDate===ge;return m.jsxs("th",{onClick:we=>{if(we.shiftKey&&_i){we.preventDefault();const ye=Et.findIndex(Qt=>Qt.fullDate===_i),he=P,dt=Math.min(ye,he),rt=Math.max(ye,he),Pt=Et.slice(dt,rt+1).map(Qt=>Qt.fullDate);Gt(Qt=>{const Ot=new Set([...Qt,...Pt]);return Array.from(Ot)}),St(S.fullDate)}else we.ctrlKey||we.metaKey?(we.preventDefault(),Gt(ye=>ye.includes(S.fullDate)?ye.filter(rt=>rt!==S.fullDate):[...ye,S.fullDate]),St(S.fullDate)):(ae?(Gt([]),St(null)):(Gt([S.fullDate]),St(S.fullDate)),window.innerWidth>=768&&yr(null))},className:`p-1 md:p-1.5 border-b min-w-[40px] md:min-w-[48px] text-center relative cursor-pointer transition-all ${re?"":"no-shift-week"} ${Ee?"bg-green-200 ring-2 md:ring-4 ring-green-500 ring-inset font-bold z-10 print:bg-green-200":ae?"bg-blue-200 border-l-2 md:border-l-4 border-r-2 md:border-r-4 border-t-2 md:border-t-4 border-blue-500 z-10":ue?"bg-yellow-100 border-l-2 md:border-l-4 border-r-2 md:border-r-4 border-t-2 md:border-t-4 border-yellow-500 z-10":S.isWeekend?"bg-indigo-50 print:bg-gray-100 border-r":"border-r"} ${S.isPtHoliday&&!ue&&!ae&&!Ee?"bg-red-50 print:bg-gray-200":""} print:border-black hover:bg-gray-200`,title:ae?"Selected - Shift+Click to extend, Ctrl+Click to deselect":"Click to focus, Ctrl+Click to add, Shift+Click for range",children:[m.jsx("div",{className:"text-xs md:text-xs font-bold text-gray-700 print:text-black",children:S.date}),m.jsx("div",{className:"text-[10px] md:text-xs text-gray-500 uppercase print:text-black",children:S.weekDay})]},S.fullDate)})]})}),m.jsxs("tbody",{children:[bn.map(S=>{let P=null;const $=B===S.id,re=A.role==="editor"&&!$,ue=Vs===S.id,ae=Et.map(se=>se.shifts[S.id]);return m.jsxs("tr",{className:`transition-colors print:break-inside-avoid ${re?"opacity-50 grayscale":"hover:bg-gray-50"}`,children:[m.jsxs("td",{onClick:()=>ht(ue?null:S.id),className:`p-1 md:p-1.5 border-b bg-white sticky left-0 z-10 shadow-sm print:static print:border-black print:shadow-none group cursor-pointer ${ue?"border-l-2 md:border-l-4 border-t-2 md:border-t-4 border-b-2 md:border-b-4 border-yellow-500 bg-yellow-50":"border-r"}`,title:"Click to focus this employee",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"font-bold text-xs md:text-xs text-gray-800 print:text-black",children:S.name}),it&&m.jsx("button",{onClick:()=>{je(String(S.id)),xe(!0)},className:"opacity-0 group-hover:opacity-100 p-0.5 md:p-1 hover:bg-gray-100 rounded text-gray-500 print:hidden transition-opacity",title:le.bulkActions,children:m.jsx(OE,{size:12,className:"md:w-4 md:h-4"})})]}),m.jsxs("div",{className:"text-[10px] text-gray-500 flex flex-wrap gap-1 print:hidden",children:[S.role," ",m.jsxs("span",{className:"text-indigo-600 font-mono",children:["[",S.languages.join(" "),"]"]}),S.rotationMode&&S.rotationMode!=="STANDARD"&&m.jsxs("span",{className:"text-orange-600 font-bold ml-1",children:["(",S.rotationMode.replace("FIXED_",""),")"]})]})]}),Et.map((se,ge)=>{const Ee=se.shifts[S.id],we=ge-ge%7,ye=ei.has(we),he=ii===se.fullDate,dt=new Date,rt=`${dt.getFullYear()}-${String(dt.getMonth()+1).padStart(2,"0")}-${String(dt.getDate()).padStart(2,"0")}`,Pt=se.fullDate===rt,Qt=ge===Et.length-1,Ot=ge>0&&P3(P,Ee),vt=z3(ae,ge),Nt=se.pendingReqs[S.id];P=Ee;const mn=ue&&he,ci=Ft.includes(se.fullDate);return m.jsx("td",{onClick:zn=>Sn(zn,S.id,se.fullDate,S.name),className:`
                            border-b p-1 md:p-1.5 text-center transition print:cursor-default relative
                            ${ye?"":"no-shift-week"}
                            ${Pt?"bg-green-100 border-l-4 border-r-4 border-green-500":ci?"bg-blue-100 border-l-4 border-r-4 border-blue-500":mn?"bg-yellow-100 border-l-4 border-r-4 border-t-4 border-b-4 border-yellow-500":ue?`bg-yellow-50 border-t-4 border-b-4 border-yellow-500 ${Qt?"border-r-4":""}`:he?"bg-yellow-50 border-l-4 border-r-4 border-yellow-500":"border-r"}
                            cursor-pointer hover:opacity-80
                          `,children:m.jsxs("div",{onClick:zn=>{Sn(zn,S.id,se.fullDate,S.name)},className:`
                              w-full h-7 md:h-8 rounded flex items-center justify-center text-xs md:text-xs font-bold shadow-sm print:shadow-none print:rounded-none border
                              ${vt.hasShiftOverflow?"ring-2 ring-red-500 z-10":Ot?"ring-2 ring-orange-500 z-10":""}
                              ${Nt?"opacity-70 ring-2 ring-yellow-400 border-yellow-500 border-dashed":""}
                            `,style:Ut(Ee),title:vt.hasShiftOverflow?"ShiftOverflow (>40h)":Nt?le.pending:Ot?le.restWarn:"",children:[Nt&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5",children:m.jsx(Gx,{size:14,className:"text-gray-700"})}),Ee==="F"?"":Ee,vt.hasShiftOverflow&&!Nt&&m.jsx(Jl,{size:10,className:"absolute top-0 right-0 text-red-600 bg-white rounded-full"}),Ot&&!Nt&&!vt.hasShiftOverflow&&m.jsx(Jl,{size:10,className:"absolute top-0 right-0 text-orange-600 bg-white rounded-full"})]})},se.fullDate)})]},S.id)}),xi&&m.jsxs(m.Fragment,{children:[m.jsxs("tr",{className:"bg-gray-800 text-white font-bold print:bg-gray-200 print:text-black print:border-t-2 print:border-black",children:[m.jsx("td",{className:"p-2 border-r sticky left-0 bg-gray-800 z-10 shadow-sm print:static print:bg-transparent",children:le.analise}),m.jsx("td",{colSpan:Et.length,className:"p-2 text-xs font-normal",children:le.analiseDesc})]}),["M","T","N"].map((S,P)=>m.jsxs("tr",{className:"bg-gray-50 print:bg-white",children:[m.jsxs("td",{className:"p-2 border-b border-r font-bold text-gray-600 sticky left-0 bg-gray-50 z-10 shadow-sm print:static print:bg-transparent print:text-black print:border-black",children:[le.faltas,":"," ",S==="M"?le.manha:S==="T"?le.tarde:le.noite]}),Et.map($=>{const re=$.missing[S],ue=$.lowStaff[S],ae=re.length>0||ue,se=ii===$.fullDate,ge=P===2;return m.jsx("td",{className:`border-b p-1 text-center text-[10px] ${se?`bg-yellow-50 border-l-4 border-r-4 border-yellow-500 ${ge?"border-b-4":""}`:ae?"bg-red-100 print:bg-gray-100 border-r":"border-r"} print:border-black`,children:ae?m.jsxs("div",{className:"text-red-600 font-bold flex flex-col items-center justify-center h-full group relative cursor-help print:text-black",children:[m.jsx($x,{size:12,className:"mb-1 print:text-black"}),m.jsx("span",{className:"print:text-[8px]",children:re.join(",")}),ue&&m.jsx("span",{className:"text-[8px] whitespace-nowrap",children:le.lowStaff})]}):m.jsx("div",{className:"text-green-300 print:text-gray-300",children:m.jsx(Xr,{size:12})})},$.fullDate)})]},S))]}),it&&m.jsxs(m.Fragment,{children:[m.jsxs("tr",{className:"bg-gray-50 print:bg-white",children:[m.jsx("td",{className:"p-2 border-b border-r font-bold text-gray-600 sticky left-0 bg-gray-50 z-10 shadow-sm print:static print:bg-transparent print:text-black print:border-black",children:"Counts"}),Et.map(S=>{const P=ii===S.fullDate,$=S.counts;return m.jsx("td",{className:`border-b border-r p-1 text-center text-[10px] ${P?"bg-yellow-50 ring-2 ring-yellow-400 ring-inset":""} print:border-black`,children:m.jsxs("div",{className:"flex items-center justify-center gap-1",children:[m.jsxs("span",{className:"px-1.5 py-0.5 rounded border text-[10px] font-semibold",style:Ut("M"),title:"Morning count",children:["M: ",$.M]}),m.jsxs("span",{className:"px-1.5 py-0.5 rounded border text-[10px] font-semibold",style:Ut("T"),title:"Afternoon count",children:["T: ",$.T]}),m.jsxs("span",{className:"px-1.5 py-0.5 rounded border text-[10px] font-semibold",style:Ut("N"),title:"Night count",children:["N: ",$.N]})]})},S.fullDate)})]}),m.jsxs("tr",{className:"bg-gray-50 print:bg-white",children:[m.jsx("td",{className:"p-2 border-b border-r font-bold text-gray-600 sticky left-0 bg-gray-50 z-10 shadow-sm print:static print:bg-transparent print:text-black print:border-black",children:"On Duty"}),Et.map(S=>{const P=ii===S.fullDate,$=S.counts.M+S.counts.T+S.counts.N;return m.jsx("td",{className:`border-b border-r p-1 text-center text-[10px] ${P?"bg-yellow-50 ring-2 ring-yellow-400 ring-inset":""} print:border-black`,children:$},S.fullDate)})]}),m.jsxs("tr",{className:"bg-gray-50 print:bg-white",children:[m.jsx("td",{className:"p-2 border-b border-r font-bold text-gray-600 sticky left-0 bg-gray-50 z-10 shadow-sm print:static print:bg-transparent print:text-black print:border-black",children:"Hours"}),Et.map(S=>{const P=ii===S.fullDate,$=S.counts.M*Mt.M+S.counts.T*Mt.T+S.counts.N*Mt.N;return m.jsx("td",{className:`border-b border-r p-1 text-center text-[10px] ${P?"bg-yellow-50 ring-2 ring-yellow-400 ring-inset":""} print:border-black`,children:$},S.fullDate)})]}),m.jsxs("tr",{className:"bg-gray-50 print:bg-white",children:[m.jsx("td",{className:"p-2 border-b border-r font-bold text-gray-600 sticky left-0 bg-gray-50 z-10 shadow-sm print:static print:bg-transparent print:text-black print:border-black",children:"Requests"}),Et.map(S=>{const P=ii===S.fullDate,$=Object.values(S.pendingReqs||{}).filter(Boolean).length;return m.jsx("td",{className:`border-b border-r p-1 text-center text-[10px] ${P?"bg-yellow-50 ring-2 ring-yellow-400 ring-inset":""} print:border-black`,children:$},S.fullDate)})]}),rf.map(S=>m.jsxs("tr",{className:"bg-gray-50 print:bg-white",children:[m.jsxs("td",{className:"p-2 border-b border-r font-bold text-gray-600 sticky left-0 bg-gray-50 z-10 shadow-sm print:static print:bg-transparent print:text-black print:border-black",children:[S," Overflow"]}),Et.map(P=>{const $=ii===P.fullDate,re=bn.reduce((we,ye)=>we+(P.shifts[ye.id]==="M"&&ye.languages.includes(S)?1:0),0),ue=bn.reduce((we,ye)=>we+(P.shifts[ye.id]==="T"&&ye.languages.includes(S)?1:0),0),ae=bn.reduce((we,ye)=>we+(P.shifts[ye.id]==="N"&&ye.languages.includes(S)?1:0),0),se=Math.max(0,re-1),ge=Math.max(0,ue-1),Ee=Math.max(0,ae-1);return m.jsx("td",{className:`border-b border-r p-1 text-center text-[10px] ${$?"bg-yellow-50 ring-2 ring-yellow-400 ring-inset":""} print:border-black`,title:`M:${re} T:${ue} N:${ae}`,children:m.jsxs("div",{className:"flex items-center justify-center gap-1",children:[m.jsxs("span",{className:`px-1.5 py-0.5 rounded border text-[10px] font-semibold ${se>0?"":"opacity-60"}`,style:Ut("M"),children:["M:+",se]}),m.jsxs("span",{className:`px-1.5 py-0.5 rounded border text-[10px] font-semibold ${ge>0?"":"opacity-60"}`,style:Ut("T"),children:["T:+",ge]}),m.jsxs("span",{className:`px-1.5 py-0.5 rounded border text-[10px] font-semibold ${Ee>0?"":"opacity-60"}`,style:Ut("N"),children:["N:+",Ee]})]})},P.fullDate)})]},`lng-${S}`))]})]})]}),m.jsxs("div",{className:"hidden print:block mt-8 border-t pt-4",children:[m.jsx("h3",{className:"font-bold text-sm mb-2 uppercase",children:le.legend}),m.jsxs("div",{className:"grid grid-cols-6 gap-4 text-xs",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 border text-center font-bold",style:Ut("M"),children:"M"}),m.jsxs("span",{children:[le.legM," (",st.M,")"]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 border text-center font-bold",style:Ut("T"),children:"T"}),m.jsxs("span",{children:[le.legT," (",st.T,")"]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 border text-center font-bold",style:Ut("N"),children:"N"}),m.jsxs("span",{children:[le.legN," (",st.N,")"]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 border bg-gray-100"}),m.jsx("span",{children:le.legF})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 border text-center font-bold",style:Ut("V"),children:"V"}),m.jsx("span",{children:le.legV})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 border text-center font-bold",style:Ut("S"),children:"S"}),m.jsx("span",{children:le.legS})]})]})]})]})]})]})};aE.createRoot(document.getElementById("root")).render(m.jsx(ne.StrictMode,{children:m.jsx(G3,{})}));"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/hv-scheduler/service-worker.js").catch(r=>console.error("SW registration failed",r))}),navigator.serviceWorker.addEventListener("message",r=>{r.data?.type==="VERSION_UPDATED"&&window.location.reload()}));
